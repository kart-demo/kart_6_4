!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var r in i)("object"==typeof exports?exports:e)[r]=i[r]}}("undefined"!=typeof self?self:this,(()=>(()=>{var e={34575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},93913:e=>{function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},95318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},74175:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const r={eula:"EULA",privacyPolicy:"PrivacyPolicy",supplemental:"Supplemental",marketing:"Marketing",rdp:"RDP",rdpEtl:"RDP_ETL"}},37515:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const r={notAccepted:0,installerAccepted:1,productAccepted:2}},66125:(e,t,i)=>{"use strict";i.d(t,{Fe:()=>n,Ge:()=>c,I_:()=>a,Ph:()=>d,VS:()=>h,in:()=>l,ix:()=>r,k3:()=>o,l4:()=>s,le:()=>g,vn:()=>u,y5:()=>p});const r="%IsCleanInstallation%",s="%ProductVersion%",n="%MarketingProductVersion%",o="%RebrandingCode%",a="%PremiumLink%",c="%PpcsId%",l="%ProductInstallationId%",d="%MachineId%",u="%ProductType%",h="%MarketoFormUrl%",p="%MarketoScriptUrl%",g="%Eol%"},7940:(e,t,i)=>{"use strict";i.d(t,{Ds:()=>r,N5:()=>a,OL:()=>s,S_:()=>d,UO:()=>h,Yn:()=>o,ZD:()=>n,kf:()=>u,nU:()=>c,rx:()=>l,uL:()=>p});const r=0,s=1,n="",o=36e5,a=1e3,c=30*a,l=500,d=1e4,u="default",h=60,p=24},29411:(e,t,i)=>{"use strict";i.d(t,{EK:()=>o,W5:()=>r,ZP:()=>n,sy:()=>s});const r=3,s=4,n=5,o=6},58577:(e,t,i)=>{"use strict";i.d(t,{H:()=>s,L:()=>r});const r="Home",s="Business"},52394:(e,t,i)=>{"use strict";i.d(t,{Bh:()=>s,lB:()=>r});const r=3,s=4},71856:(e,t,i)=>{"use strict";i.d(t,{F7:()=>r,Wx:()=>s,ov:()=>n});const r="kart.downloadScan",s="kart.userRegistrationGH.Business",n="kart.userRegistrationGH.Home"},79158:(e,t,i)=>{"use strict";i.d(t,{Nb:()=>p,Q7:()=>n,RW:()=>l,S0:()=>d,SZ:()=>h,Xz:()=>u,cH:()=>o,eX:()=>r,ow:()=>a,qK:()=>s,tU:()=>c,zp:()=>g});const r=2315481877,s=1540376503,n=2053105129,o=1145656411,a=3749922893,c=1572049213,l=2282992486,d=2564031954,u=3139375325,h=1163956862,p=688673833,g=1302738846},524:(e,t,i)=>{"use strict";i.d(t,{B2:()=>n,oM:()=>s,uR:()=>r});const r="default_app.asar",s="gui_configuration.json",n="hidden-window-with-marketo-form.html"},91525:(e,t,i)=>{"use strict";i.d(t,{P6:()=>s,KM:()=>r,kG:()=>n}),i(7940);const r="safe",s="danger",n="unknown"},15606:(e,t,i)=>{"use strict";i.d(t,{Bz:()=>n,LX:()=>s,XG:()=>a,cv:()=>r,ee:()=>o,h6:()=>c,ui:()=>l});const r="renderer-data",s="change-ds-balloons-status",n="navigate-from-balloon",o="accept-agreements",a="decline-accept-agreements",c="hidden-marketo-window",l="close-proxy-window"},11880:(e,t,i)=>{"use strict";i.d(t,{K7:()=>d,Zz:()=>r,_t:()=>n,d_:()=>a,lA:()=>c,lL:()=>o,yh:()=>s,yq:()=>l});const r="spa-to-bl",s="decline-dump-report",n="send-dump-report",o="mlws-report-remind-later",a="tfu-installation",c="send-etl-report",l="decline-etl-report",d="spa:set_balloons_status"},83916:(e,t,i)=>{"use strict";i.d(t,{Bq:()=>r});const r="ForwardMigration"},83:(e,t,i)=>{"use strict";i.d(t,{s3:()=>r});const r=-2147417851},51436:(e,t,i)=>{"use strict";i.d(t,{Tf:()=>n,bx:()=>s,uI:()=>r});const r={showStep1:"showStep1",showStep2:"showStep2",initialRegistrationState:"initialRegistrationState",targeting:"targeting",formLoading:"formLoading",scriptLoading:"scriptLoading",formLoadingSilent:"formLoadingSilent",scriptLoadingSilent:"scriptLoadingSilent",formSubmission:"formSubmission"},s={noInternetErr:"noInternetErr",apiFailErr:"apiFailErr",success:"success",successByCode:"successByCode"},n={registerButton:"registerButton",alreadyRegisteredButton:"alreadyRegisteredButton",signInButton:"signInButton",exitApp:"exitApp",closeUi:"closeUi",closeButton:"closeButton"}},38923:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const r={xkse:"xKSE"}},89342:(e,t,i)=>{"use strict";i.d(t,{cV:()=>r,eu:()=>s});const r=0,s=3},19536:(e,t,i)=>{"use strict";i.d(t,{wM:()=>r});const r="registeredAdditionalConfirmation"},64030:(e,t,i)=>{"use strict";i.d(t,{MR:()=>r,Pg:()=>o,VY:()=>n,o1:()=>s});const r=0,s=-1,n=-2147483567,o=-1463287803},54363:(e,t,i)=>{"use strict";i.d(t,{w:()=>r});const r={WINDOW:0,FULLSCREEN:1}},28103:(e,t,i)=>{"use strict";i.d(t,{Vq4:()=>s,bCk:()=>r,ppL:()=>n});const r="button_startMalwareScan",s="button_cancelMalwareScan",n="modalWindow_userRegistration"},62760:(e,t,i)=>{"use strict";i.d(t,{SL:()=>r});const r=1},47701:(e,t,i)=>{"use strict";i.d(t,{Bv:()=>f,C8:()=>v,CS:()=>b,FP:()=>u,Hz:()=>l,Lh:()=>p,N_:()=>_,No:()=>y,TH:()=>d,VI:()=>c,Vw:()=>o,Wm:()=>h,Xh:()=>a,av:()=>n,fJ:()=>g,g5:()=>S,hX:()=>s,vU:()=>w,vm:()=>m});const r="/main",s="/details",n="/support",o="/agreements",a="/settings/proxy",c="/settings/notifications",l="/settings/shared-folders-protection",d="/settings/objects-to-detect",u="/settings/exploit-prevention",h="/settings/password-protection",p="/settings/exclusions/apps",g="/settings/exclusions/machines",v="/settings/blocked/apps",m="/settings/blocked/machines",S="/settings/about",_="/upgrade-protection",f="/malware-scan",w=`${r}-dashboard`,b=`${r}-protection`,y="/activity-report"},59890:(e,t,i)=>{"use strict";i.d(t,{ZJ:()=>o,$c:()=>a}),i(27207),i(40529);var r=i(91525),s=i(7940),n=i(47701);n.vU.replace(/\//,s.ZD),n.Lh.replace(/\//,s.ZD),n.fJ.replace(/\//,s.ZD),n.vm.replace(/\//,s.ZD),n.C8.replace(/\//,s.ZD),n.Hz.replace(/\//,s.ZD),n.hX.replace(/\//,s.ZD),n.VI.replace(/\//,s.ZD),n.Xh.replace(/\//,s.ZD),n.FP.replace(/\//,s.ZD),n.Wm.replace(/\//,s.ZD),n.av.replace(/\//,s.ZD),n.N_.replace(/\//,s.ZD),n.CS.replace(/\//,s.ZD),n.Bv.replace(/\//,s.ZD),n.TH.replace(/\//,s.ZD),n.g5.replace(/\//,s.ZD),n.Vw.replace(/\//,s.ZD),n.No.replace(/\//,s.ZD);const o=e=>e&&"string"==typeof e?e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):e,a=e=>{switch(e){case 0:return r.KM;case 255:return r.kG;default:return r.P6}}},59431:(e,t,i)=>{"use strict";i.d(t,{getResources:()=>o});var r=i(7940),s=i(38923);const n={"en-US-business":{dictionaries:JSON.parse('{"app_name":"Kaspersky Anti-Ransomware Tool for Business","version":"Version","premium_trigger_1":"Available with Premium","premium_trigger_4":"Do not show this message again","status_running":"Running","status_test_sending":"Sending message...","failure":"An error occurred","dont_show_this_message":"Do not show this message again","change_proxy_settings":"Go to the proxy server settings","copy_path":"Copy path","save":"Save","cancel":"Cancel","unblock":"Unblock","move_to_trusted":"Move to trusted","add":"Add","remove":"Remove","check_settings":"Check settings","admin":"Local notifications","user_with_email":"Email reports","user_with_email_description":"Sends information about detected threats, scan results, and protection activities performed on this PC.","user_without_email":"No notifications","send_test_message":"Send test message","advanced":"Advanced","disable_now":"Disable now","send_feedback":"Leave feedback","close":"Close","machine_id":"Machine ID","installation_id":"Installation ID","google_analytics_id":"Google Analytics CID","required":"Required","user_name":"Username","password":"Password","login":"Login","host":"Host","port":"Port","name":"Your name","position":"Position","administrators_email":"Administrator\'s email address","users_email":"Your email address","smtp_server":"SMTP server","starttls":"STARTTLS","none":"None","ssl_tls":"SSL/TLS","every_week":"Every week","every_month":"Every month","manually":"Manually","monday":"Monday","tuesday":"Tuesday","wednesday":"Wednesday","thursday":"Thursday","friday":"Friday","saturday":"Saturday","sunday":"Sunday","recommended":"Recommended","all_events":"Maximum","menu_label":"Menu","screen_0_name":"","screen_0_title":"Protection technologies","protection_1_name":"Behavioral detection","protection_1_title":"Behavioral detection","protection_1_description":"Collects information about applications\' actions on your device and blocks suspicious activity.","protection_2_name":"Cloud analysis","protection_2_title":"Cloud analysis","protection_2_description":"Enhances device protection by considering the file and software reputations provided by users worldwide.","protection_3_name":"Machine learning","protection_3_title":"Machine learning","protection_3_description":"Compares detected objects with records in the application\'s anti-virus databases.","protection_4_name":"Expert analysis","protection_4_title":"Expert analysis","protection_4_description":"Detection algorithms are determined manually by Kaspersky experts.","protection_5_name":"Automatic analysis","protection_5_title":"Automatic analysis","protection_5_description":"Detection algorithms are determined automatically by the application.","manage_apps_title":"Manage apps","screen_1_title":"Manage apps","blocked_apps":"Blocked apps","empty_blocked_apps_title":"No blocked apps yet.","trusted_title":"Trusted apps","empty_trusted_apps_title":"You haven\'t added any trusted apps yet.","settings_title":"Settings","screen_2_title":"Settings","proxy_server":"Proxy settings","notifications":"Notifications","proxy_server_mode_0_title":"Detect proxy server settings automatically","proxy_server_mode_1_title":"Use specified proxy server settings","proxy_server_mode_2_title":"Do not use proxy server","bypass_proxy":"Bypass proxy server for local addresses","send_report_title":"Send report","email_settings_title":"Email settings","connection_security_title":"Connection security","authentication_required":"Use authentication","support_description_1":"An application that performs a group of coordinated functions, tasks, or activities for the benefit of the user.","support_description_2":"Examples of an application include a word processor, spreadsheet, accounting application, web browser, media player, aeronautical flight simulator, console game, or photo editor.","support_description_3":"© 2023 AO Kaspersky Lab","support_enable_tracing_title":"Application logging","support_enable_tracing_subtitle":"Select to collect information for Technical Support.","what_to_collect":"Detail level","attention_consuming":"Logs may take up a lot of disk space.","cryptopro_library":"The CryptoPro program library, developed by OOO CryptoPro, is used to check the digital signature.","screen_3_title":"Get support","get_support_title":"Support","support_link_onlineHelpOnSupportPage_title":"Go to Online Help","support_link_onlineHelpOnSupportPage_description":"Open Help for Kaspersky Anti-Ransomware Tool in your browser.","support_link_forumOnSupportPage_title":"Go to our Community","support_link_forumOnSupportPage_description":"Discuss problems with other users and our support team.","support_link_premiumSupportOnSupportPage_title":"Premium support","support_link_premiumSupportOnSupportPage_description":"Get 24/7 support from the Kaspersky support team.","screen_5_name":"Detection statistics","detection_statistics_title":"Detection statistics","detection_statistics_caption":"View details about the detected objects here","detection_statistics_popup":"The detected malware will be removed from the list, but not from your PC","detection_statistics_clear_button":"Clear statistics","detection_statistics_modal_title":"Are you sure you want to clear the detection statistics?","detection_statistics_modal_description":"Note that the detected malware will still be present on your PC. The detection statistics will not be cleared from the Malware Scan and Activity report.","detection_statistics_no_detects":"Data will appear once we detect any new dangerous objects","detection_statistics_cleaned":"Statistics was cleared successfully","threat_blocked":"Blocked","threat_rollback_file":"Rolled back file","threat_rollback_registry":"Rolled back registry","threat_rollback_process":"Rolled back process","screen_4_name":"Leave feedback","screen_4_title":"Leave feedback","feedback_description_1":"You can send your feedback or any suggestions to kart@kaspersky.com","feedback_description_2":"We appreciate any feedback and strive to make our products better, but we might not have the opportunity to immediately respond or resolve your problem right away.","screen_6_name":"Send report to admin","success":"Success!","error_code":"Error code:","get_premium_protection":"Get Premium Protection","details":"Details","done_with_exclamation":"Done!","do_not_show_message_again":"Do not show this message again","failed_to_send_report":"Failed to send report","check_email_settings":"Check your email settings or contact your system administrator.","open_settings":"Open settings","success_report_sending":"The report was successfully sent to administrator.","check_the_proxy_settings":"Check the specified proxy settings.","proxy_settings_good":"The specified proxy settings are OK.","unable_to_send_message":"Unable to send a test message.","success_sending_message":"The test message was successfully sent.","malware_was_blocked":"Malware was blocked","actions_of_malware_were_rolled_back":"Actions of malware were rolled back","event_logging_is_enabled":"Event logging is enabled","logs_take_disk_space":"Logs can take up a lot of disk space.","disable":"Disable","machine_was_blocked":"Machine was blocked","legitimate_software_was_blocked":"Legitimate software that can be used to damage your data was blocked","actions_of_legitimate_software_were_rolled_back":"Actions of legitimate software that can be used to damage your data were rolled back","exploit_was_blocked":"Exploit was blocked","new_features_available":"New features available","new_features_available_description":"To enable new features, click the button below.","enable":"Enable","update_installed":"Update installed","restart_pc_to_apply":"Restart your computer to apply the update.","restart":"Restart","restart_app_to_apply":"Restart the application to apply the update.","rate_us":"Please rate us","help_us_improve_the_app":"Help us improve the application by leaving your feedback.","rate":"Rate","new_message_from_kaspersky":"New message from Kaspersky!","we_have_something_interesting":"We have something interesting for you!","read":"Read","regional_data_processing":"Regional data processing","regional_data_processing_description":"The software works and processes data under relevant laws and uses the appropriate infrastructure.","new_version_is_installed":"New version is installed","activate_to_enable_protection":"Activate it now to enable new functionality","activate":"Activate","malware_was_not_found":"Malware was not found","activity_report_description":"View the list of activities performed to protect your PC.","enter_password_to_confirm_action":"Enter password to confirm action","credentials_required_title":"Credentials required","credentials_required_description":"Enter admin credentials for Kaspersky Endpoint Security to continue activation of Kaspersky Anti-Ransomware Tool.","use_proxy_server_auth":"Use proxy server authentication","protection_2_data_1":"Connected users:","protection_2_data_2":"Neutralized:","protection_2_data_3":"Allowlisted:","protection_2_data_4":"Denylisted:","protection_2_data_5":"Categorized:","threat_rollback":"Rollback","on":"on","at":"at","anti_ransomware_tool":"Anti-Ransomware Tool","for_edition":"for Business","send_report_message":"Kaspersky doesn\'t receive any of this data. It is only used to generate and send reports to your system administrator.","settings_error_required":"Required","settings_error_invalid_ip":"Incorrect IP address or domain","settings_error_integer":"Please enter a positive integer","settings_error_port":"Please enter a value from 1 to 65535","settings_error_email":"Incorrect email address","settings_mode_help":"Please select an application mode.","spinner_checking_proxy":"Checking the proxy server settings...","spinner_sending_report":"Sending the report...","tooltip_malicious_program_blocked":"Object blocked","tooltip_rollback_file_deleted":"File deleted","tooltip_rollback_file_renamed":"File renamed","tooltip_rollback_file_restored":"File restored","tooltip_rollback_process_terminated":"Process terminated","tooltip_rollback_file_copied":"File copied","tooltip_rollback_registry_restored":"Registry value restored","tooltip_rollback_registry_deleted":"Registry value deleted","tooltip_registry_value_title":"Value:","tooltip_file_title":"File name:","tooltip_file_path_title":"File path:","tooltip_registry_path_title":"Registry path:","copy_to_clipboard":"Copy to clipboard","terms_and_conditions_link":"Terms and conditions","terms_and_conditions_title":"Terms and conditions","shared_folders_protection":"Shared folders protection","shared_folders_protection_description":"If a remote machine tries to encrypt a shared folder, Kaspersky Anti-Ransomware Tool blocks the connection of the remote machine to the shared folder.","blocking_time":"Block connection for:","minutes":"minutes","blocked_machines":"Blocked machines","trusted_machines_title":"Trusted machines","logon_event_is_enabled":"To correctly add machine exclusions, make sure that the Audit logon events function is enabled in the Windows settings.","add_machine":"Add machine","add_machines":"Add machines","add_apps":"Add apps","ip_for_example":"IP or domain (for example, 10.10.10.10)","empty_blocked_machine_title":"No machines have been blocked yet.","empty_trusted_machine_title":"You haven\'t added any trusted machines yet.","manage_machines_title":"Manage machines","blocking_time_input_error":"(Required)","ok_label":"OK","supported_os":"We now support Windows Server 2008 R2/2012/2012R2/2016/2019, Standard/Enterprise/Datacenter.","modal_what_is_new":"Introducing version 6.4!","daily":"Every day","tooltip_remote_path_title":"Machine name (IP):","tooltip_machine_blocked":"Machine blocked","agreements_page_title":"Agreements","objects_to_detect_settings_left_menu":"Types of objects","objects_to_detect_title":"Types of objects to detect and block","malware":"Malware","adware_riskware":"Adware and others (including crypto-miners)","copy_ip_link":"Copy IP","adware_riskware_detection_header":"Improved detection of objects","adware_riskware_detection_content":"Kaspersky Anti-Ransomware Tool now detects adware and other legitimate software that could be used to damage your data.","exploit_prevention":"Exploit Prevention","exploit_prevention_enabled":"Block exploits","system_process_memory_enabled":"Protect system processes memory","tooltip_exploit_blocked":"Exploit blocked","tooltip_process_title":"Process name:","exploit_functionality_explanation":"Blocks malicious activity that exploits software vulnerabilities.","tooltip_threat_title":"Path to detected object:","enter_password_title":"Enter password","read_only_mode_description":"The settings are password-protected.","enter_password_to_confirm":"To unlock the settings, enter the password.","confirm":"Confirm","remember_password":"Remember for this session","password_protection":"Admin password","password_protection_enabled":"Password-protect settings","password_protection_explanation":"Protect the application settings from unauthorized or accidental changes.","confirm_password":"Re-enter password","invalid_password":"Invalid password!","empty_password":"Empty password!","passwordsDoNoMatch":"Passwords do not match!","password_protection_settings":"Admin password","you_have_to_accept_agreements":"Please review and accept the updated terms and conditions to get these features.","view_and_accept":"Review","later":"Later","read_and_accept_the_documents_below":"Please review and accept the documents below","read_and_accept_the_documents_subheader":"...in order to use the free Kaspersky Anti-Ransomware Tool for Business app. If you do not accept the terms and conditions, the app will not work.","read_and_accept_the_documents_confirm":"I confirm that I have fully read, understand and accept the following:","eula_checkbox_label":"I confirm that I have fully read, understand, and accept the terms and conditions of this End User License Agreement","supplemental_checkbox_label":"I confirm that I have fully read, understand, and accept the terms and conditions of this Supplemental Statement on Data Processing","privacy_policy_checkbox_label":"I am aware and agree that my data will be handled and transmitted (including to third-party countries) as described in this Privacy Policy. I confirm that I have fully read and understand the Privacy Policy","to_get_this_features_accept_agreements":"Please review and accept the updated","accept_agreements":"Terms and conditions","next":"Next","done":"Done","submit":"Submit","complete_the_full_survey":"Please take our Customer Satisfaction survey (3-5 minutes)","leave_your_feedback":"Please rate the application and leave your feedback","we_will_be_grateful":"Please rate the application and feel free to leave any additional comments. Your feedback will help us improve our services.","may_be_you_have_got_time_to_answer":"Do you have a few more minutes?","feedback_option_1":"Poor product quality","feedback_option_1_description":"(errors, bugs, crashes, performance and incompatibility issues)","feedback_option_2":"Performance slow down","feedback_option_2_description":"(computer or applications are frozen)","feedback_option_3":"Low protection level","feedback_option_3_description":"(some malware was not detected)","feedback_option_4":"Poor product quality","feedback_option_4_description":"(errors, bugs, crashes, performance and incompatibility issues)","feedback_option_5":"Performance slow down","feedback_option_5_description":"(computer or applications are frozen)","feedback_option_6":"Low protection level","feedback_option_6_description":"(some malware was not detected)","feedback_option_7":"Poor product quality","feedback_option_7_description":"(errors, bugs, crashes, performance and incompatibility issues)","feedback_option_8":"Performance slow down","feedback_option_8_description":"(computer or applications are frozen)","feedback_option_9":"Low protection level","feedback_option_9_description":"(some malware was not detected)","feedback_option_10":"High protection level","feedback_option_11":"Great usability","feedback_option_12":"Freeware","feedback_option_13":"High protection level","feedback_option_14":"Great usability","feedback_option_15":"Freeware","report_a_problem":"Report problem","manual_report_comment":"Send reports manually from the main window.","permitted_values":"The value must be between 1 and 99.","password_protection_feature":"Password protection","news_and_special_offers":"News and special offers","news_and_special_offers_description":"We now provide you with information materials via the application. You can find out more about the new features in","help":"Help","report_mail_header":"Kaspersky report","test_mail_header":"Kaspersky test mail from","unknown":"Unknown","remoteMachine":"Remote machine","eula":"End User License Agreement","privacy_policy":"Privacy Policy","marketing_agreement":"Statement Regarding Data Processing for Marketing Purposes","supplemental_agreement":"Supplemental Statement on Data Processing","registration_modal_header":"Registration","register_to_proceed_using":"Register with Kaspersky to activate free protection on your devices","first_name":"First name","email":"Email","company_name":"Company name","country":"Country","registration_form_agreement_disclaimer":"I consent to provide my contact data to Kaspersky and to receive advertising offers. I understand that I can withdraw consent at any time through email or via","kaspersky_web_privacy_policy":"www.kaspersky.com/web-privacy-policy","registration_form_sign_in":"Already registered","registration_form_register":"Register","last_name":"Last name","phone":"Phone number","number_of_pc":"Number of PCs in your company","state_province":"State/Province","invalid_email":"Invalid email","send_here_activation_code":"To receive an activation code","sign_in_modal_header":"Sign in","sing_in_with_registration_code":"Enter the registration code you received by email","registration_code":"Registration code","no_registration_code":"No registration code?","register":"Register","enter_registration_code_sign_in_button":"Sign in","registration_code_invalid":"The registration code is invalid","registration_code_invalid_for_edition":"The registration code doesn\'t fit your product\'s edition","registration_code_description":"Use the code for future registrations. We have also sent it to your email address.","thanks_for_registration":"Thank you for registering!","select":"Select","open":"Open","settings":"Settings","exit":"Exit","show_ids":"Show IDs","share_you_thoughts":"Share your thoughts about your user experience:","automatic_removal_in_premium":"Automatic removal of detected objects is available in Premium","additional_detection_with_premium":"Additional threats can be detected with","premium_technologies":"Premium Technologies:","premium_protection_components":"Premium Protection Components:","web_email_amsi_protection":"Web, email, AMSI protection","intrusion_prevention":"Intrusion prevention","upgrade_protection_title":"Upgrade protection","anti_ransomware_free_protection":"Anti-ransomware Free Protection","business_premium_protection":"Business Premium Protection","home_premium_protection":"Home Premium Protection","product_name":"Product name","kesc":"Endpoint Security Cloud","total_security":"Total Security","devices":"Devices","limited":"Limited","web_protection":"Web protection","email_protection":"Email protection","threats_removal":"Threat remediation","only_blocking":"Only blocking","blocking_and_removal":"Blocking and Removal","anti_ransomware_only":"Anti-ransomware only","all_types_of_threats":"All types of threats","management_console":"Management console","support":"Support","community":"Community","technical_support_service":"Technical support service","additional_features":"Additional features","endpoint_controls_encryption":"Encryption","vpn_password_manager":"VPN, Password Manager","installed":"Installed","buy_now":"Buy now","try_now":"Try now","limited_to_anti_ransomware":"Limited to anti-ransomware focused technologies","premium_trigger":"Get Premium","malware_report_page_title":"Malware detected on your machine","vulnerable_app_report_page_description_head":"Application vulnerabilities are the top entry point for ransomware","malware_report_page_description_footer_malware":"We highly recommend removing the detected malware manually or automatically using our Premium product.","malware_report_page_description_footer_statistics":"To scan other computer areas with more granular settings use our premium product.","scan":"Scan","malware_scan":"Malware Scan","scanning_may_take_several_minutes":"Scanning may take several minutes","empty_malware_list_placeholder":"There is no malware on your PC","tooltip_malware_was_blocked":"Malware was blocked","detected_object":"Detected object","malware_is_found_on_your_machine":"Malware detected on your machine","malware_is_found_on_your_machine_description":"We highly recommend removing the detected malware manually or automatically using our Premium product","objects_scanned_last_week":"Scanned objects","you_may_close_window_scanning_continue":"You can close this window. Scanning will continue in the background","malware_check_was_finished":"Malware Scan completed","you_may_learn_more":"Check the details","last_scan":"Last completed scan:","malware_detected":"Malware detected","next_scheduled_scan":"Next scheduled scan","never_scanned":"Never scanned","not_scheduled":"not scheduled","scan_in_progress":"in progress...","schedule_available_in_premium":"Scan schedule customization is available in Premium product","files_scanned_in":"Files scanned in","malware_scan_was_interrupted":"Interrupted","updating":"Updating","failed_ksn_object":"Not processed","statement_regrading_data_processing":"Statement regarding Data Processing","help_us_get_better":"Help us get better!","application_was_terminated_incorrectly":"The application terminated incorrectly. Please report the issue to Kaspersky Lab.","dump_report_includes_information":"This report includes information about your OS, product dump files and traces, if they were enabled.","you_can_inspect_collected_data":"You can inspect the collected data in the folder","send_dump_report":"Send","checkbox_send_dump_agr_confirmation":"I confirm that I have fully read, understand, and accept the terms and conditions of the","statement_data_processing_agreement":"Statement Regarding Data Processing","describe_the_issue":"Describe the issue occurred","rdp_agreement":"RDP agreement","malware_scan_stopped":"Malware Scan stopped","restart_task_manually":"Please check your internet connection and restart the task manually","more_about_win_10_support":"Read more about Microsoft Windows 10 Support","app_functionality_can_be_reduced":"In this version of Microsoft Windows the application functionality may be limited.","threat_detected":"Detected","threat_located":"Located","get_premium":"Get Premium","dashboard":"Dashboard","protection":"Protection","reinstall_app":"Reinstall Kaspersky Anti-Ransomware Tool","turn_protection_on":"Turn it on","last_finished_malware_scan":"Last finished Malware Scan","safe_objects":"Safe objects in the world","dangerous_objects":"Dangerous objects in the world","exclusions":"Exclusions","blocked_apps_machines":"Blocked Apps and Machines","back":"Back","anti_ransomware":"Anti-ransomware","ksn":"Kaspersky Security Network","behavior_detection":"Behavior Detection","remediation_engine":"Remediation Engine","file_threat_protection":"File Threat Protection","web_threats_protection":"Web Threat Protection","mail_threats_protection":"Mail Threat Protection","network_threats_protection":"Network Threat Protection","amsi_protection_provider":"AMSI Protection Provider","data_encryption":"Data Encryption","full_disk_encryption":"Full Disk Encryption","encryption_of_removable_drives":"Encryption of Removable Drives","security_controls":"Security Controls","application_control":"Application Control","device_control":"Device Control","web_control":"Web Control","adaptive_anomaly_control":"Adaptive Anomaly Control","anti_malware":"Anti-malware","send_email_report":"Send email report","configure_notifications_first":"Configure notifications first","go_to_report":"Go to report","ksn_description":"A cloud database that contains information about the reputation of files, web resources and software.","in_processing_objects":"Processing","kl_doesnt_receive_data":"Kaspersky doesn\'t receive any of this data. It is only used to generate and send reports to your system administrator","premium_malware_scan":"Premium Malware Scan:","granular_settings_of_scan":"Configurable granular settings for scan areas and objects","auto_removal_threats":"Automatic removal of detected threats","conf_scan_schedule":"Configurable scan schedule","yes":"Yes","activity_report":"Activity report","additional_threats_can_be_detected":"Additional threats can be detected with:","premium_technologies_item":"Premium Technologies","premium_protection_components_item":"Premium Protection Components","detected_objects_auto_removal":"Detected objects automatic removal","kart_performed_activities_to_protect":"Kaspersky Anti-Ransomware Tool performed the following activities to protect your computer.","detected_blocked":"Detected/Blocked","last_seven_days":"Last 7 days","last_thirty_days":"Last 30 days","real_time_protection":"Real-time protection","rolled_back_files":"Rolled back files","scanned":"Scanned","applications_processes":"Applications / Processes","file_objects":"File objects","activity_report_is_ready":"Activity report is ready","check_the":"Check the","improve_protection_with_premium":"Improve your protection with Premium","new_report":"New report","remind_later":"Remind later","go_to":"Go to","report":"report","is_everything_clear":"Is everything clear in this window?","no":"No","what_do_better":"What can we do better?","what_is_missing":"Tell us what is missing or confusing","send":"Send","tks_for_ur_feedback":"Thank you for your feedback!","agreements":"Agreements","new_version_is_available":"New version is available","please_install_manually":"Please install the version manually","install":"Install","find_out_how":"Find out how","old_version_uninstall_failed":"Uninstallation of the old version failed","please_uninstall_manually":"Please uninstall the old version manually","detection_statistics":"Detection statistics","manage_protection_all_devices":"Manage protection of all your devices with:","cloud_management_console":"Cloud-based management console","detailed_reports":"Granular reporting","pictorial_widgets":"Easy-to-read monitoring widgets","total_number":"Total number","save_your_changed_settings":"Do you want to save changes?","save_your_changed_settings_description":"Your changes to the application settings will be lost if you don\'t save them.","without_saving":"Don\'t save","kaspersky":"Kaspersky","item_moved_to_exclusions":"Item successfully moved to Exclusions","view":"View","unblock_exclusion_warning":"Make sure you unblock only apps and/or machines you trust!","exclusion_warning":"Only add machines and apps you trust!","move_to_trusted_title":"Are you sure you want to move this item to Exclusions?","move_to_trusted_description":"The item will not be blocked anymore","copied":"Copied","blocked_items":"Blocked items","we_notice_performance_issues":"We have noticed some performance issues with our product. Please send the report to Kaspersky.","etl_report_includes_information":"This report includes information about your OS and diagnostic data about OS events","copy":"Copy","to_exclusions":"To Exclusions","machines_with_detected_ip":"Only machines with detected IP addresses will be shown in the Blocked machines section","no_machines_for_displaying":"No machines for displaying.","exit_is_forbidden":"Exit is forbidden","product_update_in_progress":"Product\'s update in progress","rdp_etl_agreement":"Supplemental Statement on Data Processing","network_attacks":"Network attacks","silent_installation_failed":"Silent installation failed","download_install_manually":"Please, download and install Kaspersky Anti-Ransomware Tool manually","download":"Download","update_in_progress":"Product update in progress","welcome_to":"Welcome to","take_quick_tour":"Take a quick tour to discover key product features!\\nIt will take less than 2 minutes.","tip":"Tip","of":"of","protection_status":"Protection status","protection_status_on_description":"Your anti-ransomware protection is on.\\nYour protection status is displayed on the main screen.","protection_status_off_description":"Your anti-ransomware protection is off.\\nYour protection status is displayed on the main screen.","objects_to_detect":"Objects to detect","add_additional_layer_protection":"You can add an additional layer of protection now and change it later in Settings.","adware_other_cryptominers":"Adware and other threats (including crypto-miners)","detection_statistics_onboarding_description":"The product provides real-time protection against ransomware. The detailed information on detected objects is available in the Detection statistics.","email_reporting":"Email reporting","email_reporting_description":"Email reports let you get instant or regular notifications about the threats detected on your PC.","configure_email_reports":"Configure email reports","configure_email_reports_description":"You can also configure email reports to get instant or regular notifications on the protection status of this PC.","malware_scan_onboarding_description":"Scan the most infectable areas of your PC manually or automatically using Malware Scan. Scan runs once a week and blocks detected threats.","activity_report_onboarding_description":"View the list of activities performed to protect your PC in the Activity report section.","help_onboarding_description":"If you have any difficulties go to online help by pressing F1, Alt+F1 or clicking help icons","complete_tour":"Сomplete the tour","product_was_interrupted":"Product tour was interrupted","continue_tour":"Continue the tour now and discover key product features","to_product_tour":"To product tour","online_help":"Online help","product_tour":"Product tour","scan_runs_within_areas":"Scan runs within most infectable PC areas:","startup_users_windows":"Startup, Users and Windows","scan_in":"Scan in","completed":"completed","scanning_files_in":"Scanning files in","file_is_safe":"File is safe","file_name":"Full name","file_type":"Type","digital_signature":"Digital signature","file_size":"Size","file_path":"Location","file_is_danger":"Dangerous file was blocked","notifications_of_uploaded_files":"Notifications on the safety of downloaded files","notifications_of_uploaded_files_description":"Sends notifications on the results of checking .exe files in the Downloads folder.","complete_the_user_registration_form":"Complete the user registration form","failed_to_get_registration_form":"Failed to get the registration form","please_try_again_later":"Please try again later","clear":"Clear","processing_of_some_functions_disabled":"Processing of some OS functions is disabled","some_os_features_processing_disabled_description":"This limitation may be due to OS upgrade or third-party software installation. The limitation will be eliminated in the latest version of the app.","my_ids":"My IDs","what_is_new_description":"We have upgraded the previous product version:","by_schedule":"By schedule","send_report_by_schedule":"Sends reports at the specified time.","when_threat_detect":"When threat is detected","when_threat_detect_description":"Sends a report immediately when a threat is detected.","read_only_mode_in_settings":"The settings are password-protected. [%Enter the password%] to unlock.","read_only_mode_in_detection_statistic":"To clear detection statistics, [%enter the password%].","fast_startup_is_enabled":"Fast Startup is enabled","fast_startup_is_enabled_description":"If you turn off the computer, the update will not be applied. Restart the computer via the Start menu or by clicking the Restart button.","anti_ransomware_protection_is_active":"Anti-ransomware protection is active","anti_ransomware_protection_is_risk":"Anti-ransomware protection is at risk","anti_ransomware_protection_is_off":"Anti-ransomware protection is off","registration_complete":"Registration complete","use_code_for_future_registration":"Use the code for future registration. We have also sent it to your email address","express_course_against_scam":"Express course against social media scam","additional_information":"Additional information","free_lesson":"Free lesson","select_country_placeholder":"Select country","select_province_placeholder":"Select region/state","about":"About","course_title":"Register and get","course_title_registered":"Get free course","course_description":"Free online course on how to stay safe in social media world and never become a victim of an online scam.","course_description_registered":"After the registration is complete, you will get a free online course on how to stay safe in social media world and never become a victim of an online scam.","learn_more":"Learn More","free_lesson_title":"Protect your employees against social media cyberattacks","free_lesson_description":"This free online course will teach your employees all they need to know about safe social media behavior:","free_lesson_options":["Online life in social media ","Types of work-related information that must not be shared online","Social engineering in social media and messengers","How to understand if your account has been hacked"],"join_course":"Join the course for free and increase your employees’ resilience against cyberattacks!","protect_memory_description":"Protects system processes memory from reading by external processes (i.e., from external software storing user logins and passwords)","and_less":"and less","and_more":"and more","eol_product":"The application is out of date","eol_description":"Download and install a new available security software.","boost_protection":"Enhance protection","boost_protection_title":"Enhance your protection","boost_protection_description":"Upgrade Kaspersky Anti-Ransomware Tool to a trial version of Kaspersky Endpoint Security to get more comprehensive protection for your computer. The application will be installed and set up automatically.","what_will_you_get":"What will you get?","back_to_kart":"You can always switch back to Kaspersky Anti-Ransomware Tool without reinstalling the application.","boost_protection_list":["Protection of files, web and mail data against all types of threats","Full-fledged anti-virus scanning","Deletion and disinfection of active threats"],"free_period":"Free trial","protection_upgrade_header":"Protection Upgrade","protection_upgrade_description":"This wizard will seamlessly install and activate the trial version of Kaspersky Endpoint Security to provide more complete protection for your computer.","keep_following_mind":"Keep the following in mind:","keep_following_mind_list":["Make sure that you have an internet connection to activate the application.","During the upgrade process, your computer\'s protection will be temporarily disabled.","Ensure that there are no other software installations or updates running during installation of Kaspersky Endpoint Security."],"see_details":"See the Online Help for details","read_and_accept_eula":"Please read the following End User License Agreement carefully.","reboot":"Restart now","restart_later":"Restart later","successfully_installed_reboot":"You need to restart your computer to complete the installation of Kaspersky Endpoint Security and enable full protection for your computer.","start":"Start","something_wrong":"Your computer encountered a problem and needs to restart.","download_kes":"Download Kaspersky Endpoint Security","restore_kart":"Go to Kaspersky Anti-Ransomware Tool","license_error":"License error","license_error_description":"The trial version of Kaspersky Endpoint Security was previously activated on this device. Please buy the full version.","license_expired_first_title":"Your license has expired","license_expired_first_description":"The trial license for Kaspersky Endpoint Security has expired. Your computer may be at risk.","license_expired_second_title":"Your license has expired","license_expired_second_description":"The trial license for Kaspersky Endpoint Security has expired. Your computer may be at risk.","license_expired_third_title":"Your license has expired","license_expired_third_description":"The trial license for Kaspersky Endpoint Security has expired. Your computer may be at risk. You will be automatically switched to Kaspersky Anti-Ransomware Tool soon.","license_expired_fourth_title":"Enable protection","license_expired_fourth_description":"Your computer’s protection is disabled. You will be switched to Kaspersky Anti-Ransomware Tool to enable protection.","restore_kart_title":"Restore protection by Kaspersky Anti-Ransomware Tool?","restore_kart_description":"You uninstalled Kaspersky Endpoint Security and now your computer is not protected. We recommend to restore protection by Kaspersky Anti-Ransomware Tool.","restore_kart_by_shortcut_title":"Go back to Kaspersky Anti-Ransomware Tool?","restore_kart_by_shortcut_description":"You have the Kaspersky Endpoint Security application installed on your computer, which provides more complete protection. Do you want to switch back to the basic protection provided by Kaspersky Anti-Ransomware Tool?","go_back":"Go back","restore":"Restore protection","switch_free_version":"Switch to the free version now","buy_license":"Buy license","installation_complete":"Recovery completed","kaspersky_installed":"Kaspersky Anti-Ransomware Tool for Business has been successfully activated on your computer.","installation_in_progress":"Installation","restart_required":"Restart required","need_to_restart":"You need to restart your computer.","can_not_install_kes_title":"We cannot install Kaspersky Endpoint Security","can_not_install_kes_description":"We reverted KART back","kes_installation_failure_description":"We were unable to upgrade Kaspersky Anti-Ransomware Tool, possibly due to another installation process. Restart your computer to proceed with the upgrade.","upgrade_error":"Upgrade error","error_forward_no_protection_description":"We were unable to upgrade Kaspersky Anti-Ransomware Tool. Your computer may be at risk. Remove Kaspersky Anti-Ransomware Tool using the kavremover tool and then reinstall the application.","error_backward_no_protection_description":"We were unable to restore protection by Kaspersky Anti-Ransomware Tool. Your computer may be at risk. Remove the application using the kavremover tool and then reinstall it.","download_kav_remover":"Download the kavremover tool","kart_installation_failure_title":"Installation failed","kart_installation_failure_description":"You uninstalled Kaspersky Endpoint Security and now your computer is not protected. We recommend to restore protection by Kaspersky Anti-Ransomware Tool.","can_not_uninstall_kes_title":"Unable to uninstall","can_not_uninstall_kes_description":"We were unable to uninstall the trial version of Kaspersky Endpoint Security. Try to remove it manually.","uninstall_kes_manually":"Uninstall manually","migration_progress_status":"Please wait while the application is being installed. This may take a few minutes.","migration_reboot_required":"Restart required","restart_now":"Restart","activation_error":"Activation error","activation_error_description":"We are having trouble activating Kaspersky Endpoint Security. Please check your internet connection and try to activate the application manually. For details, see the Online Help.","open_help":"Online Help","pre_migration_online_help":"Online Help.","pre_migration_upgrade_error":"Upgrade error","pre_migration_upgrade_error_description":"Your computer does not meet all the requirements to perform the upgrade. For details, see the","no_thanks":"No, thanks","block_os_restart_title":"Upgrade is in progress...","block_os_restart_description":"Please do not restart or turn off your computer."}'),featuresList:JSON.parse('{"featuresList":[{"name":"The scanning functionality and the application performance have been improved"},{"name":"Bugs have been fixed, and the application usability has been improved"},{"name":"Updated information on the specific data that you provide to Kaspersky while using the application","description":"For details, see [%Data provision under the Supplemental Agreement%].","link":{"type":"interceptor","options":{"linkName":"data_provision"}}}]}')}},o=({localization:e,edition:t,rebrandingCode:i=r.ZD})=>{const o=[r.ZD,r.kf].includes(i)?r.ZD:`-${s.Z[i]}`,a=`${e}-${t.toLowerCase()}${o}`,c=`${e}-${t.toLowerCase()}`;return n[a]?n[a]:(console.error(`Error! Fallback resources are used: ${c}`),n[c])}},19662:(e,t,i)=>{var r=i(17854),s=i(60614),n=i(66330),o=r.TypeError;e.exports=function(e){if(s(e))return e;throw o(n(e)+" is not a function")}},19670:(e,t,i)=>{var r=i(17854),s=i(70111),n=r.String,o=r.TypeError;e.exports=function(e){if(s(e))return e;throw o(n(e)+" is not an object")}},41318:(e,t,i)=>{var r=i(45656),s=i(51400),n=i(26244),o=function(e){return function(t,i,o){var a,c=r(t),l=n(c),d=s(o,l);if(e&&i!=i){for(;l>d;)if((a=c[d++])!=a)return!0}else for(;l>d;d++)if((e||d in c)&&c[d]===i)return e||d||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},84326:(e,t,i)=>{var r=i(1702),s=r({}.toString),n=r("".slice);e.exports=function(e){return n(s(e),8,-1)}},70648:(e,t,i)=>{var r=i(17854),s=i(51694),n=i(60614),o=i(84326),a=i(5112)("toStringTag"),c=r.Object,l="Arguments"==o(function(){return arguments}());e.exports=s?o:function(e){var t,i,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=c(e),a))?i:l?o(t):"Object"==(r=o(t))&&n(t.callee)?"Arguments":r}},99920:(e,t,i)=>{var r=i(92597),s=i(53887),n=i(31236),o=i(3070);e.exports=function(e,t,i){for(var a=s(t),c=o.f,l=n.f,d=0;d<a.length;d++){var u=a[d];r(e,u)||i&&r(i,u)||c(e,u,l(t,u))}}},68880:(e,t,i)=>{var r=i(19781),s=i(3070),n=i(79114);e.exports=r?function(e,t,i){return s.f(e,t,n(1,i))}:function(e,t,i){return e[t]=i,e}},79114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},19781:(e,t,i)=>{var r=i(47293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},80317:(e,t,i)=>{var r=i(17854),s=i(70111),n=r.document,o=s(n)&&s(n.createElement);e.exports=function(e){return o?n.createElement(e):{}}},88113:(e,t,i)=>{var r=i(35005);e.exports=r("navigator","userAgent")||""},7392:(e,t,i)=>{var r,s,n=i(17854),o=i(88113),a=n.process,c=n.Deno,l=a&&a.versions||c&&c.version,d=l&&l.v8;d&&(s=(r=d.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!s&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(s=+r[1]),e.exports=s},80748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},82109:(e,t,i)=>{var r=i(17854),s=i(31236).f,n=i(68880),o=i(31320),a=i(83505),c=i(99920),l=i(54705);e.exports=function(e,t){var i,d,u,h,p,g=e.target,v=e.global,m=e.stat;if(i=v?r:m?r[g]||a(g,{}):(r[g]||{}).prototype)for(d in t){if(h=t[d],u=e.noTargetGet?(p=s(i,d))&&p.value:i[d],!l(v?d:g+(m?".":"#")+d,e.forced)&&void 0!==u){if(typeof h==typeof u)continue;c(h,u)}(e.sham||u&&u.sham)&&n(h,"sham",!0),o(i,d,h,e)}}},47293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},34374:(e,t,i)=>{var r=i(47293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},46916:(e,t,i)=>{var r=i(34374),s=Function.prototype.call;e.exports=r?s.bind(s):function(){return s.apply(s,arguments)}},76530:(e,t,i)=>{var r=i(19781),s=i(92597),n=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=s(n,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&o(n,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},1702:(e,t,i)=>{var r=i(34374),s=Function.prototype,n=s.bind,o=s.call,a=r&&n.bind(o,o);e.exports=r?function(e){return e&&a(e)}:function(e){return e&&function(){return o.apply(e,arguments)}}},35005:(e,t,i)=>{var r=i(17854),s=i(60614);e.exports=function(e,t){return arguments.length<2?(i=r[e],s(i)?i:void 0):r[e]&&r[e][t];var i}},58173:(e,t,i)=>{var r=i(19662);e.exports=function(e,t){var i=e[t];return null==i?void 0:r(i)}},10647:(e,t,i)=>{var r=i(1702),s=i(47908),n=Math.floor,o=r("".charAt),a=r("".replace),c=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,i,r,u,h){var p=i+e.length,g=r.length,v=d;return void 0!==u&&(u=s(u),v=l),a(h,v,(function(s,a){var l;switch(o(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,i);case"'":return c(t,p);case"<":l=u[c(a,1,-1)];break;default:var d=+a;if(0===d)return s;if(d>g){var h=n(d/10);return 0===h?s:h<=g?void 0===r[h-1]?o(a,1):r[h-1]+o(a,1):s}l=r[d-1]}return void 0===l?"":l}))}},17854:(e,t,i)=>{var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof i.g&&i.g)||function(){return this}()||Function("return this")()},92597:(e,t,i)=>{var r=i(1702),s=i(47908),n=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return n(s(e),t)}},3501:e=>{e.exports={}},64664:(e,t,i)=>{var r=i(19781),s=i(47293),n=i(80317);e.exports=!r&&!s((function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},68361:(e,t,i)=>{var r=i(17854),s=i(1702),n=i(47293),o=i(84326),a=r.Object,c=s("".split);e.exports=n((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?c(e,""):a(e)}:a},42788:(e,t,i)=>{var r=i(1702),s=i(60614),n=i(5465),o=r(Function.toString);s(n.inspectSource)||(n.inspectSource=function(e){return o(e)}),e.exports=n.inspectSource},29909:(e,t,i)=>{var r,s,n,o=i(68536),a=i(17854),c=i(1702),l=i(70111),d=i(68880),u=i(92597),h=i(5465),p=i(6200),g=i(3501),v="Object already initialized",m=a.TypeError,S=a.WeakMap;if(o||h.state){var _=h.state||(h.state=new S),f=c(_.get),w=c(_.has),b=c(_.set);r=function(e,t){if(w(_,e))throw new m(v);return t.facade=e,b(_,e,t),t},s=function(e){return f(_,e)||{}},n=function(e){return w(_,e)}}else{var y=p("state");g[y]=!0,r=function(e,t){if(u(e,y))throw new m(v);return t.facade=e,d(e,y,t),t},s=function(e){return u(e,y)?e[y]:{}},n=function(e){return u(e,y)}}e.exports={set:r,get:s,has:n,enforce:function(e){return n(e)?s(e):r(e,{})},getterFor:function(e){return function(t){var i;if(!l(t)||(i=s(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return i}}}},60614:e=>{e.exports=function(e){return"function"==typeof e}},54705:(e,t,i)=>{var r=i(47293),s=i(60614),n=/#|\.prototype\./,o=function(e,t){var i=c[a(e)];return i==d||i!=l&&(s(t)?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(n,".").toLowerCase()},c=o.data={},l=o.NATIVE="N",d=o.POLYFILL="P";e.exports=o},70111:(e,t,i)=>{var r=i(60614);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},31913:e=>{e.exports=!1},47850:(e,t,i)=>{var r=i(70111),s=i(84326),n=i(5112)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==s(e))}},52190:(e,t,i)=>{var r=i(17854),s=i(35005),n=i(60614),o=i(47976),a=i(43307),c=r.Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=s("Symbol");return n(t)&&o(t.prototype,c(e))}},26244:(e,t,i)=>{var r=i(17466);e.exports=function(e){return r(e.length)}},30133:(e,t,i)=>{var r=i(7392),s=i(47293);e.exports=!!Object.getOwnPropertySymbols&&!s((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},68536:(e,t,i)=>{var r=i(17854),s=i(60614),n=i(42788),o=r.WeakMap;e.exports=s(o)&&/native code/.test(n(o))},3070:(e,t,i)=>{var r=i(17854),s=i(19781),n=i(64664),o=i(3353),a=i(19670),c=i(34948),l=r.TypeError,d=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",g="writable";t.f=s?o?function(e,t,i){if(a(e),t=c(t),a(i),"function"==typeof e&&"prototype"===t&&"value"in i&&g in i&&!i[g]){var r=u(e,t);r&&r[g]&&(e[t]=i.value,i={configurable:p in i?i[p]:r[p],enumerable:h in i?i[h]:r[h],writable:!1})}return d(e,t,i)}:d:function(e,t,i){if(a(e),t=c(t),a(i),n)try{return d(e,t,i)}catch(e){}if("get"in i||"set"in i)throw l("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},31236:(e,t,i)=>{var r=i(19781),s=i(46916),n=i(55296),o=i(79114),a=i(45656),c=i(34948),l=i(92597),d=i(64664),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=a(e),t=c(t),d)try{return u(e,t)}catch(e){}if(l(e,t))return o(!s(n.f,e,t),e[t])}},8006:(e,t,i)=>{var r=i(16324),s=i(80748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,s)}},25181:(e,t)=>{t.f=Object.getOwnPropertySymbols},47976:(e,t,i)=>{var r=i(1702);e.exports=r({}.isPrototypeOf)},16324:(e,t,i)=>{var r=i(1702),s=i(92597),n=i(45656),o=i(41318).indexOf,a=i(3501),c=r([].push);e.exports=function(e,t){var i,r=n(e),l=0,d=[];for(i in r)!s(a,i)&&s(r,i)&&c(d,i);for(;t.length>l;)s(r,i=t[l++])&&(~o(d,i)||c(d,i));return d}},55296:(e,t)=>{"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,s=r&&!i.call({1:2},1);t.f=s?function(e){var t=r(this,e);return!!t&&t.enumerable}:i},92140:(e,t,i)=>{var r=i(17854),s=i(46916),n=i(60614),o=i(70111),a=r.TypeError;e.exports=function(e,t){var i,r;if("string"===t&&n(i=e.toString)&&!o(r=s(i,e)))return r;if(n(i=e.valueOf)&&!o(r=s(i,e)))return r;if("string"!==t&&n(i=e.toString)&&!o(r=s(i,e)))return r;throw a("Can't convert object to primitive value")}},53887:(e,t,i)=>{var r=i(35005),s=i(1702),n=i(8006),o=i(25181),a=i(19670),c=s([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=n.f(a(e)),i=o.f;return i?c(t,i(e)):t}},31320:(e,t,i)=>{var r=i(17854),s=i(60614),n=i(92597),o=i(68880),a=i(83505),c=i(42788),l=i(29909),d=i(76530).CONFIGURABLE,u=l.get,h=l.enforce,p=String(String).split("String");(e.exports=function(e,t,i,c){var l,u=!!c&&!!c.unsafe,g=!!c&&!!c.enumerable,v=!!c&&!!c.noTargetGet,m=c&&void 0!==c.name?c.name:t;s(i)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!n(i,"name")||d&&i.name!==m)&&o(i,"name",m),(l=h(i)).source||(l.source=p.join("string"==typeof m?m:""))),e!==r?(u?!v&&e[t]&&(g=!0):delete e[t],g?e[t]=i:o(e,t,i)):g?e[t]=i:a(t,i)})(Function.prototype,"toString",(function(){return s(this)&&u(this).source||c(this)}))},67066:(e,t,i)=>{"use strict";var r=i(19670);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},84488:(e,t,i)=>{var r=i(17854).TypeError;e.exports=function(e){if(null==e)throw r("Can't call method on "+e);return e}},83505:(e,t,i)=>{var r=i(17854),s=Object.defineProperty;e.exports=function(e,t){try{s(r,e,{value:t,configurable:!0,writable:!0})}catch(i){r[e]=t}return t}},6200:(e,t,i)=>{var r=i(72309),s=i(69711),n=r("keys");e.exports=function(e){return n[e]||(n[e]=s(e))}},5465:(e,t,i)=>{var r=i(17854),s=i(83505),n="__core-js_shared__",o=r[n]||s(n,{});e.exports=o},72309:(e,t,i)=>{var r=i(31913),s=i(5465);(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.0",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.0/LICENSE",source:"https://github.com/zloirock/core-js"})},51400:(e,t,i)=>{var r=i(19303),s=Math.max,n=Math.min;e.exports=function(e,t){var i=r(e);return i<0?s(i+t,0):n(i,t)}},45656:(e,t,i)=>{var r=i(68361),s=i(84488);e.exports=function(e){return r(s(e))}},19303:e=>{var t=Math.ceil,i=Math.floor;e.exports=function(e){var r=+e;return r!=r||0===r?0:(r>0?i:t)(r)}},17466:(e,t,i)=>{var r=i(19303),s=Math.min;e.exports=function(e){return e>0?s(r(e),9007199254740991):0}},47908:(e,t,i)=>{var r=i(17854),s=i(84488),n=r.Object;e.exports=function(e){return n(s(e))}},57593:(e,t,i)=>{var r=i(17854),s=i(46916),n=i(70111),o=i(52190),a=i(58173),c=i(92140),l=i(5112),d=r.TypeError,u=l("toPrimitive");e.exports=function(e,t){if(!n(e)||o(e))return e;var i,r=a(e,u);if(r){if(void 0===t&&(t="default"),i=s(r,e,t),!n(i)||o(i))return i;throw d("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},34948:(e,t,i)=>{var r=i(57593),s=i(52190);e.exports=function(e){var t=r(e,"string");return s(t)?t:t+""}},51694:(e,t,i)=>{var r={};r[i(5112)("toStringTag")]="z",e.exports="[object z]"===String(r)},41340:(e,t,i)=>{var r=i(17854),s=i(70648),n=r.String;e.exports=function(e){if("Symbol"===s(e))throw TypeError("Cannot convert a Symbol value to a string");return n(e)}},66330:(e,t,i)=>{var r=i(17854).String;e.exports=function(e){try{return r(e)}catch(e){return"Object"}}},69711:(e,t,i)=>{var r=i(1702),s=0,n=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++s+n,36)}},43307:(e,t,i)=>{var r=i(30133);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(e,t,i)=>{var r=i(19781),s=i(47293);e.exports=r&&s((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},5112:(e,t,i)=>{var r=i(17854),s=i(72309),n=i(92597),o=i(69711),a=i(30133),c=i(43307),l=s("wks"),d=r.Symbol,u=d&&d.for,h=c?d:d&&d.withoutSetter||o;e.exports=function(e){if(!n(l,e)||!a&&"string"!=typeof l[e]){var t="Symbol."+e;a&&n(d,e)?l[e]=d[e]:l[e]=c&&u?u(t):h(t)}return l[e]}},68757:(e,t,i)=>{"use strict";var r=i(82109),s=i(17854),n=i(46916),o=i(1702),a=i(84488),c=i(60614),l=i(47850),d=i(41340),u=i(58173),h=i(67066),p=i(10647),g=i(5112),v=i(31913),m=g("replace"),S=RegExp.prototype,_=s.TypeError,f=o(h),w=o("".indexOf),b=o("".replace),y=o("".slice),k=Math.max,T=function(e,t,i){return i>e.length?-1:""===t?i:w(e,t,i)};r({target:"String",proto:!0},{replaceAll:function(e,t){var i,r,s,o,h,g,C,P,R,I=a(this),E=0,M=0,A="";if(null!=e){if((i=l(e))&&(r=d(a("flags"in S?e.flags:f(e))),!~w(r,"g")))throw _("`.replaceAll` does not allow non-global regexes");if(s=u(e,m))return n(s,e,I,t);if(v&&i)return b(d(I),e,t)}for(o=d(I),h=d(e),(g=c(t))||(t=d(t)),C=h.length,P=k(1,C),E=T(o,h,0);-1!==E;)R=g?d(t(h,E,o)):p(h,o,E,[],void 0,t),A+=y(o,M,E)+R,M=E+C,E=T(o,h,E+P);return M<o.length&&(A+=y(o,M)),A}})},27207:(e,t,i)=>{i(68757)},64296:(e,t,i)=>{"use strict";var r=i(95318);t.BaseBL=void 0;var s=r(i(34575)),n=r(i(93913)),o=r(i(1612)),a=function(){function e(t,i,r,n,a){(0,s.default)(this,e),this.logicsClasses=n,this.serviceRegistry=new o.default(t,new i,r,a)}return(0,n.default)(e,[{key:"get",value:function(e){if("string"!=typeof e)throw new TypeError("`logicName` must be a string");if(!e.length)throw new Error("`logicName` length must be > 0");var t=e[0].toLowerCase()+e.slice(1),i=e[0].toUpperCase()+e.slice(1);if(!this.logicsClasses[i])throw new Error("There is no Logic Class for ".concat(e," in BL"));return this[t]||(this[t]=new this.logicsClasses[i](this.serviceRegistry)),this[t]}},{key:"execute",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.get(e);if(r&&r[t]&&"function"==typeof r[t]){var s=r[t].apply(r,i);return void 0===s&&(s="Void method: ".concat(e,".").concat(t)),s}throw new Error("BL: execute error: there are no such Logic (".concat(e,") or Method (").concat(t,")"))}}]),e}();t.BaseBL=a},8853:(e,t,i)=>{"use strict";var r=i(95318);t.default=void 0;var s=r(i(34575)),n=r(i(93913)),o=function(){function e(t,i,r){(0,s.default)(this,e),this.clipboard=t.clipboard,this.trace=r.get("traceService")}return(0,n.default)(e,[{key:"copyToClipboard",value:function(e){return this.trace.info("ClipboardService: copyToClipboard called with text: ".concat(e)),this.clipboard.writeText(e)}}]),e}();t.default=o},43147:(e,t,i)=>{"use strict";var r=i(95318);t.default=void 0;var s=r(i(34575)),n=r(i(93913)),o=function(){function e(t,i,r){(0,s.default)(this,e),this.dumpHelper=i.getDumpHelper(),this.trace=r.get("traceService")}return(0,n.default)(e,[{key:"writeDump",value:function(){this.trace.info("DumpService: writeDump: call dumpHelper.writeFullDump()");var e=this.dumpHelper.writeFullDump();return this.trace.info("DumpService: writeDump: dumpHelper.writeFullDump() completed"),0!==e?this.trace.error("DumpService: writeDump: dumpHelper.writeFullDump returned result: ".concat(e,"!")):this.trace.info("DumpService: writeDump: dumpHelper.writeFullDump called successfully, return result 0"),e}},{key:"writeDumpWithInfo",value:function(e){this.trace.info("DumpService: writeDumpWithInfo called");var t=this.dumpHelper.writeFullDumpWithInfo(e);0!==t?this.trace.error("DumpService: writeDumpWithInfo: writeFullDumpWithInfo result: ".concat(t,"!")):this.trace.info("DumpService: writeDumpWithInfo: writeFullDumpWithInfo called successfully")}}]),e}();t.default=o},22271:(e,t,i)=>{"use strict";var r=i(95318);t.default=void 0;var s=r(i(34575)),n=r(i(93913)),o=function(){function e(t,i,r,n){(0,s.default)(this,e);var o=t.dialog;this.dialog=o,this.fs=n.fs,this.trace=r.get("TraceService")}return(0,n.default)(e,[{key:"openFilePath",value:function(){this.trace.info("FileService: openFilePath called");var e=this.dialog.showOpenDialog({properties:["openFile"]});return!(!e||!e.length)&&e[0]}},{key:"readTextFile",value:function(e){var t=void 0;try{t=this.fs.readFileSync(e,"utf8")}catch(t){this.trace.info("FileService: Error in readTextFile with path ".concat(e,". Error: ").concat(t))}return t}},{key:"readJSON",value:function(e){var t=this.readTextFile(e);if(void 0!==t)try{return JSON.parse(t)}catch(e){return void this.trace.info("FileService: readJSON: Error while parsing JSON: ".concat(e,". Passed JSON string: ").concat(t))}}},{key:"fileExists",value:function(e){return this.trace.info("FileService: fileExists called with path: ".concat(e)),this.fs.existsSync(e)}},{key:"createFile",value:function(e,t,i){var r=this;this.trace.info("FileService: createFile was called with parameters: ".concat(e,", ").concat(t,", ").concat(i)),this.fs.writeFile(e,t,i,(function(e){r.trace.info("FileService: writeFile callback was called with parameters: ".concat(e))}))}}]),e}();t.default=o},71893:(e,t,i)=>{"use strict";var r=i(95318);t.default=void 0;var s=r(i(34575)),n=r(i(93913)),o=function(){function e(t,i,r){(0,s.default)(this,e),this.shutdownController=i.getShutdownController(),this.app=t.app,this.trace=r.get("traceService")}return(0,n.default)(e,[{key:"shutdown",value:function(){this.trace.info("ShutdownService: shutdown called");var e=this.shutdownController.shutdown();0!==e?this.trace.error("ShutdownService: shutdown: shutdown result: ".concat(e,"!")):this.trace.info("ShutdownService: shutdown: shutdown called successfully")}},{key:"shutdownUI",value:function(){this.trace.info("ShutdownService: shutdownUI called"),this.app.exit()}},{key:"rebootOs",value:function(){this.trace.info("ShutdownService: rebootOs called"),this.shutdownController.rebootSystem()}}]),e}();t.default=o},66624:(e,t,i)=>{"use strict";var r=i(95318);t.default=void 0;var s=r(i(34575)),n=r(i(93913)),o=function(){function e(t,i){(0,s.default)(this,e),this.traceHelper=i.getTraceHelper(),this.traceController=i.getTraceController(),this.levels=i.constants.levels}return(0,n.default)(e,[{key:"switchTraces",value:function(e){switch(this.info("TraceService: switchTraces called with mode: ".concat(e)),e){case!0:var t=this.traceController.turnOnTraces();0!==t?this.error("TraceService: switchTraces: turnOnTraces result: ".concat(t,"!")):this.info("TraceService: switchTraces: turnOnTraces called successfully");break;case!1:var i=this.traceController.turnOffTraces();0!==i?this.error("TraceService: switchTraces: turnOffTraces result: ".concat(i,"!")):this.info("TraceService: switchTraces: turnOffTraces called successfully");break;default:console.error("TraceService: Неправильный аргумент функции switchTraces")}}},{key:"setTraceLevel",value:function(e){this.info("TraceService: setTraceLevel called with traceLevel: ".concat(e)),this.traceController.setTraceLevel(e)}},{key:"getTraceState",value:function(){this.info("TraceService: getTraceState called");var e={},t={},i=this.traceController.getTraceState(e,t);return 0!==i?(this.error("TraceService: getTraceState: getTraceState result: ".concat(i,"!")),{enabled:void 0,level:void 0}):(this.info("TraceService: getTraceState: getTraceState called successfully"),{enabled:e.value,level:t.value})}},{key:"trace",value:function(e,t){e="GUIP\t".concat(e),this.traceHelper.trace(e,t)}},{key:"info",value:function(e){this.trace(e,this.levels.TLINF)}},{key:"warning",value:function(e){this.traceHelper.trace(e,this.levels.TLWRN)}},{key:"error",value:function(e){this.traceHelper.trace(e,this.levels.TLERR)}}]),e}();t.default=o},81053:(e,t,i)=>{"use strict";var r=i(95318);t.default=void 0;var s=r(i(34575)),n=r(i(93913)),o=function(){function e(t,i,r){(0,s.default)(this,e),this.Tray=t.Tray,this.Menu=t.Menu,this.app=t.app,this.clipboard=t.clipboard,this.trace=r.get("TraceService")}return(0,n.default)(e,[{key:"create",value:function(e,t,i){this.trace.info("TrayService: create called"),this.tray=new this.Tray(i),this.contextMenu=this.Menu.buildFromTemplate(e),this.tray.setToolTip(t),this.tray.setContextMenu(this.contextMenu)}},{key:"destroy",value:function(){this.trace.info("TrayService: destroy was called"),this.tray.destroy()}}]),e}();t.default=o},72728:(e,t,i)=>{"use strict";var r=i(95318);t.default=void 0;var s=r(i(34575)),n=r(i(93913)),o=function(){function e(t,i,r){var n=this;(0,s.default)(this,e),this.api=i.getUiRegistrator(),this.electron=t,this.trace=r.get("traceService"),this.windowsInteraction=i.getWindowsInteraction(),this.subscribers={},this.callbackObject={showWindow:function(e){return n.subscribers.showWindow&&"function"==typeof n.subscribers.showWindow?(n.trace.info("UiControllerService: showWindow called with showType: ".concat(e)),n.subscribers.showWindow(e)):n.trace.warning("UiControllerService: showWindow is not switched"),0},refreshTraceSettings:function(){return n.subscribers.refreshTraceSettings&&"function"==typeof n.subscribers.refreshTraceSettings?(n.trace.info("UiControllerService: refreshTraceSettings called"),n.subscribers.refreshTraceSettings()):n.trace.warning("UiControllerService: refreshTraceSettings is not switched"),0},shutdown:function(){return n.subscribers.shutdown&&"function"==typeof n.subscribers.shutdown?(n.trace.info("UiControllerService: shutdown called"),n.subscribers.shutdown()):n.trace.warning("UiControllerService: shutdown is not switched"),0},createDump:function(){return n.subscribers.createDump&&"function"==typeof n.subscribers.createDump?(n.trace.info("Call UiRegistrationService.subscribers.createDump()"),n.subscribers.createDump(),n.trace.info("UiRegistrationService.subscribers.createDump() called")):n.trace.warning("UiRegistrationService: createDump is not switched"),n.trace.info("UiRegistration: callbackObject.createDump return result 0"),0},resolveProxyRequest:function(e){return n.subscribers.resolveProxyRequest&&"function"==typeof n.subscribers.resolveProxyRequest?(n.trace.info("UiControllerService: resolveProxyRequest called"),n.subscribers.resolveProxyRequest(e)):n.trace.warning("UiControllerService: resolveProxyRequest is not switched"),0},resolveBalloon:function(e,t){return n.subscribers.resolveBalloon&&"function"==typeof n.subscribers.resolveBalloon?(n.trace.info("UiControllerService: resolveBalloon called with id: ".concat(e)),n.subscribers.resolveBalloon(e,t)):n.trace.warning("UiControllerService: resolveBalloon is not switched"),0},showPanel:function(e){return n.subscribers.showPanel&&"function"==typeof n.subscribers.showPanel?(n.trace.info("UiControllerService: showPanel called with parameter: ".concat(e)),n.subscribers.showPanel(e)):n.trace.warning("UiControllerService: showPanel is not switched"),0},showProtectionState:function(e){return n.subscribers.showProtectionState&&"function"==typeof n.subscribers.showProtectionState?(n.trace.info("UiControllerService: showProtectionState called with isEnabled: ".concat(e)),n.subscribers.showProtectionState(e)):n.trace.warning("UiControllerService: showProtectionState is not switched"),0},refreshIconCache:function(){return n.subscribers.refreshIconCache&&"function"==typeof n.subscribers.refreshIconCache?(n.trace.info("UiControllerService: refreshIconCache was called"),n.subscribers.refreshIconCache()):n.trace.warning("UiControllerService: refreshIconCache is not switched"),0}}}return(0,n.default)(e,[{key:"registerUi",value:function(e){this.trace.info("UiControllerService: registerUi called with pid: ".concat(e));try{var t=this.api.registerUi(e,this.callbackObject);0!==t?(this.trace.error("UiControllerService: registerUi: registerUi result: ".concat(t,"! Quit app!")),this.electron.app.quit()):this.trace.info("UiControllerService: registerUi: registerUi successfully called!")}catch(e){this.trace.error("registerUi: catch error ".concat(e,"! Quit app!")),this.electron.app.quit()}}},{key:"setShowWindow",value:function(e){this.trace.info("UiControllerService: setShowWindow called"),this.subscribers.showWindow=e}},{key:"setRefreshTraceSettings",value:function(e){this.trace.info("UiControllerService: setRefreshTraceSettings called"),this.subscribers.refreshTraceSettings=e}},{key:"setShutdown",value:function(e){this.trace.info("UiControllerService: setShutdown called"),this.subscribers.shutdown=e}},{key:"setCreateDump",value:function(e){this.trace.info("UiControllerService: setCreateDump called"),this.subscribers.createDump=e}},{key:"setResolveProxyRequest",value:function(e){this.trace.info("UiControllerService: setResolveProxyRequest called"),this.subscribers.resolveProxyRequest=e}},{key:"setResolveBalloon",value:function(e){this.trace.info("UiControllerService: setResolveBalloon called"),this.subscribers.resolveBalloon=e}},{key:"setShowPanel",value:function(e){this.trace.info("UiControllerService: setShowPanel called"),this.subscribers.showPanel=e}},{key:"setShowProtectionState",value:function(e){this.trace.info("UiControllerService: setShowProtectionState called"),this.subscribers.showProtectionState=e}},{key:"getPid",value:function(){return this.trace.info("UiControllerService: getPid called"),process&&process.pid?process.pid:1}},{key:"setRefreshIconCache",value:function(){var e=this;this.trace.info("UiControllerService: setRefreshIconCache called"),this.subscribers.refreshIconCache=function(){e.trace.info("UiControllerService: refreshIconCache callback was called"),e.windowsInteraction.refreshIconCache()}}}]),e}();t.default=o},12416:(e,t,i)=>{"use strict";var r=i(95318);t.default=void 0;var s=r(i(34575)),n=r(i(93913)),o=function(){function e(t,i,r){(0,s.default)(this,e),this.api=i.getUpdateController(),this.trace=r.get("TraceService")}return(0,n.default)(e,[{key:"getProductHotfix",value:function(){this.trace.info("UpdateService: getProductHotfix was called");var e={},t=this.api.getProductHotfix(e);if(0===t)return this.trace.info("UpdateService: getProductHotfix: getProductHotfix was called successfully"),e.value;this.trace.error("UpdateService: getProductHotfix: getProductHotfix result: ".concat(t,"!"))}}]),e}();t.default=o},64856:(e,t,i)=>{"use strict";var r=i(95318);t.default=void 0;var s=r(i(34575)),n=r(i(93913)),o=function(){function e(t,i,r){(0,s.default)(this,e),this.BrowserWindow=t.BrowserWindow,this.electron=t,this.app=t.app,this.trace=r.get("traceService"),this.mainWindow=null}return(0,n.default)(e,[{key:"getMainWindow",value:function(){return this.trace.info("WindowService: getMainWindow called"),this.mainWindow}},{key:"hideMainWindow",value:function(){this.trace.info("WindowService: hideMainWindow called"),this.getMainWindow().hide()}},{key:"closeMainWindow",value:function(){this.trace.info("WindowService: closeMainWindow called"),this.getMainWindow().close()}},{key:"minimizeMainWindow",value:function(){this.trace.info("WindowService: minimizeMainWindow called"),this.getMainWindow().minimize()}},{key:"showMainWindow",value:function(){if(this.trace.info("WindowService: showMainWindow called"),this.getMainWindow())this.trace.info("WindowService: Main window is not closed. Just show it."),this.getMainWindow().show();else{this.trace.info("WindowService: Main window is closed. Create main window.");var e=this.createMainWindow();e.once("ready-to-show",(function(){e.show()}))}}},{key:"focusMainWindow",value:function(){this.trace.info("WindowService: focusMainWindow called"),this.getMainWindow().focus()}},{key:"createBalloon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:220;this.trace.info("WindowService: createBalloon called");var i=t,r=this.electron.screen.getPrimaryDisplay(),s=r.workAreaSize.width,n=r.workAreaSize.height,o=new this.BrowserWindow({width:352,height:i,skipTaskbar:!0,show:!1,frame:!1,resizable:!1,useContentSize:!0,x:s-352-25,y:n-i-25,alwaysOnTop:!0,nodeIntegration:!1,sandbox:!0}),a="file://".concat(this.app.getAppPath(),"/balloons/").concat(e);return o.on("closed",(function(){o=null})),o.loadURLWithPath=function(){o.loadURL(a)},o}},{key:"createMainWindow",value:function(){var e=this;this.trace.info("WindowService: createMainWindow called");var t=new this.BrowserWindow({width:735,height:540,frame:!1,resizable:!1,show:!1,alwaysOnTop:!0,nodeIntegration:!1,sandbox:!0});this.mainWindow=t,t.on("show",(function(){setTimeout((function(){t&&t.setAlwaysOnTop(!1)}),500)}));var i="file://".concat(this.app.getAppPath(),"/index.html");return t.loadURL(i),t.on("closed",(function(){t=null,e.mainWindow=null})),t}}]),e}();t.default=o},1612:(e,t,i)=>{"use strict";var r=i(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(i(34575)),n=r(i(93913)),o=function(){function e(t,i,r,n){(0,s.default)(this,e),this.electron=t,this.kasapi=i,this.servicesClasses=n,this.nodeModules=r}return(0,n.default)(e,[{key:"get",value:function(e){if("string"!=typeof e)throw new TypeError("`serviceName` must be a string");if(!e.length)throw new Error("`serviceName` length must be > 0");if("electron"===e)return this.electron;var t=e[0].toLowerCase()+e.slice(1),i=e[0].toUpperCase()+e.slice(1);if(!this.servicesClasses[i])throw new Error("There is no Service Class for ".concat(e," in service registry"));return this[t]||(this[t]=new this.servicesClasses[i](this.electron,this.kasapi,this,this.nodeModules)),this[t]}}]),e}();t.default=o},57729:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ZERO_VALUE=t.DEFAULT_ONE_VALUE=t.DEFAULT_EMPTY_STRING_VALUE=void 0,t.DEFAULT_ONE_VALUE=1,t.DEFAULT_ZERO_VALUE=0,t.DEFAULT_EMPTY_STRING_VALUE=""},40529:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(25158);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var s=i(59972);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},25158:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeParseJson=t.safeJsonStringify=void 0;var r=i(57729);t.safeParseJson=function(e,t){try{return JSON.parse(e)}catch(i){return void(t&&t.error("Parsing json error in safeParseJson, json: ".concat(e)))}},t.safeJsonStringify=function(e,t){try{return JSON.stringify(e)||r.DEFAULT_EMPTY_STRING_VALUE}catch(e){return t&&t.error("Error: safeJsonStringify: ".concat(e)),r.DEFAULT_EMPTY_STRING_VALUE}}},59972:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTargetInputInteractedElement=t.getPsTargetClickedElement=t.getFuTargetClickedElement=void 0;var i=function(e){return["text","number","password","textarea"].includes(e)},r=function(e){var t=e.target,r=e.attributeName;return i(t.type)?null:t.closest("[".concat(r,"]"))};t.getFuTargetClickedElement=function(e){var t=e.target;return r({target:t,attributeName:"data-element-id"})},t.getPsTargetClickedElement=function(e){var t=e.target;return r({target:t,attributeName:"data-ps-click-id"})},t.getTargetInputInteractedElement=function(e){var t,r,s=e.target;return t=s.id,r=s.type,i(r)&&!t.includes("react-select")?s:null}},95718:e=>{"use strict";e.exports=require("../dictionaries")},99108:e=>{"use strict";e.exports=require("../features_list")},4942:(e,t,i)=>{"use strict";function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>r})}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";i.r(r),i.d(r,{BL:()=>ci});var e={};i.r(e),i.d(e,{AgreementsLogic:()=>ge,CloseLogic:()=>u,CommonLogic:()=>V,DumpReportsLogic:()=>Ne,EmailReportLogic:()=>h,ExploitPreventionLogic:()=>_e,FeedbackLogic:()=>me,GlobalSubscribeLogic:()=>C,LinksLogic:()=>G,MainPageLogic:()=>j,MainWindowStartLogic:()=>k,ManageAppsLogic:()=>d,ManageMachinesLogic:()=>K,OnboardingLogic:()=>Ge,PasswordProtectionLogic:()=>fe,ProductLaunchLogic:()=>ue,ProductStateStatisticsLogic:()=>je,PropertiesLogic:()=>H,SettingsLogic:()=>l,StatisticsLogic:()=>ke,SupportLogic:()=>q,TestsFacadeLogic:()=>Se,ThreatsLogic:()=>N,TrayLogic:()=>p,TypesOfObjectsToDetectLogic:()=>ve,UiControllerLogic:()=>y,UpgradeLogic:()=>be,UserRegistrationLogic:()=>We});var t={};function s(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function n(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,s(e,t,"get"))}function o(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,s(e,t,"set"),i),i}i.r(t),i.d(t,{AgreementsService:()=>Rt,ClipboardService:()=>He.default,DumpReportsService:()=>jt,DumpService:()=>Ke.default,EnvironmentVarsService:()=>pt,ExploitPreventionService:()=>Ct,ExternalSettingsService:()=>zt,FileService:()=>Nt,ForbiddenAppsService:()=>ot,InternalCacheService:()=>Qt,IpcService:()=>ti,IpmService:()=>yt,KartShutdownService:()=>si,KartUiRegistrationService:()=>Ot,KesMigrationService:()=>oi,KsnService:()=>nt,LinksService:()=>mt,LocalizationService:()=>Tt,MailService:()=>dt,ModeService:()=>ut,NetworkService:()=>_t,PasswordProtectionService:()=>Pt,PermissionsCheckerService:()=>It,ProductIdentityService:()=>St,ProductStateService:()=>wt,ProductStateStatisticsService:()=>Jt,ProductStorageService:()=>vt,ProxyService:()=>rt,ScreenService:()=>st,SettingsVarsService:()=>ei,SharedFoldersProtectionService:()=>ft,ShellService:()=>gt,StatisticsService:()=>Yt,ThreatNotificationsService:()=>lt,ThreatReportService:()=>ht,ThreatService:()=>ct,TimeCounterService:()=>Ft,TraceService:()=>qe.default,TrayService:()=>Ze.default,TypesOfObjectsToDetectService:()=>bt,UiRegistrationService:()=>$e.default,UpdateService:()=>Je.default,UpgradeService:()=>Xt,UserRegistrationService:()=>Lt,WindowService:()=>it});var a=i(64296),c=i(11880);const l=class{constructor(e){this.trace=e.get("TraceService"),this.proxyService=e.get("ProxyService"),this.mail=e.get("MailService"),this.mode=e.get("ModeService"),this.trs=e.get("ThreatReportService"),this.sharedFoldersProtectionService=e.get("SharedFoldersProtectionService"),this.productIdentityService=e.get("ProductIdentityService"),this.internalCacheService=e.get("InternalCacheService"),this.ipcService=e.get("IpcService"),this.productStorageService=e.get("ProductStorageService"),this.threatService=e.get("ThreatService")}setProxySettings(e){const t=this.proxyService.getProxySettings();t.mode=e.mode,t.useProxyForLocalAddresses=e.useProxyForLocalAddresses,t.defaultProxy.proxyHost=e.proxyHost,t.defaultProxy.proxyPort=e.proxyPort,t.defaultProxy.proxyAuth.encryptedUserName=this.proxyService.encryptString(e.login),t.defaultProxy.proxyAuth.encryptedPassword=this.proxyService.encryptString(e.password),this.proxyService.setProxySettings(t)}getProxySettings(){const{mode:e,defaultProxy:t,useProxyForLocalAddresses:i}=this.proxyService.getProxySettings(),r=this.proxyService.decryptString(t.proxyAuth.encryptedUserName),s=this.proxyService.decryptString(t.proxyAuth.encryptedPassword);return{mode:e,useProxyForLocalAddresses:i,proxyHost:t.proxyHost,proxyPort:t.proxyPort,login:r,password:s,needAuthentication:Boolean(r)||Boolean(s)}}getMailSettings(){return this.mail.getMailSettings()}setMailSettings(e){return this.mail.setMailSettings(e)}getUserMode(){return this.mode.getUserMode()}setUserMode(e){return this.mode.setUserMode(e)}setThreatsReportSettings(e){return this.trs.setThreatsReportSettings(e)}getThreatsReportSettings(){return this.trs.getThreatsReportSettings()}clearThreatsReportScheduleSettings(){let{sender:e,schedule:t}=this.trs.getThreatsReportSettings(),i={...t,scheduleMode:0};return this.trs.setThreatsReportSettings({sender:e,schedule:i})}checkProxy({spaCallbackChannel:e}){this.spaSubscriber=this.ipcService.createSpaCallback(e),this.proxyService.checkProxy((e=>{this.spaSubscriber(e)}))}setBlockingTime(e){let t=60*e*1e3;return this.sharedFoldersProtectionService.setBlockingTime(t)}getBlockingTime(){let e=this.sharedFoldersProtectionService.getBlockingTime();return e?Math.floor(e/6e4):void 0}setIsSettingChanged(e){this.internalCacheService.setCacheValue("isSettingsChanged",e)}getIsDownloadScanBalloonsEnabled(){return this.threatService.getIsDownloadScanBalloonsEnabled()}setIsDownloadScanBalloonsEnabled(e){this.threatService.setIsDownloadScanBalloonsEnabled(e),this.sendDownloadScanBalloonsStatus(e)}sendDownloadScanBalloonsStatus(e){}},d=class{constructor(e){this.trace=e.get("TraceService"),this.forbiddenAppsService=e.get("ForbiddenAppsService")}unblock(e){return this.forbiddenAppsService.removeForbiddenApp(e)}addToTrusted(e){return this.forbiddenAppsService.addAllowedApp(e)}removeFromTrusted(e){return this.forbiddenAppsService.removeAllowedApp(e)}moveToTrusted(e){let t=this.unblock(e),i=this.addToTrusted(e);return 0===t&&0===i?0:1}getTrustedApps(){return[...this.forbiddenAppsService.getAppList().allowed].reverse()}getBlockedApps(){return[...this.forbiddenAppsService.getAppList().blocked].reverse()}},u=class{constructor(e){this.windowService=e.get("WindowService"),this.trace=e.get("TraceService"),this.statisticsService=e.get("StatisticsService")}closeGui(){this.windowService.getIsGuiToBeRelaunched()?this.windowService.relaunchGui():this.windowService.closeMainWindow(),this.statisticsService.sendStatisticsIfAllowed({source:"mainWindow_byCloseButton",action:"close"})}minimizeGui(){this.windowService.minimizeMainWindow(),this.statisticsService.sendStatisticsIfAllowed({source:"mainWindow_byMinimizeButton",action:"minimize"})}},h=class{constructor(e){this.ms=e.get("MailService"),this.trace=e.get("TraceService"),this.ipcService=e.get("IpcService"),this.threatReportService=e.get("ThreatReportService")}sendReportToAdmin({subject:e,spaCallbackChannel:t}){const i=this.ipcService.createSpaCallback(t);this.ms.sendReport(e,((e,t)=>{i({result:e,smtpResult:t})}))}sendTestEmail({subject:e,spaCallbackChannel:t}){const i=this.ipcService.createSpaCallback(t);this.ms.sendTestEmail(e,((e,t)=>{i({result:e,smtpResult:t})}))}isReportOnDetectEnabled(){return this.threatReportService.getReportOnDetectSetting()}setReportOnDetectEnabled(e){return this.threatReportService.setReportOnDetectSetting(e)}},p=class{constructor(e){}createTray(){}_sendProductStateTrayClickEvents(e){}openGui(){}shutdown(){}showWarningModal(e){}makeTrayExitMenuItemDisabled(e=!1){}};var g=i(40529);const v=41,m=43,S=1345235623;var _=i(7940),f=i(15606),w=i(64030);const b={2:{priority:4,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"failedToSendEmail"},3:{priority:1,autoclose:!0,isCanBeMultiple:!1,isCanBeMuted:!0,name:"reportSuccessSend"},4:{priority:2,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!1,name:"wrongProxySettings"},5:{priority:1,autoclose:!0,isCanBeMultiple:!1,isCanBeMuted:!1,name:"correctProxySettings"},6:{priority:2,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"unableToSendTextMessage"},7:{priority:1,autoclose:!0,isCanBeMultiple:!1,isCanBeMuted:!0,name:"successSendTextMessage"},10:{priority:1,autoclose:!1,isCanBeMultiple:!0,isCanBeMuted:!1,name:"malwareWasBlocked"},11:{priority:1,autoclose:!1,isCanBeMultiple:!0,isCanBeMuted:!0,name:"actionsOfMalwareWereRolledBack"},12:{priority:4,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"eventLoggingIsEnabled"},13:{priority:1,autoclose:!1,isCanBeMultiple:!0,isCanBeMuted:!1,name:"machineWasBlocked"},14:{priority:1,autoclose:!1,isCanBeMultiple:!0,isCanBeMuted:!1,name:"blockedLegitimateSoftware"},15:{priority:1,autoclose:!1,isCanBeMultiple:!0,isCanBeMuted:!0,name:"actionsLegitimateSoftwareRolledBack"},16:{priority:1,autoclose:!1,isCanBeMultiple:!0,isCanBeMuted:!1,name:"exploitWasBlocked"},18:{priority:2,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"updateInstalledRestartNeeded"},19:{priority:4,autoclose:!0,isCanBeMultiple:!1,isCanBeMuted:!0,name:"rateUs"},20:{priority:2,autoclose:!0,isCanBeMultiple:!1,isCanBeMuted:!0,name:"newMessageFromKaspersky"},21:{priority:0,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"regionalDataProcessing"},22:{priority:0,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"acceptAgreementsEnablingProtection"},23:{priority:4,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"proxyRequest"},24:{priority:1,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"passwordRequest"},25:{priority:2,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!1,name:"malwareWasFound"},26:{priority:2,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"malwareWasNotFound"},27:{priority:2,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"sendDumpReport"},28:{priority:2,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!1,name:"malwareScanReportFailed"},29:{priority:2,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"undocDisabling"},30:{priority:2,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"activityReport"},31:{priority:0,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"newVersionAvailable"},32:{priority:0,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"oldVersionUninstallFailed"},33:{priority:2,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"sendEtlReport"},34:{priority:1,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"noExitWhileNewInstallation"},35:{priority:0,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"tfuManualUpgradeRequest"},36:{priority:1,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"failedToGetUserRegistrationFormManually"},37:{priority:2,autoclose:!1,isCanBeMultiple:!0,isCanBeMuted:!0,name:"downloadedFileIsSafe"},39:{priority:1,autoclose:!1,isCanBeMultiple:!0,isCanBeMuted:!0,name:"downloadedFileIsDangerous"},40:{priority:0,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!1,name:"acceptAgreements"},[v]:{priority:4,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"aboutFreeLesson"},42:{priority:3,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!0,name:"boostProtection"},[m]:{priority:0,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!1,name:"startMigration"},44:{priority:0,autoclose:!1,isCanBeMultiple:!1,isCanBeMuted:!1,name:"eolProduct"}},y=class{constructor(e){this.electron=e.get("electron"),this.windowService=e.get("WindowService"),this.uiRegistrationService=e.get("KartUiRegistrationService"),this.shutdownService=e.get("KartShutdownService"),this.trace=e.get("TraceService"),this.productStorage=e.get("ProductStorageService"),this.dumpService=e.get("DumpService"),this.modeService=e.get("ModeService"),this.trayService=e.get("TrayService"),this.productIdentityService=e.get("ProductIdentityService"),this.statisticsService=e.get("StatisticsService"),this.ipcService=e.get("IpcService")}setShutdownCallback(){this.uiRegistrationService.setShutdownCallback((()=>{this.trayService.destroy(),this.shutdownService.shutdownUI()}))}setRelaunchCallback(){this.uiRegistrationService.setRelaunchCallback((e=>{const t=this.windowService.getMainWindow(),{isForceRelaunch:i}=(0,g.safeParseJson)(e);!t||i?this.windowService.relaunchGui():this.windowService.setIsGuiToBeRelaunched(!0)}))}setRefreshTracesSettingsCallback(){this.uiRegistrationService.setRefreshTraceSettings((()=>{let{enabled:e}=this.trace.getTraceState();this.trace.switchTraces(e)}))}setDumpCallback(){this.uiRegistrationService.setCreateDump((()=>(this.dumpService.writeDump(),0)))}setBalloonCallback(){this.uiRegistrationService.setResolveBalloon(((e,t)=>{"string"==typeof t&&t.length&&JSON.parse(t).smtpCode}))}setProxyRequestCallbacks(){this.uiRegistrationService.setShowProxyBalloonCallback((()=>{const e=this.windowService.getModalWindowById(23);if(null!=e&&e.id)return w.MR;this.electron.ipcMain.once("proxy-request-resolve",((e,t)=>{var i;const r=(0,g.safeJsonStringify)({username:t.username,password:t.password,needSave:!0});this.uiRegistrationService.sendResponse(S,w.MR,r),null===(i=this._spaProxyCredentialsCallback)||void 0===i||i.call(this)})),this.electron.ipcMain.once("proxy-request-cancel",((e,t)=>{this.uiRegistrationService.sendResponse(S,w.VY,_.ZD),this.statisticsService.sendStatisticsIfAllowed({source:`balloon_${b[23].name}CancelRequest`,action:"close"})})),this.windowService.createModalWindow({id:23,options:{alwaysOnTop:!0}})})),this.uiRegistrationService.setHideProxyBalloonCallback((()=>{const e=this.windowService.getModalWindowById(23);null==e||e.webContents.send(f.ui)}))}setSpaProxyCredentialsCallback({spaCallbackChannel:e}){this._spaProxyCredentialsCallback=this.ipcService.createSpaCallback(e)}setShowPanelCallback(){this.uiRegistrationService.setShowPanel((e=>{if(this.windowService.showMainWindow(),this.windowService.focusMainWindow(),e===_.OL){const e=this.windowService.getMainWindow();e.once("show",(()=>{null==e||e.webContents.send("spa:navigation_event","details")})),null==e||e.webContents.send("spa:navigation_event","details")}}))}setShowWindowCallback(){this.uiRegistrationService.setShowWindow((e=>{switch(e){case 0:return 0;case 1:this.windowService.minimizeMainWindow();break;case 2:default:this.windowService.showMainWindow(),this.windowService.focusMainWindow();break;case 3:this.windowService.hideMainWindow()}return 0}))}setShowProtectionStateCallback({spaCallbackChannel:e}){const t=this.ipcService.createSpaCallback(e);this.uiRegistrationService.setShowProtectionState((e=>{t(e)}))}setRefreshIconCache(){this.uiRegistrationService.setRefreshIconCache()}switchUiCallbacks(e){this.setShutdownCallback(),this.setRefreshTracesSettingsCallback(),this.setDumpCallback(),this.setBalloonCallback(),this.setShowPanelCallback(),this.setShowWindowCallback(),this.setProxyRequestCallbacks(),this.setRefreshIconCache(),this.setRelaunchCallback(),this.uiRegistrationService.registerUi(e)}},k=class{constructor(e){this.electron=e.get("electron"),this.windowService=e.get("WindowService"),this.trace=e.get("TraceService")}createMainWindow(){this.windowService.createMainWindow()}showMainWindow(){this.windowService.showMainWindowAfterCreate()}getMainWindow(){return this.windowService.getMainWindow()}};var T=i(54363);const C=class{constructor(e){this.win=e.get("WindowService"),this.screen=e.get("ScreenService"),this.productStorage=e.get("ProductStorageService"),this.statisticsService=e.get("StatisticsService"),this.electron=e.get("electron"),this.networkService=e.get("NetworkService"),this.trace=e.get("TraceService"),this.shutdownService=e.get("KartShutdownService"),this.threatsService=e.get("ThreatService"),this.agreementsService=e.get("AgreementsService"),this.ipcService=e.get("IpcService"),this._previousScreenMode=T.w.WINDOW}subscribeToTracesState(){this._showBalloonIfTracesOn(),setInterval((()=>{this._showBalloonIfTracesOn()}),864e5)}_showBalloonIfTracesOn(){this.trace.getTraceState()}setDisableTracesFromBalloonSpaCallback(e){this.disableTracesFromBalloonSpaCallback=e}_subscribeToDisableTraceFromBalloon(){this.electron.ipcMain.on("disable-traces",((e,t)=>{this.trace.switchTraces(!1),this.statisticsService.sendStatisticsIfAllowed({source:"balloon_disableTracesFromBalloon",action:"click"}),setTimeout((()=>{"function"==typeof this.disableTracesFromBalloonSpaCallback&&this.disableTracesFromBalloonSpaCallback()}),200)}))}_subscribeToNavigateEventFromBalloon(){const e=({modalId:e,page:t})=>{if(e)40===e&&this.showAcceptAgreementsModal();else if(t){this.win.getMainWindow()?this.win.showMainWindowAfterCreate():this.win.createMainWindow();const e=this.win.getMainWindow();e.isVisible()?null==e||e.webContents.send("spa:navigation_event",t):e.once("show",(()=>null==e?void 0:e.webContents.send("spa:navigation_event",t))),this.statisticsService.sendStatisticsIfAllowed({source:`page_${t}FromBalloon`,action:"open"})}};this.electron.ipcMain.on(f.Bz,((t,i)=>e(i)))}showAcceptAgreementsModal(){if(this.win.getModalWindowById(40));else{const e=this.agreementsService.getActualNotAcceptedAgreementsInfo(),t=this.agreementsService.getNotAcceptedAgreementsText(),i=(e,t)=>{var i;this.agreementsService.registerAcceptanceFacts(t),this.agreementsService.clearAgreementBalloonTimeout(),null===(i=this._spaOnAgreementsAcceptedSubscriber)||void 0===i||i.call(this,!0)},r=()=>{var e;null===(e=this._spaOnAgreementsAcceptedSubscriber)||void 0===e||e.call(this,!1),this.electron.ipcMain.removeListener(f.ee,i)};this.agreementsService.scheduleAcceptAgreementsNotification(),this.electron.ipcMain.once(f.ee,i),this.electron.ipcMain.once(f.XG,r),this.win.createModalWindow({id:40,data:{agreementsAcceptanceFacts:e,notAcceptedAgreementsText:t},width:624})}}_subscribeToRebootOsFromBalloon(){this.electron.ipcMain.on("reboot-os",((e,t)=>{setTimeout((()=>{this.shutdownService.rebootOs()}),200),this.statisticsService.sendStatisticsIfAllowed({source:"balloon_rebootOsFromBalloon",action:"click"})}))}subscribeOnProductIconClick(){this.win.subscribeOnProductIconClick()}subscribeOnScreenModeChange(){const e={onFullScreenChange:e=>{e===T.w.WINDOW&&this._previousScreenMode!==T.w.WINDOW&&(this._previousScreenMode=e)}};this.screen.subscribeOnScreenModeChange(e)}_subscribeOnDsBalloonsStatusChangedFromBalloon(){this.electron.ipcMain.on(f.LX,((e,t)=>{this.threatsService.setIsDownloadScanBalloonsEnabled(t.isBalloonEnabled);const i=this.win.getMainWindow();(null==i?void 0:i.isVisible())&&(null==i||i.webContents.send(c.K7,t.isBalloonEnabled))}))}subscribeOnAgreementsAcceptance({spaCallbackChannel:e}){this._spaOnAgreementsAcceptedSubscriber=this.ipcService.createSpaCallback(e)}};var P=i(91525),R=i(29411),I=i(58577),E=i(52394),M=i(79158);const A="malware_scan";var x=i(62760),F=i(59890);function L(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function D(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var B=new WeakSet,O=new WeakSet;function U(e){if(this.permissionsCheckerService.checkFeatureAllowance(M.SZ))return e;if(this.permissionsCheckerService.checkFeatureAllowance(M.Xz)){const{malwareListLength:t,totalFilesScanned:i,sessionGuid:r,sequenceNumber:s,resultCode:n}=e;return{malwareListLength:t,totalFilesScanned:i,sessionGuid:r,sequenceNumber:s,resultCode:n}}if(this.permissionsCheckerService.checkFeatureAllowance(M.S0)){const{malwareListLength:t,totalFilesScanned:i,sessionGuid:r,sequenceNumber:s}=e;return{malwareListLength:t,totalFilesScanned:i,sessionGuid:r,sequenceNumber:s}}if(this.permissionsCheckerService.checkFeatureAllowance(M.RW)){const{malwareListLength:t,totalFilesScanned:i}=e;return{malwareListLength:t,totalFilesScanned:i}}return{}}function W(e){const{sessionGuid:t,...i}=D(this,B,U).call(this,{...e.value,sessionGuid:e.sessionGuid});this.statisticsService.sendStatisticsIfAllowed({source:e.source,action:e.action,value:i,sessionGuid:t})}const N=class{constructor(e){L(this,O),L(this,B),this.threatsService=e.get("ThreatService"),this.threatNotificationsService=e.get("ThreatNotificationsService"),this.trace=e.get("TraceService"),this.serviceRegistry=e,this.localizationService=e.get("LocalizationService"),this.windowService=e.get("WindowService"),this.statisticsService=e.get("StatisticsService"),this.productStorageService=e.get("ProductStorageService"),this.timeCounterService=e.get("TimeCounterService"),this.productStorage=e.get("ProductStorageService"),this.electron=e.get("electron"),this.ipcService=e.get("IpcService"),this.forbiddenAppsService=e.get("ForbiddenAppsService"),this.permissionsCheckerService=e.get("PermissionsCheckerService"),this.productIdentityService=e.get("ProductIdentityService"),this.agreementsService=e.get("AgreementsService"),this.uiRegistrationService=e.get("KartUiRegistrationService"),this.onThreatEventSpaCallback=()=>{}}getThreats({startIndex:e,stopIndex:t}){return this.threatsService.getThreats(e,t)}clearReport(){this.threatsService.clearReport()}subscribeOnThreats(){this.threatNotificationsService.subscribe((e=>{if(e.eventType===E.lB)this.showExploitPreventionBalloon({name:e.threatName,path:e.threatPath});else{if(e.eventType===E.Bh)return this.showThreatOrRollbackBalloon({swAction:e.action,name:e.threatName,path:e.threatPath}),w.MR;{const{dictionaries:{remoteMachine:t}}=this.localizationService.getLocalizationResources();switch(e.threatType){case R.EK:case R.ZP:case R.sy:this.showAdwareRiskwarePornwareOrRollbackBalloon({swAction:e.action,name:e.threatName,path:e.threatPath});break;default:e.isRemote?this.showRemoteThreatOrRollbackBalloon({swAction:e.action,name:e.threatName,address:e.threatPath||t}):this.showThreatOrRollbackBalloon({swAction:e.action,name:e.threatName,path:"system"===e.threatPath.toLowerCase()?t:e.threatPath})}}}"function"==typeof this.onThreatEventSpaCallback&&this.onThreatEventSpaCallback(e)}))}setOnThreatEventSpaCallback({spaCallbackChannel:e}){const t=this.ipcService.createSpaCallback(e);this.onThreatEventSpaCallback=t}showThreatOrRollbackBalloon(e){}showRemoteThreatOrRollbackBalloon(e){}showAdwareRiskwarePornwareOrRollbackBalloon(e){}showExploitPreventionBalloon(e){}getThreatsReportSize(){return this.threatsService.getThreatsReportSize()}getMalwareScanInfo(){return this.threatsService.getLastMalwareScanInfo()}startMalwareScan(){this.threatsService.startMalwareScan()}stopMalwareScan(){this.threatsService.stopMalwareScan()}_onMalwareScanStopHandler(e){var t,i;this.subscribeOnRemindLaterOnMlwsBalloon();const r=this.getMalwareScanInfo(),s={source:"malwareScanResult_blMalwareScanStopHandler",action:"scanCompleted",value:{malwareListLength:(null==r||null===(t=r.malwareList)||void 0===t?void 0:t.length)||_.Ds,totalFilesScanned:(null==r||null===(i=r.statistic)||void 0===i?void 0:i.totalFiles)||_.Ds,resultCode:e,internetConnection:r.internetConnection,trustedKL:r.trustedKL,trustedMS:r.trustedMS,cashCount:r.ksnCachedCount,startTime:r.scanStartTime,scanDuration:r.scanDuration}};D(this,O,W).call(this,s)}setSpaMlwsCallbacks({onStartCallbackChannel:e,onStopCallbackChannel:t,onProgressCallbackChannel:i,onStatusChangedCallbackChannel:r}){this._spaOnStartMlwsSubscriber=this.ipcService.createSpaCallback(e),this._spaOnStopMlwsSubscriber=this.ipcService.createSpaCallback(t),this._spaOnProgressMlwsSubscriber=this.ipcService.createSpaCallback(i),this._spaOnStatusChangedMlwsSubscriber=this.ipcService.createSpaCallback(r)}subscribeOnMalwareScan(){const e={onStart:()=>{var e;const t=this.statisticsService.getGuidRelatedToFeature(A),i=this.productStorageService.get("malwareScanSequenceNumber")||_.Ds;this.statisticsService.sendStatisticsIfAllowed({source:"malwareScan",action:"start",value:{sequenceNumber:i+_.OL},sessionGuid:t}),this.productStorageService.set("malwareScanSequenceNumber",i+_.OL),null===(e=this._spaOnStartMlwsSubscriber)||void 0===e||e.call(this)},onStop:e=>{var t;null===(t=this._spaOnStopMlwsSubscriber)||void 0===t||t.call(this),this._onMalwareScanStopHandler(e);const i=this.statisticsService.getGuidRelatedToFeature(A),r=this.productStorageService.get("malwareScanSequenceNumber");D(this,O,W).call(this,{source:"malwareScan",action:"stop",value:{sequenceNumber:r},sessionGuid:i}),this.statisticsService.resetGuidRelatedToFeature(A)},onProgressChanged:e=>{var t;return null===(t=this._spaOnProgressMlwsSubscriber)||void 0===t?void 0:t.call(this,e)},onScanStateChanged:e=>{var t;null===(t=this._spaOnStatusChangedMlwsSubscriber)||void 0===t||t.call(this,e)}};this.threatsService.subscribeOnMalwareScan(e)}getActivityReportForSevenDays(){return this.threatsService.getActivityReport(7)}getActivityReportForThirtyDays(){return this.threatsService.getActivityReport(30)}_getTargetFridayDate(){const e=24*_.Yn,t=(new Date).getDay(),i=(5-t<_.Ds?7-(5-t):5-t)*e;return new Date(Date.now()+i).setHours(12,0,0)}_createActivityReportIntervalSchedule(){this.timeCounterService.addTimeEventListener({typeOfEvent:"interval",hoursEvent:168,listener:this.showActivityReportBalloon.bind(this),listenerLabel:"showActivityReportBalloon"})}_triggerActivityReportTimeout(){this._createActivityReportIntervalSchedule(),this.showActivityReportBalloon()}showActivityReportBalloon(){}scheduleActivityReport(){var e;const t="showActivityReportBalloon",i=this.timeCounterService.getTriggeredTimeouts();if(null==i||null===(e=i[t])||void 0===e?void 0:e.length)this._createActivityReportIntervalSchedule();else{const e=Date.now(),i=this._getTargetFridayDate(),r=Math.abs((e-i)/_.Yn);this.timeCounterService.getHourEvents("timeout",t).forEach((e=>{this.timeCounterService.deleteTimeEventListener({typeOfEvent:"timeout",hoursEvent:e,listenerLabel:t})})),this.timeCounterService.addTimeEventListener({typeOfEvent:"timeout",hoursEvent:r,listener:this._triggerActivityReportTimeout.bind(this),listenerLabel:t})}}showBalloonWithLaterButton(e){}subscribeOnRemindLaterOnMlwsBalloon(){this.electron.ipcMain.once(c.lL,((e,{rendererId:t})=>{this.timeCounterService.addTimeEventListener({typeOfEvent:"timeout",hoursEvent:2,listener:this.showBalloonWithLaterButton.bind(this,t),listenerLabel:`remindLaterFrom${t}Balloon`})}))}_filterInfoForStatistic(e){const t=this.agreementsService.getAcceptanceFactsWithoutRdp(),i=this.productIdentityService.getEdition()===I.L,r=t.filter((e=>e.version.includes("supplemental_")&&e.accepted)).map((e=>parseInt(e.version.split("supplemental_")[1],10))),s=e=>r.find((t=>t>=(i&&e.home||e.business)));return s({home:5,business:8})?e:s({home:3,business:6})?{dateTime:e.dateTime,resolved:e.resolved,exist:e.exist}:i||s({home:1,business:4})?{resolved:e.resolved,exist:e.exist}:{}}sendDownloadScanStatistics(){const e=this.threatsService.getDownloadsScanInfo(),t=this.isDownloadsScanEnabled()?_.Ds:_.OL,i={...e,result:e.result!==w.MR?e.result:t},r=this.permissionsCheckerService.checkFeatureAllowance(M.tU);this.statisticsService.sendStatisticsIfAllowed({source:"downloadScan",action:"startCheck",value:{...this._filterInfoForStatistic(i),userId:r?i.userId:_.ZD}})}isDownloadsScanEnabled(){return this.threatsService.isDownloadsScanEnabled()}subscribeOnDownloadsScan(){const e=this.isDownloadsScanEnabled();this.sendDownloadScanStatistics(),this.threatNotificationsService.subscribeOnDownloadsScan(((e,t)=>{if(e===w.MR){const e=this.threatsService.getIsDownloadScanBalloonsEnabled();({...t,name:t.fullName.split("\\").pop(),path:t.fullName,type:"Application",status:(0,F.$c)(t.status),isBalloonsEnabled:e}).status===P.P6&&this.blockApplication(t.fullName)}})),e&&this.threatsService.startDownloadsScan()}setOnAppBlockedEventSpaCallback({spaCallbackChannel:e}){this._onAppBlockedEventSpaCallback=this.ipcService.createSpaCallback(e)}blockApplication(e){const t=this.forbiddenAppsService.addForbiddenApp(e);if(t===w.MR){var i;const r={action:x.SL,isRemote:!1,eventType:E.Bh,threatName:"Malware",threatPath:e,threatType:R.W5,objectName:_.ZD,objectPath:_.ZD,objectType:-_.OL,time:Date.now(),result:t};this.threatsService.addEventWithoutNotification(r),null===(i=this._onAppBlockedEventSpaCallback)||void 0===i||i.call(this)}return t}setSpaFeatureFlagChangeSubscriber({spaCallbackChannel:e}){this._spaCallbackFeatureFlagChange=this.ipcService.createSpaCallback(e)}subscribeOnDownloadScanFeatureFlagChange(){this.uiRegistrationService.addFeatureFlagUpdatedCallback((()=>{"function"==typeof this._spaCallbackFeatureFlagChange&&this._spaCallbackFeatureFlagChange(),this.threatsService.changeDownloadsScanState()}))}},V=class{constructor(e){this.trace=e.get("TraceService"),this.clipboardService=e.get("ClipboardService"),this.dumpService=e.get("DumpService"),this.windowService=e.get("WindowService"),this.fileService=e.get("FileService"),this.shutdownService=e.get("KartShutdownService"),this.uiRegistrationService=e.get("KartUiRegistrationService")}copyToClipboard(e){this.clipboardService.copyToClipboard(e)}traceSPAInfo(e){}traceInfo(e){}traceError(e){}createDump(e){void 0===e?this.dumpService.writeDump():this.dumpService.writeDumpWithInfo(String(e))}getFilePath(){const e=this.windowService.getMainWindow();return this.fileService.openFilePath(e)}prepareSafeExit(){this.uiRegistrationService.unregisterUi(),this.shutdownService.join()}};var z=i(66125);const j=class{constructor(e){this.trace=e.get("TraceService"),this.productState=e.get("ProductStateService"),this.productStorage=e.get("ProductStorageService"),this.ksn=e.get("KsnService"),this.ipcService=e.get("IpcService"),this.uiRegistrationService=e.get("KartUiRegistrationService"),this.environmentVarsService=e.get("EnvironmentVarsService"),this.timeCounterService=e.get("TimeCounterService")}getKsnInfo({spaCallbackChannel:e}){const t=this.ipcService.createSpaCallback(e);this.ksn.getKsnInfo(((e,i)=>{t(i)}))}getProductState({spaCallbackChannel:e}){const t=this.ipcService.createSpaCallback(e);this.productState.getState((e=>{t(e===_.OL)}))}isProductEol(){return"1"===this.environmentVarsService.expandEnvironmentVar(z.le)}setSpaEolStatusSubscriber({spaCallbackChannel:e}){this._spaCallbackEolStatusChange=this.ipcService.createSpaCallback(e)}subscribeBlOnEolStatusChange(){this.uiRegistrationService.setEolStatusCallback((()=>{"function"==typeof this._spaCallbackEolStatusChange&&this._spaCallbackEolStatusChange()}))}},G=class{constructor(e){this.shell=e.get("ShellService"),this.trace=e.get("TraceService"),this.linksService=e.get("LinksService"),this.electron=e.get("electron")}shellOpenExternal(e){this.shell.openExternal(e)}openInterceptorLink(e){let t=this.linksService.getInterceptorLink(e);return this.shellOpenExternal(t),t}openHelpLink(e){const t=`${this.linksService.getInterceptorLink("online_help")}&helpid=${e}`;return this.shell.openExternal(t),t}openExternalLink(e){this.shell.openExternal(e)}openExtendedFeedbackLink(){let e=this.linksService.getExtendedFeedbackLink();return this.shell.openExternal(e),e}getRawGetPremiumLink(e){return this.linksService.getGetPremiumLink(e)}openRedirectorLink(e){const t=this.getRawGetPremiumLink(e);this.shellOpenExternal(t)}},q=class{constructor(e){this.trace=e.get("TraceService"),this.electron=e.get("electron")}switchTraces(e){this.trace.switchTraces(e)}setTraceLevel(e){this.trace.setTraceLevel(e)}getTracesState(){return this.trace.getTraceState()}},H=class{constructor(e){this.trace=e.get("TraceService"),this.environmentVarsService=e.get("EnvironmentVarsService"),this.updateService=e.get("UpdateService"),this.productIdentityService=e.get("ProductIdentityService"),this.localizationService=e.get("LocalizationService"),this.windowService=e.get("WindowService")}getProductVersion(){return this.environmentVarsService.expandEnvironmentVar(z.Fe)}getProductHotfix(){return this.updateService.getProductHotfix()}isDebug(){return this.productIdentityService.isDebugMode()}isSpectronEnabled(){return this.productIdentityService.getSpectronEnabled()}getMachineID(){return this.productIdentityService.getMachineId()}getProductInstallationID(){return this.productIdentityService.getInstallationId()}getEdition(){return this.productIdentityService.getEdition()}getLocalization(){return this.localizationService.getLocalization()}getLocalizationResources(){return this.localizationService.getLocalizationResources()}getRebrandingCode(){return this.environmentVarsService.expandEnvironmentVar(z.k3)}getAppId(){return this.productIdentityService.getAppId()}getPpcsId(){return this.productIdentityService.getPpcsId()}},K=class{constructor(e){this.trace=e.get("TraceService"),this.sharedFoldersProtectionService=e.get("SharedFoldersProtectionService")}addToTrusted(e){return this.sharedFoldersProtectionService.addAllowedAddress(e)}removeFromTrusted(e){return this.sharedFoldersProtectionService.removeAllowedAddress(e)}moveToTrusted(e){return 0===this.addToTrusted(e)?0:1}getTrustedAddresses(){return this.sharedFoldersProtectionService.getAllowedAddressesList()}getForbiddenAddress(){return this.sharedFoldersProtectionService.getBlockedAddressesList()}};var Z=i(524);const $="productAliveTimestamp",J="onboardingInfo",Y="previousProductStateStatisticsEvents",X="marketoFormSnapshot",Q="isPSRegistrationEventWasResent",ee="productVersion",te="isDownloadScanBalloonsEnabled",ie="isMarketoWaitingSubmission",re="marketoFormUserInput",se="registrationSchedulerIntervalInHour",ne="productStateRegistrationDraftEvents",oe="productStateTrackDuplicateEvents",ae="productStateGHFormType",ce="productStateGHInitialEventSend";var le=new WeakSet;function de(){["allExperimentsInProductStateStatistics"].forEach((e=>this.productStorageService.delete(e)))}const ue=class{constructor(e){var t,i;(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t=this,i=le),i.add(t),this.trace=e.get("TraceService"),this.localization=e.get("LocalizationService"),this.productIdentityService=e.get("ProductIdentityService"),this.windowService=e.get("WindowService"),this.fileService=e.get("FileService"),this.statisticsService=e.get("StatisticsService"),this.timeCounterService=e.get("TimeCounterService"),this.proxyService=e.get("ProxyService"),this.externalSettingsService=e.get("ExternalSettingsService"),this.productStorageService=e.get("ProductStorageService"),this.environmentVarsService=e.get("EnvironmentVarsService"),this.updateService=e.get("UpdateService"),this.threatsService=e.get("ThreatService"),this.productStateStatisticsService=e.get("ProductStateStatisticsService"),this.ipcService=e.get("IpcService"),this.uiRegistrationService=e.get("KartUiRegistrationService"),this._initializeAsarMd5OnStart(),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(this,le,de).call(this)}_initializeAsarMd5OnStart(){this.iniAsarMd5=this.getAsarMd5()}isFirstLaunch(){return this.productIdentityService.isFirstLaunch()}markProductLaunched(){this.productIdentityService.setIsFirstLaunch(!1);const e=`${this.environmentVarsService.expandEnvironmentVar(z.l4)}${this.updateService.getProductHotfix()}`;this.productStorageService.delete(ce),this.productStorageService.set(ee,e)}getLocalization(){return this.localization.getLocalization()}checkAsarIntegrity(){const e=this.getAsarMd5();this.iniAsarMd5&&e&&this.iniAsarMd5===e||this.windowService.relaunchGui()}getAsarMd5(){const e=`${this.productIdentityService.getCurrentDirectory()}\\resources\\${Z.uR}`;return this.fileService.getMd5OfFile(e)}scheduleTelemetrySending(){const e=864e5,t=this.productStorageService.get("telemetrySendTimestamp"),i=()=>{this.statisticsService.sendStatisticsIfAllowed({source:"guiTelemetry",action:"send"}),this.productStorageService.set("telemetrySendTimestamp",Date.now())};(!t||Date.now()-t>e)&&i(),this.timeCounterService.addTimeEventListener({typeOfEvent:"interval",hoursEvent:24,listener:i.bind(this),listenerLabel:"sendTelemetryCallback"}),this._utilizeWrongInitTime({typeOfEvent:"interval",wrongHoursEvent:e,listenerLabel:"sendTelemetryCallback"})}_utilizeWrongInitTime({typeOfEvent:e,wrongHoursEvent:t,listenerLabel:i}){var r;const s=this.timeCounterService.getIntervalInitTimes();(null==s||null===(r=s[t])||void 0===r?void 0:r[i])&&this.timeCounterService.deleteTimeEventListener({typeOfEvent:e,hoursEvent:t,listenerLabel:i})}sendStatisticsAboutProxy(){if(!this.productStorageService.get("isProxyConfigurationCheckAlreadyDone")){const{defaultProxy:{proxyAuth:{userName:e,password:t}}}=this.proxyService.getProxySettings();this.statisticsService.sendStatisticsIfAllowed({source:"proxy_isProxyConfigured",action:"check",value:Boolean(e)&&Boolean(t)}),this.productStorageService.set("isProxyConfigurationCheckAlreadyDone",!0)}}isGetPremiumByUrl(){return this.externalSettingsService.isGetPremiumByUrl()}forceRelaunchGui(){this.windowService.relaunchGui()}setElectronVersion(e){this.productIdentityService.setElectronVersion(e)}getFeaturesEnablingState(){return{isEmailNotificationsEnabled:this.externalSettingsService.isEmailNotificationsEnabled(),isMalwareScanEnabled:this.externalSettingsService.isMalwareScanEnabled(),isManualRegistrationOpenEnabled:this.externalSettingsService.isManualRegistrationOpenEnabled(),isUserRegistrationEnabled:this.externalSettingsService.isUserRegistrationEnabled()}}getUiElementsConfiguration(){return this.externalSettingsService.getUiElementsConfiguration()}};var he=i(4942),pe=i(74175);const ge=class{constructor(e){(0,he.Z)(this,"getLatestRDPAgreementText",(()=>{const e=this.getAgreementsInfo(),t=(0,g.safeParseJson)(e[pe.Z.rdp].tag,this.trace).fileName||_.ZD;return this.getAgreementTextByName(t)})),(0,he.Z)(this,"getLatestEtlAgreementText",(()=>{const e=this.getAgreementsInfo(),t=(0,g.safeParseJson)(e[pe.Z.rdpEtl].tag,this.trace).fileName||_.ZD;return this.getAgreementTextByName(t)})),this.trace=e.get("TraceService"),this.fileService=e.get("FileService"),this.agreementsService=e.get("AgreementsService"),this.productIdentityService=e.get("ProductIdentityService")}getLastAcceptedAgreement(e){const t=this.getAllAcceptanceFacts(),i=this.agreementsService.getAllAgreements(),r=t.filter((t=>t.accepted&&t.agreementId===e)).map((e=>i.find((t=>t.version===e.version)))).reduce(((e,t)=>{const i=parseInt((0,g.safeParseJson)(t.tag,this.trace).revision,10)||_.Ds;return i>e?i:e}),_.Ds),s=i.find((t=>(parseInt((0,g.safeParseJson)(t.tag,this.trace).revision,10)||_.Ds)===r&&t.id===e));if(s){const{fileName:e=_.ZD}=(0,g.safeParseJson)(s.tag,this.trace)||{},t=`${this.productIdentityService.getCurrentDirectory()}\\${e}`;return this.fileService.readTextFile(t)}return""}getAgreementsInfo(){return this.agreementsService.getAgreements()}getAcceptanceFactsWithoutRdp(){return this.agreementsService.getAcceptanceFactsWithoutRdp()}getAllAcceptanceFacts(){return this.agreementsService.getAllAcceptanceFacts()}getAgreementTextByName(e){return this.agreementsService.getAgreementTextByName(e)}getNotAcceptedAgreementsText(){return this.agreementsService.getNotAcceptedAgreementsText()}getActualNotAcceptedAgreementsInfo(){return this.agreementsService.getActualNotAcceptedAgreementsInfo()}registerAcceptanceFacts(e){this.agreementsService.registerAcceptanceFacts(e)}subscribeOnDiscoveryEvent(){}checkAgreementsAcceptance(){this.agreementsService.areThereNotAcceptedAgreements()&&(this.agreementsService.showAgreementBalloon(),this.agreementsService.scheduleAcceptAgreementsNotification())}},ve=class{constructor(e){this.trace=e.get("TraceService"),this.typesOfObjectsToDetect=e.get("TypesOfObjectsToDetectService")}getAdwareRiskwarePornwareBlockStatus(){return this.typesOfObjectsToDetect.getAdwareRiskwarePornwareBlockStatus()}setAdwareRiskwarePornwareBlockStatus(e){return this.typesOfObjectsToDetect.setAdwareRiskwarePornwareBlockStatus(e)}},me=class{constructor(e){this.trace=e.get("TraceService"),this.ksnService=e.get("KsnService"),this.timeCounterService=e.get("TimeCounterService"),this.permissionsCheckerService=e.get("PermissionsCheckerService"),this.productStorageService=e.get("ProductStorageService"),this.statisticsService=e.get("StatisticsService")}sendFeedback(e){this.ksnService.sendFeedback(e)}isFeedbackAllowed(){return this.permissionsCheckerService.checkFeatureAllowance(M.Q7)}isPageFeedbackAllowed(){return this.permissionsCheckerService.checkFeatureAllowance(M.ow)}setTimeoutsInitTime(){if(this.productStorageService.get("feedbackReminderInitTime"));else{const e=this.timeCounterService.getDateNowAsHours();this.productStorageService.set("feedbackReminderInitTime",e)}}updateAllTimeoutsInitTime(e,t){const i=this.productStorageService.get("feedbackReminderInitTime"),r=this.timeCounterService.getTriggeredTimeouts(),s=(null==r?void 0:r[t])||[];i&&e.forEach((e=>{s.includes(e)||this.timeCounterService.updateTimeEventInitTime({typeOfEvent:"timeout",hoursEvent:e,listenerLabel:t,newInitTime:i})}))}},Se=class{constructor(e){}getCurrentBalloonChain(){}},_e=class{constructor(e){this.trace=e.get("TraceService"),this.exploitPrevention=e.get("ExploitPreventionService"),this.permissionsCheckerService=e.get("PermissionsCheckerService")}getExploitPreventionStatus(){return this.exploitPrevention.getExploitPreventionStatus()}setExploitPreventionStatus(e){return this.exploitPrevention.setExploitPreventionStatus(e)}getSystemProcessesMemoryProtectionStatus(){return this.exploitPrevention.getSystemProcessesMemoryProtectionStatus()}setSystemProcessesMemoryProtectionStatus(e){return this.exploitPrevention.setSystemProcessesMemoryProtectionStatus(e)}isExploitPreventionAllowed(){return this.permissionsCheckerService.checkFeatureAllowance(M.qK)}},fe=class{constructor(e){this.trace=e.get("TraceService"),this.passwordProtection=e.get("PasswordProtectionService"),this.permissionsCheckerService=e.get("PermissionsCheckerService")}getPasswordProtectionState(){return this.passwordProtection.getPasswordProtectionState()}setNewPassword(e){return this.passwordProtection.setNewPassword(e)}savePassword(e){return this.passwordProtection.savePassword(e)}getPassword(){return this.passwordProtection.getPassword()}verifyPassword({password:e}){return this.passwordProtection.verifyPassword(e)}changePassword({oldPassword:e,newPassword:t}){return this.passwordProtection.changePassword(e,t)}setShouldBePasswordSavedPerSession(e){this.passwordProtection.setShouldBePasswordSavedPerSession(e)}getShouldBePasswordStoredPerSession(){return this.passwordProtection.getShouldBePasswordStoredPerSession()}isPasswordProtectionAllowed(){return this.permissionsCheckerService.checkFeatureAllowance(M.eX)}};var we=i(37515);const be=class{constructor(e){this.trace=e.get("TraceService"),this.agreementsService=e.get("AgreementsService"),this.timeCounterService=e.get("TimeCounterService"),this.windowService=e.get("WindowService"),this.productStorage=e.get("ProductStorageService"),this.electron=e.get("electron"),this.uiRegistrationService=e.get("KartUiRegistrationService"),this.upgradeService=e.get("UpgradeService"),this.internalCacheService=e.get("InternalCacheService"),this.productIdentityService=e.get("ProductIdentityService")}isForceUpgrade(){return we.Z.notAccepted===this.agreementsService.getAcceptedAgreementsState()}_handleTfuInstallationRequest(e,t){this.electron.ipcMain.once(c.d_,((e,t)=>{const i=this.productIdentityService.getSessionId();this.uiRegistrationService.sendResponse(1,t.installationAction,(0,g.safeJsonStringify)({sessionId:i}))}))}subscribeOnTfuInstallationStatus(){const e={OnInstallationStarted:()=>{this.internalCacheService.setCacheValue("tfuIsInstallationInProgress",!0)},OnInstallationFinished:()=>this.internalCacheService.setCacheValue("tfuIsInstallationInProgress",!1),OnUninstallationStarted:()=>{},OnUninstallationFinished:()=>{}};this.upgradeService.subscribe(e)}};var ye=i(28103);const ke=class{constructor(e){this.trace=e.get("TraceService"),this.permissionsCheckerService=e.get("PermissionsCheckerService"),this.statisticsService=e.get("StatisticsService")}sendStatistics({source:e,action:t,value:i,useSessionGuid:r}){if(this.isStatisticsSendingAllowed()){const s=r?this.getSessionGuidByHtmlElementId(e):void 0;this.statisticsService.sendStatistics({source:e,action:t,value:i,sessionGuid:s})}}isStatisticsSendingAllowed(){return this.permissionsCheckerService.checkFeatureAllowance(M.cH)}getSessionGuidByHtmlElementId(e){const t={[ye.bCk]:A,[ye.Vq4]:A}[e];return t?this.statisticsService.getGuidRelatedToFeature(t):_.ZD}};var Te=i(71856),Ce=i(51436),Pe=i(89342);function Re(e,t){Ee(e,t),t.add(e)}function Ie(e,t,i){Ee(e,t),t.set(e,i)}function Ee(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Me(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var Ae=new WeakMap,xe=new WeakMap,Fe=new WeakSet,Le=new WeakSet,De=new WeakSet;function Be(){const e=Boolean(this.productStorage.get(ce));this.productIdentityService.isFirstLaunch()&&!e&&(this.productStateStatisticsService.setRegistrationGHEvent({data:{registrationFormShown:this._isMarketoFormShownInOlderAppVersions(),registered:this.isUserRegistered()},eventName:Ce.uI.initialRegistrationState}),this.setTargetingRegistrationPSEvent(),this.productStorage.set(ce,!0))}function Oe(){Me(this,De,Ue).call(this)&&this.setTargetingRegistrationPSEvent()}function Ue(){return this.productStorage.get(ae)!==this.userRegistrationService.getRawRegistrationFormType()}const We=class{constructor(e){Re(this,De),Re(this,Le),Re(this,Fe),Ie(this,Ae,{writable:!0,value:null}),Ie(this,xe,{writable:!0,value:void 0}),this.trace=e.get("TraceService"),this.electron=e.get("electron"),this.productStorage=e.get("ProductStorageService"),this.windowService=e.get("WindowService"),this.timeCounterService=e.get("TimeCounterService"),this.userRegistrationService=e.get("UserRegistrationService"),this.productIdentityService=e.get("ProductIdentityService"),this.externalSettingsService=e.get("ExternalSettingsService"),this.ipcService=e.get("IpcService"),this.productStateStatisticsService=e.get("ProductStateStatisticsService"),this.uiRegistrationService=e.get("KartUiRegistrationService"),this._THREE_HOURS=3,this._registrationStepDraftEvents={},Me(this,Fe,Be).call(this),Me(this,Le,Oe).call(this)}_isMarketoFormShownInOlderAppVersions(){const e=(0,g.safeJsonStringify)(this.timeCounterService.getIntervalInitTimes());return e.includes("showMarketoForm")||e.includes("openGuiForUserRegistration")}_isDuplicatedFailurePsEvent({eventName:e,message:t,result:i}){if([Ce.bx.noInternetErr,Ce.bx.apiFailErr].includes(t)){const r=(0,g.safeParseJson)(this.productStorage.get(oe))||{};return!!r[e]||(r[e]={message:t,result:i},this.productStorage.set(oe,(0,g.safeJsonStringify)(r)),!1)}return!1}setMarketoOnLoadPSEvent({eventName:e,message:t,result:i}){this._isDuplicatedFailurePsEvent({eventName:e,message:t,result:i})||this.productStateStatisticsService.setRegistrationGHEvent({data:{message:t,result:i},eventName:e})}setRegistrationStepDraftEvent(e){this._registrationStepDraftEvents[e.eventName]={...this._registrationStepDraftEvents[e.eventName],...e},this._registrationStepDraftEvents[e.eventName].timestamp||(this._registrationStepDraftEvents[e.eventName].timestamp=this.productStateStatisticsService.getCurrentTrustedDateTime()),this.productStorage.set(ne,(0,g.safeJsonStringify)(this._registrationStepDraftEvents))}setRegistrationStepPSEvent({eventName:e,data:t}){const{timestamp:i}=this._registrationStepDraftEvents[e];this.productStateStatisticsService.setRegistrationGHEvent({timestamp:i,eventName:e,data:{...t,closeTimestamp:this.productStateStatisticsService.getCurrentTrustedDateTime()}}),this.deleteRegistrationEventDrafts(),delete this._registrationStepDraftEvents[e]}sendIncompletePsRegistrationEvents(e){const t=(0,g.safeParseJson)(this.productStorage.get(ne))||{},i=t[Ce.uI.showStep1],r=t[Ce.uI.showStep2],s=this.productStateStatisticsService.getPreviousAliveTimestamp()||e;if(i){const{eventName:t,timestamp:r,fieldsState:n}=i;this.productStateStatisticsService.setRegistrationGHEvent({eventName:t,timestamp:r,data:{fieldsState:n,closeTimestamp:s,closeTrigger:e?Ce.Tf.closeUi:Ce.Tf.exitApp}})}if(r){const{eventName:t,timestamp:i,fieldsState:n}=r;this.productStateStatisticsService.setRegistrationGHEvent({eventName:t,timestamp:i,data:{fieldsState:n,closeTimestamp:s,closeTrigger:e?Ce.Tf.closeUi:Ce.Tf.exitApp}})}this.deleteRegistrationEventDrafts()}deleteRegistrationEventDrafts(){this.productStorage.delete(ne)}deleteDuplicatedRegistrationEvents(){this.productStorage.delete(oe)}subscribeDraftPSEventsOnMainWindowClose(){this.windowService.getMainWindow().once("close",(()=>{const e=this.productStateStatisticsService.getCurrentTrustedDateTime();this.sendIncompletePsRegistrationEvents(e)}))}getMarketoFormConfig(){return this.externalSettingsService.getMarketoFormConfig()}checkIsMarketoFormWasSubmitted(){return Boolean(this.productStorage.get("isMarketoWasSubmitted"))}markFormAsSubmitted(){this.productStorage.set("isMarketoWasSubmitted",!0)}scheduleUserRegistration(){const e=this.checkIsMarketoFormWasSubmitted(),t=this.isUserRegistrationEnabled(),i=this.isUserRegistered(),r=this.productStorage.get(se)||_.uL,s=this.userRegistrationService.getRegistrationSchedulerInterval();if(e||!t||i)this.deleteUserRegistrationSchedule(r);else{var n;r!==s&&this.deleteUserRegistrationSchedule(r),this.productStorage.set(se,s);const e="openGuiForUserRegistration",t=this.timeCounterService.getIntervalInitTimes(),i=this.timeCounterService.getDateNowAsHours(),o=null==t||null===(n=t[s])||void 0===n?void 0:n[e];o&&i-o>=s&&(this.deleteUserRegistrationSchedule(s),this.openGuiForUserRegistration()),this.timeCounterService.addTimeEventListener({typeOfEvent:"interval",hoursEvent:s,listener:this.openGuiForUserRegistration.bind(this),listenerLabel:e})}}deleteUserRegistrationSchedule(e){this.timeCounterService.deleteTimeEventListener({typeOfEvent:"interval",hoursEvent:e,listenerLabel:"openGuiForUserRegistration"})}subscribeGuiOnShowMarketoForm({spaCallbackChannel:e}){this.spaMarketoFormListener=this.ipcService.createSpaCallback(e)}openGuiForUserRegistration(){const{net:e}=this.electron,{marketoScriptUrl:t}=this.getMarketoFormConfig(),i=e.request(t);i.setHeader("Cache-Control","no-cache");const r=setTimeout((()=>{i.abort(),clearTimeout(r),this.trace.error("UserRegistrationLogic: openGuiForUserRegistration: request was aborted after 30sec")}),_.nU);i.on("response",(e=>{e.on("error",(e=>{this.trace.error(`UserRegistrationLogic: openGuiForUserRegistration: response: error event: ${e}`),clearTimeout(r)})),e.on("data",(()=>{r&&clearTimeout(r)})),e.on("end",(()=>{const e=this.windowService.getMainWindow();null!=e&&e.isVisible()?this.spaMarketoFormListener():e?e.on("show",(()=>{this.spaMarketoFormListener()})):this.windowService.createMainWindow().on("show",(()=>{this.spaMarketoFormListener()}))}))})),i.on("error",(e=>{this.trace.error(`UserRegistrationLogic: openGuiForUserRegistration: request: error while request: ${e}. Main window won't be shown!`)})),i.end()}isUserRegistered(){return this.userRegistrationService.isUserRegistered()}applyRegistrationCode(e){return this.userRegistrationService.applyRegistrationCode(e)}registerUser(e){return this.userRegistrationService.register(e)}getMarketoUserInput(){return(0,g.safeParseJson)(this.productStorage.get(re))||{}}saveMarketoUserInput(e){this.productStorage.extendValue(re,e)}deleteMarketoUserInput(){this.productStorage.delete(re)}isUserRegistrationEnabled(){return this.externalSettingsService.isUserRegistrationEnabled()}showFailUploadRegistrationFormBalloon(){}getRegistrationFormType(){return this.userRegistrationService.getRegistrationFormTypeSafe()}_prepareMarketoData(){const e=this.getMarketoUserInput()||{},{firstName:t,lastName:i,email:r,companyName:s,country:n,phone:o,numOfPc:a,province:c,isPrivacyPolicyAccepted:l}=e,{fieldIds:d}=this.getMarketoFormConfig(),u=this.getRegistrationCode(),h=this.getRegistrationFormType(),p=this.productIdentityService.getPpcsId();return{[d.companyFieldId]:s||t,[d.countryFieldId]:(null==n?void 0:n.value)||n||"Afghanistan",[d.stateFieldId]:(null==c?void 0:c.value)||c,[d.emailFieldId]:r,[d.firstNameFieldId]:t,[d.lastNameFieldId]:i,[d.subscriptionSingleOptInFieldId]:l,[d.numberOfPCFieldId]:a||_.OL,[d.phoneFieldId]:o,[d.authCode]:u,[d.kartCustomerType]:h===Pe.eu?"bonus":"default",[d.ppcsId]:p}}submitMarketoFormInHiddenWindow(){if(n(this,Ae))return w.MR;let e;o(this,Ae,this.windowService.createBrowserWindow(Z.B2));const t=()=>{this.timeCounterService.addTimeEventListener({typeOfEvent:"interval",hoursEvent:this._THREE_HOURS,listener:this.submitMarketoFormInHiddenWindow.bind(this),listenerLabel:"submitMarketoFormInHiddenWindow"})},i=this.getMarketoFormConfig(),r=()=>{var e,t;null===(e=n(this,Ae))||void 0===e||null===(t=e.webContents)||void 0===t||t.send(f.h6,{type:"load-marketo",message:i})},s=()=>{var e,t;const i={eventName:Ce.uI.formLoadingSilent,message:Ce.bx.success,result:!0};this.setMarketoOnLoadPSEvent(i);const r=this._prepareMarketoData();null===(e=n(this,Ae))||void 0===e||null===(t=e.webContents)||void 0===t||t.send(f.h6,{type:"submit-marketo",message:r})},a=e=>{this.sendHttpRequest({url:i.marketoFormUrl}).then((()=>{const t={eventName:e,message:Ce.bx.apiFailErr,result:!1};this.setMarketoOnLoadPSEvent(t)})).catch((()=>{const t={eventName:e,message:Ce.bx.noInternetErr,result:!1};this.setMarketoOnLoadPSEvent(t)})),t(),u()},c=()=>{const e={eventName:Ce.uI.scriptLoadingSilent,message:Ce.bx.success,result:!0};this.setMarketoOnLoadPSEvent(e)},l=()=>{const t={eventName:Ce.uI.formSubmission,message:Ce.bx.success,result:!0};this.setMarketoOnLoadPSEvent(t),this.markFormAsSubmitted(),this.deleteMarketoUserInput(),this.productStorage.delete(ie),this.deleteDuplicatedRegistrationEvents(),this.completeRegistrationProcess(),this.timeCounterService.deleteTimeEventListener({typeOfEvent:"interval",hoursEvent:this._THREE_HOURS,listenerLabel:"submitMarketoFormInHiddenWindow"}),clearTimeout(e),u()},d=(t,{type:i,message:n})=>{switch(i){case"ready":r();break;case"request-fields-data":s();break;case"script-loading-success":c();break;case"script-loading-fail":a(Ce.uI.scriptLoadingSilent);break;case"form-loading-fail":a(Ce.uI.formLoadingSilent);break;case"submission-started":e=setTimeout((()=>{a(Ce.uI.formSubmission)}),_.nU);break;case"submission-completed":l()}},u=()=>{var e;this.electron.ipcMain.removeListener(f.h6,d),null===(e=n(this,Ae))||void 0===e||e.close(),o(this,Ae,null)};this.electron.ipcMain.on(f.h6,d)}isMarketoWaitingSubmission(){return this.productStorage.get(ie)}setMarketoWaitingSubmission(e){this.productStorage.set(ie,e)}checkAndSubmitMarketoSilent(){this.isMarketoWaitingSubmission()&&this.submitMarketoFormInHiddenWindow()}subscribeMarketoOnMainWindowClose(){this.windowService.getMainWindow().once("close",(()=>{this.isMarketoWaitingSubmission()?this.checkAndSubmitMarketoSilent():this.setIsRegistrationInProgress(!1)}))}getCurrentCountryName(e){const t=this.userRegistrationService.getRegion(),i=this.externalSettingsService.getCountryCodesMapping();if(null!=i&&i[t]){var r;const s=i[t];return null===(r=e.find((e=>s.includes(e.value))))||void 0===r?void 0:r.value}return _.ZD}showAboutFreeLessonModal(){this.windowService.getModalWindowById(v)||this.windowService.createModalWindow({id:v,width:624,options:{modal:!1,parent:null}})}getRegistrationCode(){return this.userRegistrationService.getRegistrationCode()}async sendHttpRequest({url:e,timeout:t=_.nU}){const{net:i}=this.electron,r=i.request(e);r.setHeader("Cache-Control","no-cache");const s=setTimeout((()=>{r.abort(),clearTimeout(s),this.trace.error("UserRegistrationLogic: sendHttpRequest: request was aborted after 30sec")}),t);return new Promise(((e,t)=>{r.on("response",(i=>{i.on("error",(e=>{this.trace.error(`UserRegistrationLogic: sendHttpRequest: response: error event: ${e}`),clearTimeout(s),t(e)})),i.on("data",(()=>{s&&clearTimeout(s)})),i.on("end",(()=>{e()}))})),r.on("error",(e=>{this.trace.error(`UserRegistrationLogic: sendHttpRequest: request: error while request: ${e}`),t(e)})),r.end()}))}setIsRegistrationInProgress(e){this.userRegistrationService.setIsRegistrationInProgress(e)}deleteSavedCurrentFormType(){this.userRegistrationService.deleteSavedCurrentFormType()}completeRegistrationProcess(){this.setIsRegistrationInProgress(!1),this.deleteSavedCurrentFormType()}subscribeOnRegistrationSettingsChanges(){this.uiRegistrationService.setRegistrationSettingsUpdatedCallback((()=>{this.scheduleUserRegistration(),this.setTargetingRegistrationPSEvent()}))}setTargetingRegistrationPSEvent(){if(!this.userRegistrationService.isUserRegistered()){const e=this.productIdentityService.getEdition()===I.H?Te.Wx:Te.ov,t=this.userRegistrationService.getFeatureFlagValue(e),i=this.userRegistrationService.getRegistrationSchedulerInterval(),r=this.userRegistrationService.getRawRegistrationFormType();this.productStateStatisticsService.setRegistrationGHEvent({data:{inTarget:t!==_.ZD,freq:i,formType:r},eventName:Ce.uI.targeting})}}setSpaRegistrationFormTypeUpdateSubscriber({spaCallbackChannel:e}){o(this,xe,this.ipcService.createSpaCallback(e))}subscribeOnRegistrationFormTypeUpdate(){this.uiRegistrationService.addFeatureFlagUpdatedCallback((()=>{Me(this,De,Ue).call(this)&&("function"==typeof n(this,xe)&&n(this,xe).call(this),this.setTargetingRegistrationPSEvent())}))}},Ne=class{constructor(e){this.trace=e.get("TraceService"),this.dumpReportsService=e.get("DumpReportsService"),this.agreementsService=e.get("AgreementsService"),this.electron=e.get("electron")}subscribeOnDumpReportReady(){const e={onDumpReportChanged:e=>{this._subscribeOnDeclineReportSending(),this._subscribeOnSendDumpReport()},onEtlReportChanged:e=>{this._subscribeOnDeclineEtlReportSending(),this._subscribeOnSendEtlReport()}};this.dumpReportsService.subscribe(e)}_subscribeOnDeclineReportSending(){this.electron.ipcMain.on(c.yh,(()=>{this.dumpReportsService.declineProductReport()}))}_subscribeOnSendDumpReport(){this.electron.ipcMain.on(c._t,((e,t)=>{const i=this.agreementsService.getAgreements(),r={...this.agreementsService.getAllAcceptanceFacts().find((e=>e.version===i[pe.Z.rdp].version)),factModiticationDate:Date.now(),accepted:!0};this.agreementsService.registerAcceptanceFact(r),this.dumpReportsService.sendDumpReport(t.issueText)}))}_subscribeOnDeclineEtlReportSending(){this.electron.ipcMain.on(c.yq,(()=>{this.dumpReportsService.declineEtlReport()}))}_subscribeOnSendEtlReport(){this.electron.ipcMain.on(c.lA,(e=>{const t=this.agreementsService.getAgreements(),i={...this.agreementsService.getAllAcceptanceFacts().find((e=>e.version===t[pe.Z.rdpEtl].version)),factModiticationDate:Date.now(),accepted:!0};this.agreementsService.registerAcceptanceFact(i),this.dumpReportsService.sendEtlReport()}))}},Ve="uiUsage";var ze=i(19536);const je=class{constructor(e){this.trace=e.get("TraceService"),this.productStateStatisticsService=e.get("ProductStateStatisticsService"),this.productStorageService=e.get("ProductStorageService"),this.ipmService=e.get("IpmService"),this.userRegistrationService=e.get("UserRegistrationService"),this.externalSettingsService=e.get("ExternalSettingsService")}sendPreviousMainWindowProductStateEvents(){this.productStateStatisticsService.sendPreviousProductStateEvent(!1)}sendOldPSEventsAndScheduleAliveTimestamp(){this.productStateStatisticsService.sendPreviousProductStateEvent(!0),this._scheduleProductAliveTimestamp()}_scheduleProductAliveTimestamp(){const e=this.productStorageService.get($),t=()=>this.productStorageService.set($,this.productStateStatisticsService.getCurrentTrustedDateTime());this.productStateStatisticsService.setPreviousAliveTimestamp(e),t(),setInterval(t,5*_.N5)}sendAdditionalInfoUiEvent(e){this.productStateStatisticsService.setAdditionalInfoEvent(Ve,e)}setAdditionalInfoRegistrationEvent(e){const t={...e,dateTime:this.productStateStatisticsService.getCurrentTrustedDateTime()};this.productStateStatisticsService.setRegistrationUsageEvent(t)}setAdditionalInfoClickEvent(e){const t={...e,dateTime:this.productStateStatisticsService.getCurrentTrustedDateTime()};this.productStateStatisticsService.setAdditionalInfoEvent("click",t)}getUserSidIfAllowed(){return this.productStateStatisticsService.getSystemUserIdIfAllowed()}setAdditionalInfoExperimentEvent(e){this.productStateStatisticsService.setAdditionalInfoExperimentEvent(e)}getExperimentUsageEvent(){return this.productStateStatisticsService.getExperimentUsageEvent()}saveDraftUiUsageEvent(e){const t={id:e,data:_.ZD,openDateTime:this.productStateStatisticsService.getCurrentTrustedDateTime(),closeDateTime:null};this.productStorageService.extendValue(Y,{[e]:t})}sendUiUsageEvent(e){const t=(0,g.safeParseJson)(this.productStorageService.get(Y))||{};this.sendAdditionalInfoUiEvent({...t[e],closeDateTime:this.productStateStatisticsService.getCurrentTrustedDateTime()}),this.productStateStatisticsService.deleteCachedWindowsUiUsageEventByWinId(e)}saveMarketoFormSnapshot(e){const t={...e,dateTime:this.productStateStatisticsService.getCurrentTrustedDateTime()};this.productStorageService.set(X,(0,g.safeJsonStringify)(t))}deleteMarketoFormSnapshot(){this.productStorageService.delete(X)}resendRegistrationUsageEvent(){const e=this.productStorageService.get(Q),t=this.userRegistrationService.isUserRegistered();if(e||!t)return w.MR;const i=this.productStateStatisticsService.getLastRegistrationEvent();if(t&&!e&&!i){const e={type:ze.wM,dateTime:this.productStateStatisticsService.getCurrentTrustedDateTime(),errorCode:w.MR,errorMessage:_.ZD,formId:null,formSeqNumber:null,filledFieldIds:null,unfilledFieldIds:null,invalidFieldIds:null};this.productStateStatisticsService.setRegistrationUsageEvent(e),this.productStorageService.set(Q,!0)}}addEventForKesMigration({eventName:e,data:t}){this.productStateStatisticsService.addEventForKesMigration(e,t)}},Ge=class{constructor(e){this.productStorageService=e.get("ProductStorageService"),this.trace=e.get("TraceService"),this.externalSettingsService=e.get("ExternalSettingsService"),this.productIdentityService=e.get("ProductIdentityService"),this.windowService=e.get("WindowService"),this._isRegistrationMuted=!1}setOnboardingInfo(e){this.productStorageService.set(J,(0,g.safeJsonStringify)(e))}getOnboardingInfo(){const e=this.externalSettingsService.isOnboardingEnabled(),t=(0,g.safeParseJson)(this.productStorageService.get(J))||{};return{...t,isOnboardingFirstLaunch:t.isOnboardingFirstLaunch??!0,isOnboardingFirstStop:t.isOnboardingFirstStop??!0,isEnabled:e}}isCleanInstallation(){return this.productIdentityService.isCleanInstallation()}muteBalloons(){}unmuteBalloons(){}subscribeBlOnCloseMainWindow(){this.windowService.getMainWindow().once("close",(()=>{const e=this.getOnboardingInfo();this.setOnboardingInfo({...e,isInProgress:!1,isOnboardingFirstStop:!1}),this.unmuteNotifications()}))}isRegistrationFormMuted(){return this._isRegistrationMuted}muteNotifications(){this._isRegistrationMuted=!0,this.muteBalloons()}unmuteNotifications(){this._isRegistrationMuted=!1,this.unmuteBalloons()}};var qe=i(66624),He=i(8853),Ke=i(43147),Ze=i(81053),$e=i(72728),Je=i(12416),Ye=i(64856);function Xe(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var Qe=new WeakSet;class et extends Ye.default{constructor(e,t,i){var r,s;super(e,t,i),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,s=Qe),s.add(r),this.statisticsService=i.get("StatisticsService"),this.localizationService=i.get("LocalizationService"),this.upgradeService=i.get("UpgradeService"),this.productIconClickNotifier=t.getProductIconClickNotifier(),this.windowsInteraction=t.getWindowsInteraction(),this.productStateStatisticsService=i.get("ProductStateStatisticsService"),this.productStorageService=i.get("ProductStorageService"),this.electron=e,this._isGuiToBeRelaunched=!1,this._modalWindows={}}_resetWindowZoom(e){null==e||e.webContents.setZoomFactor(_.OL),null==e||e.webContents.setZoomLevel(_.Ds)}createMainWindow(){if(this.mainWindow)return this.mainWindow;let e=new this.BrowserWindow({width:800,height:600,webPreferences:{nodeIntegration:!0,sandbox:!1,contextIsolation:!1,disableDialogs:!0},frame:!1,resizable:!1,show:!1,alwaysOnTop:!0});this.mainWindow=e,Xe(this,Qe,tt).call(this),e.once("ready-to-show",(()=>this._resetWindowZoom(e))),e.on("show",(()=>e.setAlwaysOnTop(!1)));const t=`file://${this.app.getAppPath()}/index.html`;return e.loadURL(t),e.once("closed",(()=>{e=null,this.mainWindow=null})),e.on("minimize",(()=>{this.statisticsService.sendStatisticsIfAllowed({source:"mainWindow",action:"minimize"})})),e.on("restore",(()=>{this._resetWindowZoom(e),this.statisticsService.sendStatisticsIfAllowed({source:"mainWindow",action:"restore"})})),e}showMainWindowAfterCreate(){this.mainWindow.show(),this.statisticsService.sendStatisticsIfAllowed({source:"mainWindow",action:"open"})}getModalWindowById(e){return this._modalWindows[e]}createModalWindow({id:e,data:t={},width:i,options:r={}}){if(!e)throw new Error(`WindowService: createModalWindow: invalid input params: id=${e}`);const s=i||352,{workAreaSize:n}=this.electron.screen.getPrimaryDisplay(),o=Math.ceil((n.width-s)/2),a=Math.ceil((n.height-100)/2);this._modalWindows[e]=new this.BrowserWindow({skipTaskbar:!0,modal:!0,show:!1,x:o,y:a,width:s,height:100,webPreferences:{nodeIntegration:!0,sandbox:!1,contextIsolation:!1},frame:!1,resizable:!1,alwaysOnTop:!0,minimizable:!1,...r});const c=`file://${this.app.getAppPath()}/balloons/index.html?id=${e}`,l=(t,{height:i})=>{const r=Math.ceil(i),a=Math.ceil((n.height-r)/2);this._modalWindows[e].setSize(s,r),this._modalWindows[e].setPosition(o,a)},d=()=>{const t={id:`balloon_${b[e].name}`,data:_.ZD,openDateTime:this.productStateStatisticsService.getCurrentTrustedDateTime(),closeDateTime:null};var i;Xe(this,Qe,tt).call(this),this.statisticsService.sendStatisticsIfAllowed({source:`balloon_${b[e].name}`,action:"show"}),this.productStorageService.extendValue(Y,{[e]:t}),r.alwaysOnTop||null===(i=this._modalWindows[e])||void 0===i||i.setAlwaysOnTop(!1)};return this.electron.ipcMain.once(`resize-${e}-window`,l),this.electron.ipcMain.on(`spa${e}-ready-to-show`,(()=>{try{this._modalWindows[e].webContents.send(f.cv,t)}catch(e){}})),this._modalWindows[e].once("ready-to-show",(()=>this._resetWindowZoom(this._modalWindows[e]))),this._modalWindows[e].once("resize",(()=>{this._modalWindows[e].once("show",d),this._modalWindows[e].show()})),this._modalWindows[e].once("close",(()=>{this.electron.ipcMain.removeListener(`resize-${e}-window`,l),this.statisticsService.sendStatisticsIfAllowed({source:`balloon_${b[e].name}`,action:"close"});const t=(0,g.safeParseJson)(this.productStorageService.get(Y)),i=null==t?void 0:t[e],r={id:`balloon_${b[e].name}`,data:i?_.ZD:"no event",openDateTime:(null==i?void 0:i.openDateTime)||null,closeDateTime:this.productStateStatisticsService.getCurrentTrustedDateTime()};this.productStateStatisticsService.setAdditionalInfoEvent(Ve,r),this.productStateStatisticsService.deleteCachedWindowsUiUsageEventByWinId(e),delete this._modalWindows[e],Xe(this,Qe,tt).call(this)})),this._modalWindows[e].loadURL(c),this._modalWindows[e]}setIsGuiToBeRelaunched(e){this._isGuiToBeRelaunched=e}getIsGuiToBeRelaunched(){return this._isGuiToBeRelaunched}relaunchGui(){this.upgradeService.refreshResourcesSymlink(),this.electron.app.relaunch({args:process.argv.slice(1).concat(["--relaunch","--minimized-in-tray"])}),this.electron.app.exit()}createBalloon(e){var t;const{workAreaSize:i}=this.electron.screen.getPrimaryDisplay();let r=new this.BrowserWindow({skipTaskbar:!0,show:!1,frame:!1,resizable:!1,alwaysOnTop:!0,webPreferences:{nodeIntegration:!0,sandbox:!1,contextIsolation:!1},sandbox:!0,minimizable:!1});const s=`file://${this.app.getAppPath()}/balloons/index.html?id=${e}`,n=(e,{height:t,width:s})=>{const n=Math.ceil(t),o=Math.ceil(s),a=Math.ceil(i.height)-n-25,c=Math.ceil(i.width)-o-25;r.setResizable(!0),r.setSize(o,n),r.setResizable(!1),r.setPosition(c,a)};return r.once("ready-to-show",(()=>this._resetWindowZoom(r))),r.once("closed",(()=>{var t;null===(t=this.electron.ipcMain)||void 0===t||t.removeListener(`resize-${e}-window`,n),r=null})),r.loadURLWithPath=async()=>{try{await r.loadURL(s)}catch(e){}},null===(t=this.electron.ipcMain)||void 0===t||t.on(`resize-${e}-window`,n),r.once("resize",(()=>{r.setAlwaysOnTop(!0,"screen-saver"),r.show()})),r}subscribeOnProductIconClick(){const e={onIconClick:()=>{this.showMainWindow()}};this.productIconClickNotifier.subscribe(e)}createBrowserWindow(e,t={}){let i=new this.BrowserWindow({width:100,height:100,webPreferences:{nodeIntegration:!0,sandbox:!1,contextIsolation:!1,disableDialogs:!0},frame:!1,resizable:!1,show:!1,alwaysOnTop:!1,...t});const r=`file://${this.app.getAppPath()}/${e}`;return i.loadURL(r),i.once("closed",(()=>i=null)),i}minimizeModalWindowById(e){this.getModalWindowById(e).minimize()}}function tt(){const e=this.getMainWindow(),t=Object.keys(this._modalWindows).some((e=>{var t;return![v,m].includes(parseInt(e,10))&&(null===(t=this._modalWindows[e])||void 0===t?void 0:t.isVisible())}));null==e||e.setEnabled(!t)}const it=et,rt=class{constructor(e,t,i){this.proxySettingsController=t.getProxySettingsController(),this.memoryCryptor=t.getMemoryCryptor(),this.ksnInfoDirectProvider=t.getKsnInfoDirectProvider(),this.trace=i.get("TraceService")}setProxySettings(e){this.proxySettingsController.setProxySettings(e)}getProxySettings(){let e={};return this.proxySettingsController.getProxySettings(e),e.value}checkProxy(e){const t={noDataAvailable:()=>{},handleCloudInfo:()=>{},setLastResultCode:t=>{e(0===t)}};let i=this.ksnInfoDirectProvider.asyncGetDirect(t);if(0===i)return i}transformStringToUnicode(e){let t=[].map.call(e,(e=>e.charCodeAt(0)));return t.push(0),t}encryptString(e){const t=[];return this.memoryCryptor.encryptString(e,t),t}decryptString(e){const t={};return this.memoryCryptor.decryptString(e,t)===w.MR?t.value:_.ZD}},st=class{constructor(e,t,i){this.fullScreenNotifier=t.getProductFullScreenChangeNotifier(),this.trace=i.get("TraceService")}subscribeOnScreenModeChange(e){this.fullScreenNotifier.subscribe(e)}getScreenMode(){const e={};return this.fullScreenNotifier.getState(e)!==w.MR?T.w.WINDOW:e.value}},nt=class{constructor(e,t,i){this.ksnInfoProvider=t.getKsnInfoProvider(),this.trace=i.get("TraceService"),this.ksnTransport=t.getKsnTransport()}getKsnInfo(e){const t={noDataAvailable:()=>{},handleCloudInfo:t=>{let i={allowed:t.m_whiteApplications,malware:t.m_malwareApplications,inProcessing:t.m_totalFiles};e(!1,i)},setLastResultCode:()=>{}};this.ksnInfoProvider.asyncGet(t)}sendFeedback(e){this.ksnTransport.sendFeedback(e)}},ot=class{constructor(e,t,i){this.api=t.getForbiddenApps(),this.trace=i.get("TraceService")}getAppList(){let e={};return 0!==this.api.getAppList(e)?{}:e&&e.value?e.value:{}}addAllowedApp(e){return this.api.addAllowedApp(e)}removeAllowedApp(e){return this.api.removeAllowedApp(e)}removeForbiddenApp(e){return this.api.removeForbiddenApp(e)}addForbiddenApp(e){return this.api.addForbiddenApp(e)}};var at=i(83);const ct=class{constructor(e,t,i){this.reportProvider=t.getThreatReportProvider(),this.activityReport=t.getActivityReport(),this.trace=i.get("TraceService"),this.malwareScan=t.getMalwareScan(),this.malwareScanEventSubscription=t.getMalwareScanEventSubscription(),this.productStorageService=i.get("ProductStorageService"),this.downloadScan=t.getDownloadScan(),this.externalSettingsService=i.get("ExternalSettingsService"),this.permissionsCheckerService=i.get("PermissionsCheckerService")}getThreats(e,t){const i={};return this.reportProvider.getReport(e,t-e+_.OL,i)===w.MR?i.value.events:[]}getThreatsReportSize(){let e={};return this.reportProvider.getReportSize(e)!==w.MR?_.Ds:e.value}clearReport(){this.reportProvider.clearReport()}subscribeOnMalwareScan(e){return this.malwareScanEventSubscription.subscribe(e)}startMalwareScan(){return this.malwareScan.start()}stopMalwareScan(){return this.malwareScan.stop()}getLastMalwareScanInfo(){const e={},t={isScanWasInProgressWhileRequest:this.malwareScan.getLastState(e)===at.s3,...e.value};return t.statistic.totalKsnFailedScanFiles=e.value.statistic.statisticsByFolder.reduce(((e,t)=>e+t.ksnFailedScanFiles),_.Ds),t}getActivityReport(e){const t={};return this.activityReport.getReport(e,t)!==w.MR?{}:t.value}getIsDownloadScanBalloonsEnabled(){return this.productStorageService.get(te)??!0}setIsDownloadScanBalloonsEnabled(e){this.productStorageService.set(te,e)}startDownloadsScan(){this.downloadScan.run()}stopDownloadsScan(){this.downloadScan.stop()}changeDownloadsScanState(){this.isDownloadsScanEnabled()?this.startDownloadsScan():this.stopDownloadsScan()}getDownloadsScanInfo(){const e={};return this.downloadScan.getInfo(e)===w.MR?e.value:{}}isDownloadsScanEnabled(){const e=this.externalSettingsService.isDownloadsScanEnabled(),t=this.getDownloadsScanInfo(),i=this.permissionsCheckerService.isFeatureEnabled(Te.F7);return t.result===w.MR&&!!i&&e}addEventWithoutNotification(e){this.reportProvider.addEventWithoutNotification(e)}},lt=class{constructor(e,t,i){this.threatNotificationsSubscription=t.getThreatNotificationsSubscription(),this.trace=i.get("TraceService"),this.ksnFileReputation=t.getKsnFileReputationRequestSubscription()}subscribe(e){const t={onEvent:t=>(e(t),w.MR)};this.threatNotificationsSubscription.subscribe(t)}unsubscribe(){}subscribeOnDownloadsScan(e){const t={onDownloadScanStatusChanged:(t,i)=>(null==e||e(t,i),w.MR),onKsnFileReputationRequestStatusChanged:()=>{}};this.ksnFileReputation.subscribe(t)}},dt=class{constructor(e,t,i){this.userModeSettings=t.getUserModeSettingsProvider(),this.mailController=t.getMailController(),this.report=t.getThreatReportProvider(),this.threatReportService=i.get("ThreatReportService"),this.threatService=i.get("ThreatService"),this.trace=i.get("TraceService")}getMailSettings(){let e={};return 0!==this.userModeSettings.getMailSettings(e)?{}:e.value}setMailSettings(e){this.userModeSettings.setMailSettings(e)}sendReport(e,t){const i={onCompleted:(e,i)=>{t(e,i)}};this.mailController.sendMail(e,i)}sendTestEmail(e,t){const i={onCompleted:(e,i)=>{t(e,i)}};this.mailController.sendTestMail(e,i)}},ut=class{constructor(e,t,i){this.userModeSettings=t.getUserModeSettingsProvider(),this.trace=i.get("TraceService")}getUserMode(){let e={};if(0===this.userModeSettings.getUserMode(e))return e.value}setUserMode(e){this.userModeSettings.setUserMode(e)}},ht=class{constructor(e,t,i){this.userModeSettings=t.getUserModeSettingsProvider(),this.threatReportSenderProvider=t.getThreatReportSenderProvider(),this.trace=i.get("TraceService")}setThreatsReportSettings(e){let{sender:t,schedule:i}=e,r={mode:i.scheduleMode,day:i.day,hours:i.hours,minutes:i.minutes};return this.userModeSettings.setThreatsReportSettings(t,r)}getThreatsReportSettings(){const e={},t={};return this.userModeSettings.getThreatsReportSettings(e,t)===w.MR?{sender:e.value,schedule:{scheduleMode:t.value.mode,day:t.value.day,hours:t.value.hours,minutes:t.value.minutes}}:{sender:{},schedule:{}}}getReportOnDetectSetting(){const e={};return this.threatReportSenderProvider.getSettings(e)===w.MR&&e.value.reportOnDetectEnabled}setReportOnDetectSetting(e){const t=this.threatReportSenderProvider.setSettings({reportOnDetectEnabled:e});return t===w.MR?w.MR:t}},pt=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.environment=t.getEnvironment()}expandEnvironmentVar(e){const t={};return this.environment.expandEnvironmentVars(e,t)===w.MR?t.value:void 0}},gt=class{constructor(e,t,i){let{shell:r}=e;this.api=r,this.trace=i.get("TraceService")}openExternal(e){return this.api.openExternal(e)}openItem(e){return this.api.openItem(e)}},vt=class{constructor(e,t,i){this.productStorage=t.getProductStorage(),this.trace=i.get("TraceService")}get(e){const t={};return this.productStorage.getValue(e,t)===w.MR?t.value:void 0}set(e,t){this.productStorage.setValue(e,t)}delete(e){this.productStorage.delete(e)}extendValue(e,t){const i=this.get(e),r=Array.isArray(t)?[]:{},s=(0,g.safeParseJson)(i)||r;return Array.isArray(s)&&Array.isArray(t)?(this.set(e,(0,g.safeJsonStringify)([...s,...t])),w.MR):Array.isArray(s)&&!Array.isArray(t)?(this.set(e,(0,g.safeJsonStringify)([...s,t])),w.MR):"object"==typeof s?(this.set(e,(0,g.safeJsonStringify)({...s,...t})),w.MR):void 0}},mt=class{constructor(e,t,i){this.environmentVarsService=i.get("EnvironmentVarsService"),this.productIdentityService=i.get("ProductIdentityService"),this.shell=i.get("ShellService"),this.updateService=i.get("UpdateService"),this.trace=i.get("TraceService"),this.ipmService=i.get("IpmService")}getGetPremiumLink(e){const t=e=>{const t=this.environmentVarsService.expandEnvironmentVar(z.Fe);return e.replace("{version}",t)},i=e=>{const t=this.environmentVarsService.expandEnvironmentVar(z.k3),i=this.ipmService.getFeatureName();return e.replace("{rebranding_code}",i||t)},r=e=>{const t=this.environmentVarsService.expandEnvironmentVar(z.Ge);return e.replace("{PpcsId}",t)},s=e=>{const t=this.productIdentityService.getMachineId();return e.replace("{PcId}",t)},n=e=>{const t=this.productIdentityService.getLocalization();return e.replace("{localization}",t.toLowerCase())};return((e,{actItem:o,type:a})=>(e=((e,t)=>e.replace("{action}",t))(e,o),e=t(e),e=i(e),e=r(e),e=s(e),e=((e,t)=>e.replace("{type}",`${t||"buy"}`))(e=n(e),a),e))(this.environmentVarsService.expandEnvironmentVar(z.I_),e)}getInterceptorLink(e){const t=_.ZD,i=this.updateService.getProductHotfix(),r=this.environmentVarsService.expandEnvironmentVar(z.Fe),s=this.environmentVarsService.expandEnvironmentVar(z.vn).toLowerCase(),n=this.productIdentityService.getLocalization().toLowerCase(),o=this.environmentVarsService.expandEnvironmentVar(z.k3);return`https://click.kaspersky.com/?hl=${n}${[_.ZD,_.kf].includes(o)?_.ZD:`&customization=${o}`}&link=${e}&syst=${t}&pid=${s}&version=${r}&hotfix=${i}`}getExtendedFeedbackLink(){const e=this.environmentVarsService.expandEnvironmentVar(z.Fe),t=this.environmentVarsService.expandEnvironmentVar(z.Ge),i=this.productIdentityService.getMachineId(),r=this.environmentVarsService.expandEnvironmentVar(z.k3),s=this.ipmService.getFeatureName()||r;return`https://redirect.kaspersky.com/sales?act-pid=${this.environmentVarsService.expandEnvironmentVar(z.vn).toLowerCase()}&act-pv=${e}&act-local=${this.productIdentityService.getLocalization().toLowerCase()}&customization=${s}&ppcs-id=${t}&pcid=${i}&act-item=kart-survey-feedback&type=feedback&rpe=1`}},St=class{constructor(e,t,i){this.productController=t.getProductController(),this.productInfoProvider=t.getProductInfoProvider(),this.windowsInteraction=t.getWindowsInteraction(),this.trace=i.get("TraceService"),this.environmentVarsService=i.get("EnvironmentVarsService"),this.productStorageService=i.get("ProductStorageService"),this.updateService=i.get("UpdateService"),this._isFirstLaunch=!0,this._initializeFirstLaunchState(),this._getProductInfo(),this._getCurrentDirectory(),this._setSessionId()}getMachineId(){return this.environmentVarsService.expandEnvironmentVar(z.Ph)}getInstallationId(){return this.environmentVarsService.expandEnvironmentVar(z.in)}_getProductInfo(){let e={};if(0!==this.productInfoProvider.getInfo(e))return{};const{isDebugMode:t,isSpectronEnabled:i,ppcsId:r,edition:s,productLocalization:n,appId:o}=e.value;this._isDebugMode=t,this._isSpectronEnabled=i,this._ppcsId=r,this._edition=s,this._localization=n,this._appId=o}refreshPpcsIdInfo(){this._ppcsId=this.environmentVarsService.expandEnvironmentVar(z.Ge)}_getCurrentDirectory(){let e={};if(0!==this.windowsInteraction.getCurrentDirectory(e))return"";this._currentDirectory=e.value}isDebugMode(){return this._isDebugMode}getSpectronEnabled(){return this._isSpectronEnabled}getPpcsId(){return this._ppcsId}getEdition(){return this._edition}getLocalization(){return this._localization}getCurrentDirectory(){return this._currentDirectory}isCleanInstallation(){return Boolean(Number(this.environmentVarsService.expandEnvironmentVar(z.ix)))}getSystemSupportedStatus(){const e={};return this.productController.isSystemSupported(e)!==w.MR||e.value}isUndocBalloonNeeded(){const e={};return this.productController.isUndocBalloonNeeded(e)!==w.MR||e.value}setElectronVersion(e){this._electronVersion=e}getElectronVersion(){return this._electronVersion}_setSessionId(){this._sessionId=this.windowsInteraction.getSessionId()}getSessionId(){return this._sessionId}getAppId(){return this._appId}isHiberbootEnabled(){return this.windowsInteraction.isHiberbootEnabled()}_initializeFirstLaunchState(){const e=this.productStorageService.get(ee)||_.ZD,t=`${this.environmentVarsService.expandEnvironmentVar(z.l4)}${this.updateService.getProductHotfix()}`;this._isFirstLaunch=e!==t}isFirstLaunch(){return this._isFirstLaunch}setIsFirstLaunch(e){this._isFirstLaunch=e}},_t=class{constructor(e,t,i){this.callbacks={},this.networkConnectionEventsSubscription=t.getNetworkConnectionEventsSubscription(),this.trace=i.get("TraceService"),this.switchCallbacks()}setOnConnectionChangedCallback(e){this.callbacks.onConnectionChanged=e}switchCallbacks(){this.networkConnectionEventsSubscription.subscribe({connectionChanged:e=>{if(!e)return;let t=e.connectionStatus;this.callbacks.onConnectionChanged&&"function"==typeof this.callbacks.onConnectionChanged&&this.callbacks.onConnectionChanged(t)}})}},ft=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.forbiddenAddresses=t.getForbiddenAddresses(),this.protectionSettings=t.getProtectionSettingsProvider()}getAllowedAddressesList(){let e={};var t;return this.forbiddenAddresses.getAddressList(e)===w.MR&&(null===(t=e.value)||void 0===t?void 0:t.allowed)||[]}getBlockedAddressesList(){let e={};var t;return this.forbiddenAddresses.getAddressList(e)===w.MR&&(null===(t=e.value)||void 0===t?void 0:t.blocked)||[]}addAllowedAddress(e){return this.forbiddenAddresses.addAllowedAddress(e)}removeAllowedAddress(e){return this.forbiddenAddresses.removeAllowedAddress(e)}removeForbiddenAddress(e){return this.forbiddenAddresses.removeForbiddenAddress(e)}getBlockingTime(){const e={};return this.protectionSettings.getBlockConnectionTimeout(e)!==w.MR?void 0:e.value}setBlockingTime(e){this.protectionSettings.setBlockConnectionTimeout(e)}},wt=class{constructor(e,t,i){this.protectionStatus=t.getProtectionSettingsProvider(),this.trace=i.get("TraceService")}getState(e){const t=()=>{let e={};if(0===this.protectionStatus.getProtectionStatus(e))return e.value};let i=setInterval((()=>{let r=t();2!==r&&(clearInterval(i),e(r))}),1e3);return 0}},bt=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.protectionSettings=t.getProtectionSettingsProvider()}getAdwareRiskwarePornwareBlockStatus(){let e={};return this.protectionSettings.getAdwareRiskwarePornwareBlockStatus(e),e.value}setAdwareRiskwarePornwareBlockStatus(e){this.protectionSettings.setAdwareRiskwarePornwareBlockStatus(e)}},yt=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.newsProvider=t.getNewsProvider(),this.newsReceiptNotificationSubscription=t.getNewsReceiptNotificationSubscription(),this.modeService=i.get("ModeService"),this.fileService=i.get("FileService"),this.productStorage=i.get("ProductStorageService"),this.environmentVarsService=i.get("EnvironmentVarsService"),this.ipmGuiProvider=t.getIpmGuiProvider(),this.guiNotificationSubscription=t.getIpmGuiNotificationSubscription(),this._currentIntervalForIpmBalloon=24,this._cachedContent=[],this._cachedContentIds=[],this._featureName=void 0,this._initializeIntervalForIpmBalloon(),this._initializeFeatureName()}subscribe(e){const t={onNewsChanged:()=>{e()}};this.newsReceiptNotificationSubscription.subscribe(t)}getProcessedNewsInfo(){let e={};return this.newsProvider.getNews(e)!==w.MR?[]:this._processIpmContentByMetaTag(e.value.items)}_processIpmContentByMetaTag(e){if(this._checkIsContentTheSame(e))return this._cachedContent;const t=this._getUserModeAsString(),i=e.filter(((e,i)=>{const r=this.fileService.readTextFile(e.contentUri)||"";if(r.length===_.Ds)return!1;const s=this._createMetaTagTemplateByUserRole(t),n=this._createMetaTagTemplateByBalloonSchedule(),o=this._createMetaTagTemplateByCustomizationCode(),a=this._createMetaTagTemplateByBuildUpperBound(),c=this._createMetaTagTemplateByBuildLowerBound(),l=r.match(s),d=r.match(n),u=r.match(o),h=r.match(a),p=r.match(c),g=h&&this._checkProductVersionLessOrEqualThanVersionInMeta(h[_.OL]),v=p&&this._checkProductVersionMoreOrEqualThanVersionInMeta(p[_.OL]),m=(null==d?void 0:d[_.OL])||24,S=this.environmentVarsService.expandEnvironmentVar(z.k3);if(null!==l&&t!==l[_.OL]||null!==u&&S!==u[_.OL]||null!==h&&!g||null!==p&&!v)return!1;{const e=this.getCurrentIntervalForIpmBalloon();return i===_.Ds&&e!==m&&this.setCurrentIntervalForIpmBalloon(m),!0}}));return this._cacheIpmContentInfo(i),i}_checkIsContentTheSame(e){const t=this.getIdsFromIpmContent(e);return t.length===this._cachedContentIds.length&&!t.some((e=>!this._cachedContentIds.includes(e)))}_cacheIpmContentInfo(e){this._cachedContent=[...e];const t=this.getIdsFromIpmContent(e);this._cachedContentIds=[...t]}_getUserModeAsString(){return{0:"user+email",1:"user",2:"admin"}[this.modeService.getUserMode()]}_createMetaTagTemplateByUserRole(e){const t=(0,F.ZJ)(e);return new RegExp(`<meta name=["|']user-role["|'] content=(?:["|'](${t})["|'])?`)}_createMetaTagTemplateByBalloonSchedule(){return new RegExp("<meta name=[\"|']balloon-schedule[\"|'] content=[\"|'](\\d+(?:\\.\\d+)?)[\"|']")}_createMetaTagTemplateByBuildUpperBound(){return new RegExp("<meta name=[\"|']build_upperbound[\"|'] content=[\"|']((\\d+\\.\\d+.\\d+\\.\\d+)?)[\"|']")}_createMetaTagTemplateByBuildLowerBound(){return new RegExp("<meta name=[\"|']build_lowerbound[\"|'] content=[\"|']((\\d+\\.\\d+.\\d+\\.\\d+)?)[\"|']")}_createMetaTagTemplateByCustomizationCode(){return new RegExp("<meta name=[\"|']customization[\"|'] content=[\"|']((\\S+)?)[\"|']")}_checkProductVersionLessOrEqualThanVersionInMeta(e){const t=this.environmentVarsService.expandEnvironmentVar(z.Fe).split("."),i=e.split(".");if(t.length!==i.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==i[e])return Number(t[e])<Number(i[e]);return!0}_checkProductVersionMoreOrEqualThanVersionInMeta(e){const t=this.environmentVarsService.expandEnvironmentVar(z.Fe).split("."),i=e.split(".");if(t.length!==i.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==i[e])return Number(t[e])>Number(i[e]);return!0}_initializeIntervalForIpmBalloon(){this._currentIntervalForIpmBalloon=this.getPreviousIntervalForIpmBalloon()}getIdsFromIpmContent(e){return Array.isArray(e)?e.map((e=>e.contentId)):[]}setCurrentIntervalForIpmBalloon(e){this._currentIntervalForIpmBalloon=e}setPreviousIntervalForIpmBalloon(e){this.productStorage.set("intervalForIpmBalloon",Number(e).toExponential(11))}getCurrentIntervalForIpmBalloon(){return this.setPreviousIntervalForIpmBalloon(this._currentIntervalForIpmBalloon),this._currentIntervalForIpmBalloon}getPreviousIntervalForIpmBalloon(){const e=this.productStorage.get("intervalForIpmBalloon");return parseFloat(e)||24}restoreDefaultIpmBalloonInterval(){this._currentIntervalForIpmBalloon=24}_readFeatureNameFromIpmConfig(){var e;const t={};return this.ipmGuiProvider.getCurrentGui(t),null===(e=t.value)||void 0===e?void 0:e.name}_initializeFeatureName(){this._featureName=this._readFeatureNameFromIpmConfig()}getFeatureName(){return this._featureName}subscribeOnIpmGui(e){this.guiNotificationSubscription.subscribe(e)}getCurrentFeatureName(){return this._readFeatureNameFromIpmConfig()}};var kt=i(59431);const Tt=class{constructor(e,t,i){this.productIdentityService=i.get("ProductIdentityService"),this.environmentVarsService=i.get("EnvironmentVarsService"),this.trace=i.get("TraceService"),this.isEmulator=t.isEmulator,this._initializeLocalizationResources()}_initializeLocalizationResources(){const e=this.getLocalization(),t=this.productIdentityService.getEdition(),r=this.environmentVarsService.expandEnvironmentVar(z.k3),{dictionaries:s,featuresList:n}=(0,kt.getResources)({localization:e,edition:t,rebrandingCode:r});if(this.isEmulator)this.currentDictionaries=s,this.featuresList=n.featuresList;else{this.currentDictionaries=i(95718);try{const{featuresList:e}=i(99108);this.featuresList=e}catch(e){this.trace.warning("LocalizationService: _initializeLocalizationResources: no features list")}}}getLocalization(){return this.productIdentityService.getLocalization()}getLocalizationResources(){return{dictionaries:this.currentDictionaries,featuresList:this.featuresList}}},Ct=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.protectionSettings=t.getProtectionSettingsProvider()}getExploitPreventionStatus(){let e={};return this.protectionSettings.getExploitPreventionStatus(e),e.value}setExploitPreventionStatus(e){this.protectionSettings.setExploitPreventionStatus(e)}getSystemProcessesMemoryProtectionStatus(){let e={};return this.protectionSettings.getSystemProcessesMemoryProtectionStatus(e),e.value}setSystemProcessesMemoryProtectionStatus(e){this.protectionSettings.setSystemProcessesMemoryProtectionStatus(e)}},Pt=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.passwordManager=t.getPasswordManager()}getPasswordProtectionState(){let e={};return this.passwordManager.isPasswordSet(e),e.value}setNewPassword(e){this.passwordManager.setPassword(e)}savePassword(e){i.g._currentPassword=e}getPassword(){return i.g._currentPassword?i.g._currentPassword:""}verifyPassword(e){return 0===this.passwordManager.verifyPassword(e)}changePassword(e,t){this.passwordManager.changePassword(e,t)}setShouldBePasswordSavedPerSession(e){i.g._isShouldBePasswordSaved=e}getShouldBePasswordStoredPerSession(){return!!i.g._isShouldBePasswordSaved&&i.g._isShouldBePasswordSaved}},Rt=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.agreementsManager=t.getAgreementsManager(),this.discoveryEventSubscription=t.getDiscoveryEventSubscription(),this.productStorage=i.get("ProductStorageService"),this.timeCounterService=i.get("TimeCounterService"),this.productController=t.getProductController(),this.productIdentityService=i.get("ProductIdentityService"),this.fileService=i.get("FileService")}getAgreements(){let e=[];return this.agreementsManager.getAgreements(e),e.reduce(((e,t)=>({...e,[t.id]:t})),{})}getAllAgreements(){let e=[];this.agreementsManager.getAgreements(e);let t=[];return this.agreementsManager.getAuxiliaryAgreements(t),[...e,...t]}getAcceptanceFactsWithoutRdp(){const e=[];return this.agreementsManager.getAllAcceptanceFacts(e),e.filter((e=>![pe.Z.rdp,pe.Z.rdpEtl].includes(e.agreementId)))}getAllAcceptanceFacts(){let e=[];return this.agreementsManager.getAllAcceptanceFacts(e),e}registerAcceptanceFact(e){this.agreementsManager.registerAcceptanceFact(e)}registerAcceptanceFacts(e){this.agreementsManager.registerAcceptanceFacts(e)===w.MR&&this.setAcceptedAgreementsState(we.Z.productAccepted)}subscribeOnDiscoveryEvent(e){this.discoveryEventSubscription.subscribe({segmentChanged:()=>{},segmentChanged2:t=>{const i=4392,r=this.productStorage.get("isFirstDiscoveryEventWasSkipped"),{newSegmentInfo:s}=t;if(s&&s.needToNotifyUser&&"function"==typeof e)if(void 0===r)this.productStorage.set("isFirstDiscoveryEventWasSkipped",!0),this.timeCounterService.addTimeEventListener({typeOfEvent:"interval",hoursEvent:i,listener:e,listenerLabel:"discoveryEventNotifier"});else{if(this.timeCounterService.isTimeEventExists({typeOfEvent:"interval",hoursEvent:i,eventListenerLabel:"discoveryEventNotifier"})){const e=this.timeCounterService.getDateNowAsHours();this.timeCounterService.updateTimeEventInitTime({typeOfEvent:"interval",hoursEvent:i,listenerLabel:"discoveryEventNotifier",newInitTime:e})}else this.timeCounterService.addTimeEventListener({typeOfEvent:"interval",hoursEvent:i,listener:e,listenerLabel:"discoveryEventNotifier"});e()}else void 0===r&&this.productStorage.set("isFirstDiscoveryEventWasSkipped",!0),this.timeCounterService.isTimeEventExists({typeOfEvent:"interval",hoursEvent:i,eventListenerLabel:"discoveryEventNotifier"})&&this.timeCounterService.deleteTimeEventListener({typeOfEvent:"interval",hoursEvent:i,listenerLabel:"discoveryEventNotifier"})}})}areThereNotAcceptedAgreements(){const e=this.getAgreements();return this.getAcceptanceFactsWithoutRdp().some((t=>!t.accepted&&e[t.agreementId].version===t.version))}getAcceptedAgreementsState(){const e={};return this.productController.getAcceptedAgreementsState(e)===w.MR?e.value:void 0}setAcceptedAgreementsState(e){this.productController.setAcceptedAgreementsState(e)}getNotAcceptedAgreementsText(){const e=this.getAgreements(),t=this.getActualNotAcceptedAgreementsInfo().filter((e=>e.agreementId!==pe.Z.rdp));return e&&t.length!==_.Ds?t.reduce(((t,i)=>{const r=(0,g.safeParseJson)(e[i.agreementId].tag,this.trace),s=r&&r.fileName?r.fileName:"";return{...t,[i.agreementId]:this.getAgreementTextByName(s)}}),{}):{}}getActualNotAcceptedAgreementsInfo(){const e=this.getAgreements();return this.getAcceptanceFactsWithoutRdp().filter((t=>!t.accepted&&e[t.agreementId].version===t.version))}getAgreementTextByName(e){const t=`${this.productIdentityService.getCurrentDirectory()}\\${e}`;return this.fileService.readTextFile(t)}scheduleAcceptAgreementsNotification(){this.clearAgreementBalloonTimeout(),this.timeCounterService.addTimeEventListener({typeOfEvent:"timeout",hoursEvent:3,listener:this.showAgreementBalloon.bind(this),listenerLabel:"showAgreementBalloon"})}clearAgreementBalloonTimeout(){this.timeCounterService.deleteTimeEventListener({typeOfEvent:"timeout",hoursEvent:3,listenerLabel:"showAgreementBalloon"})}showAgreementBalloon(){}},It=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.permissionsChecker=t.getPermissionsChecker(),this.featureManager=t.getFeatureManager()}checkFeatureAllowance(e){return this.permissionsChecker.isFeatureAllowed(e)===w.MR}isFeatureEnabled(e){return this.featureManager.isFeatureEnabled(e)===w.MR}},Et="interval",Mt="timeout",At="timeoutInitTimes",xt="intervalInitTimes",Ft=class{constructor(e,t,i){this.productStorage=i.get("ProductStorageService"),this.traceService=i.get("TraceService"),this.productIdentityService=i.get("ProductIdentityService"),this._timeCounterInterval=this._getTimeCounterInterval(),this._triggeredTimeouts={},this._eventListeners={interval:new Map,timeout:new Map},this._initTimes={interval:{},timeout:{}},this._initializeInitTimes(),this._startListening()}addTimeEventListener({typeOfEvent:e,hoursEvent:t,listener:i,listenerLabel:r,startTimeStamp:s}){var n;if(!this._isInputParamsForAddMethodValid({typeOfEvent:e,hoursEvent:t,listener:i,listenerLabel:r,startTimeStamp:s}))return-1;const o=e===Mt?At:xt,a=this.getDateNowAsHours(),c=(0,g.safeParseJson)(this.productStorage.get(o)),l=(null==c||null===(n=c[t])||void 0===n?void 0:n[r])||a;let d=new Map,u=this._initTimes[e],h=this._eventListeners[e];return h.has(t)?(d=h.get(t),d.get(r)||(d.set(r,i),u[t]={...u[t],[r]:l})):(d.set(r,i),h.set(t,d),u[t]={...u[t],[r]:l}),this.productStorage.set(o,(0,g.safeJsonStringify)(u)),0}deleteTimeEventListener({typeOfEvent:e,hoursEvent:t,listenerLabel:i}){if(!this._isInputParamsForDeleteMethodValid({typeOfEvent:e,hoursEvent:t,listenerLabel:i}))return-1;const r=e===Mt?At:xt,s=(0,g.safeParseJson)(this.productStorage.get(r))||{};let n=this._initTimes[e],o=this._eventListeners[e];o.has(t)&&(o.get(t).delete(i),0===o.get(t).size&&o.delete(t)),s[t]&&(delete s[t][i],0===Object.keys(s[t]).length&&delete s[t]),n[t]&&(delete n[t][i],0===Object.keys(n[t]).length&&delete n[t]);const a=(0,g.safeJsonStringify)(s);return this.productStorage.set(r,a),0}getTimeoutInitTimes(){return this._initTimes.timeout}getIntervalInitTimes(){return this._initTimes.interval}isTimeEventExists({typeOfEvent:e,hoursEvent:t,eventListenerLabel:i}){const r=this._eventListeners[e];return(null==r?void 0:r.has(t))&&(null==r?void 0:r.get(t).has(i))}setTriggeredTimeout(e,t){this._triggeredTimeouts=this.getTriggeredTimeouts();const i=this._triggeredTimeouts[t]||[],r=Array.from(new Set([...i,e]));this._triggeredTimeouts={...this._triggeredTimeouts,[t]:[...r]},this.productStorage.set("triggeredTimeouts",(0,g.safeJsonStringify)(this._triggeredTimeouts))}getTriggeredTimeouts(){const e=this.productStorage.get("triggeredTimeouts");return(0,g.safeParseJson)(e)||{}}isTimeoutExpired(e,t){var i;const r=this.getTimeoutInitTimes(),s=this.getDateNowAsHours();return s-((null===(i=r[e])||void 0===i?void 0:i[t])||s)>e}updateTimeEventInitTime({typeOfEvent:e,hoursEvent:t,listenerLabel:i,newInitTime:r}){const s=e===Mt?At:xt,n=this._initTimes[e];n[t]={...n[t],[i]:r},this.productStorage.set(s,(0,g.safeJsonStringify)(n))}getDateNowAsHours(){return Date.now()/_.Yn}_startListening(){this.listeningIntervalId=setInterval((()=>{this._triggerTimeoutListeners(),this._triggerIntervalListeners()}),this._timeCounterInterval)}_triggerTimeoutListeners(){this._eventListeners.timeout.size&&this._eventListeners.timeout.forEach(((e,t)=>{const i=this._initTimes.timeout[t];if(i)for(let[r,s]of Object.entries(i))if(t<=this.getDateNowAsHours()-s){const i=e.get(r);"function"==typeof i&&(i(),this.deleteTimeEventListener({typeOfEvent:Mt,hoursEvent:t,listenerLabel:r}),this.setTriggeredTimeout(t,r))}}))}_triggerIntervalListeners(){if(this._eventListeners.interval.size){const e=1.1,t=this.getDateNowAsHours(),i=this._timeCounterInterval/_.Yn;this._eventListeners.interval.forEach(((r,s)=>{const n=this._initTimes.interval[s];if(n)for(let[o,a]of Object.entries(n)){const n=t-a;if(s<=(i*e+(n>=0?n%s:0)||1)){const e=r.get(o);"function"==typeof e&&e()}}}))}}_initializeInitTimes(){this._initTimes.interval=(0,g.safeParseJson)(this.productStorage.get(xt))||{},this._initTimes.timeout=(0,g.safeParseJson)(this.productStorage.get(At))||{}}_getTimeCounterInterval(){return this._isTestMode()?1e3:6e5}_isTestMode(){const e=this.productIdentityService.isDebugMode(),t=this.productIdentityService.getSpectronEnabled();return e||t}_isInputParamsForAddMethodValid({typeOfEvent:e,hoursEvent:t,listener:i,listenerLabel:r,startTimeStamp:s}){const n=this.getDateNowAsHours(),o=parseInt(t,10);let a=!1;return!(![Mt,Et].includes(e)||isNaN(o)||"function"!=typeof i||"string"!=typeof r||s&&"number"!=typeof s||(s&&(a=n<s+t),a))}_isInputParamsForDeleteMethodValid({typeOfEvent:e,hoursEvent:t,listenerLabel:i}){const r=parseInt(t,10);return!(![Mt,Et].includes(e)||isNaN(r)||"string"!=typeof i)}getHourEvents(e,t){const i=this.getTimeoutInitTimes(),r=this.getIntervalInitTimes();switch(e){case Mt:return Object.keys(i).filter((e=>i[e][t]));case Et:return Object.keys(r).filter((e=>r[e][t]));default:return[]}}hydrateTimeEventListener({typeOfEvent:e,listener:t,listenerLabel:i}){const r=this.getHourEvents(e,i);r.length&&r.forEach((r=>{this.addTimeEventListener({typeOfEvent:e,hoursEvent:r,listener:t,listenerLabel:i})}))}},Lt=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.registrationController=t.getRegistrationController(),this.productIdentityService=i.get("ProductIdentityService"),this.featureManager=t.getFeatureManager(),this.windowsInteraction=t.getWindowsInteraction(),this.productStorage=i.get("ProductStorageService"),this._isRegistrationInProgress=!1}applyRegistrationCode(e){const t=this.registrationController.applyRegistrationCode(e);return t===w.MR&&this.productIdentityService.refreshPpcsIdInfo(),t}register(e){const t={};return this.registrationController.register(e,t)===w.MR?(this.productIdentityService.refreshPpcsIdInfo(),t.value):void 0}isUserRegistered(){const e=this.productIdentityService.getPpcsId();return Boolean(Number(e))}getFeatureFlagValue(e){const t={};return this.featureManager.getFeatureFlagValue(e,t)===w.MR?t.value:_.ZD}getRawRegistrationFormType(){const e=this.productIdentityService.getEdition()===I.H?Te.Wx:Te.ov,t=this.getFeatureFlagValue(e),i={};return this.windowsInteraction.getRegistrationFormType(t,i)===w.MR?i.value:Pe.cV}getRegistrationFormTypeSafe(){if(this._isRegistrationInProgress)return this.retrieveSavedFormType();{const e=this.getRawRegistrationFormType();return this.saveCurrentFormType(e),e}}deleteSavedCurrentFormType(){this.productStorage.delete(ae)}saveCurrentFormType(e){this.productStorage.set(ae,e)}retrieveSavedFormType(){const e=this.productStorage.get(ae);if(void 0===e){const e=this.getRawRegistrationFormType();return this.saveCurrentFormType(e),e}return e}setIsRegistrationInProgress(e){this._isRegistrationInProgress=e}getRegion(){const e={};return this.windowsInteraction.getRegion(e)===w.MR?e.value:_.ZD}getRegistrationSchedulerInterval(){const e={};return this.registrationController.getOpenMarketoFormSchedule(e)===w.MR?e.value/_.UO:_.uL}getRegistrationCode(){const e={};return this.registrationController.getRegistrationCode(e)===w.MR?e.value:void 0}};var Dt=new WeakMap;class Bt extends $e.default{constructor(e,t,i){var r,s,o;super(e,t,i),o={writable:!0,value:[]},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,s=Dt),s.set(r,o),this.trace=i.get("TraceService"),this.productStateStatisticsService=i.get("ProductStateStatisticsService"),this.responseSender=t.getResponseSender(),this.uiRegistrator=t.getUiRegistrator(),this.callbackObject={...this.callbackObject,relaunch:e=>(this.subscribers.relaunchUi&&"function"==typeof this.subscribers.relaunchUi?this.subscribers.relaunchUi(e):this.trace.warning("KartUiRegistrationService: relaunch is not switched"),w.MR),sendRequest:(e,t)=>{switch(e){case 1:return this._handleRequest(e,t,this._tfuLoudInstallCallback);case 2:return this._handleRequest(e,t,this._tfuUpgradeRequestCallback);case 3:return this._handleRequest(e,t,this._osRestartRequestCallback);case 4:return this._handleRequest(e,t,this._appRestartRequestCallback);case 5:return this._handleRequest(e,t,this._oldVersionUninstallFailedCallback);case S:return this._handleRequest(e,t,this._showProxyBalloonCallback);case 4165273708:return this._handleRequest(e,t,this._hideProxyBalloonCallback);case 36866:return this._handleRequest(e,t,this._relaunchCallback);case 36865:return this._handleRequest(e,t,this._shutdownCallback);case 40966:return this._handleRequest(e,t,n(this,Dt));case 40967:return this._handleRequest(e,t,this._RegistrationSettingsUpdatedCallback);case 40968:return this._handleRequest(e,t,this._eolStatusCallback);case 40969:return this._handleRequest(e,t,this._migrationKesCallback)}}}}_handleRequest(e,t,i){return Array.isArray(i)?(i.forEach((i=>{if("function"!=typeof i)return w.o1;i(e,t)})),w.MR):"function"==typeof i?(i(e,t),w.MR):w.o1}sendResponse(e,t,i=_.ZD){this.responseSender.send(e,t,i)}setTfuInstallationRequestCallback(e){this._tfuLoudInstallCallback=e}setTfuUpgradeRequestCallback(e){this._tfuUpgradeRequestCallback=e}setOsRestartRequestCallback(e){this._osRestartRequestCallback=e}setAppRestartRequestCallback(e){this._appRestartRequestCallback=e}setOldVersionUninstallFailedCallback(e){this._oldVersionUninstallFailedCallback=e}setShowProxyBalloonCallback(e){this._showProxyBalloonCallback=e}setHideProxyBalloonCallback(e){this._hideProxyBalloonCallback=e}setRegistrationSettingsUpdatedCallback(e){this._RegistrationSettingsUpdatedCallback=e}setEolStatusCallback(e){this._eolStatusCallback=e}setShutdownCallback(e){this._shutdownCallback=()=>setTimeout((()=>{null==e||e()}),_.rx)}setRelaunchCallback(e){this._relaunchCallback=(t,i)=>setTimeout((()=>{null==e||e(i)}),_.rx)}unregisterUi(){this.uiRegistrator.unregisterUi()}addFeatureFlagUpdatedCallback(e){n(this,Dt).push(e)}setMigrationKesStatusCallback(e){this._migrationKesCallback=e}}const Ot=Bt;var Ut=i(22271);class Wt extends Ut.default{constructor(e,t,i,r){super(e,t,i,r),this.windowsInteraction=t.getWindowsInteraction()}getMd5OfFile(e){const t={};return"function"==typeof this.windowsInteraction.getMd5OfFile&&this.windowsInteraction.getMd5OfFile(e,t),t.value}async openFilePath(e){const{filePaths:t}=await this.dialog.showOpenDialog(e,{properties:["openFile"]});return null==t?void 0:t[_.Ds]}}const Nt=Wt,Vt="featuresConfiguration",zt=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.productIdentityService=i.get("ProductIdentityService"),this.fileService=i.get("FileService"),this.environmentVarsService=i.get("EnvironmentVarsService"),this._initializeGuiByExternalConfig()}_initializeGuiByExternalConfig(){this._uiCustomizationSettings=this.getSettingsFromJson(Z.oM)}getSettingsFromJson(e){const t=`${this.productIdentityService.getCurrentDirectory()}\\resources\\${e}`;return this.fileService.readJSON(t)}getCustomizationParams(){return{isGetPremiumByUrl:this.isGetPremiumByUrl()}}getMarketoFormConfig(){var e;const t=this.environmentVarsService.expandEnvironmentVar(z.y5),i=this.environmentVarsService.expandEnvironmentVar(z.VS);return Object.assign(null===(e=this._uiCustomizationSettings)||void 0===e?void 0:e.userRegistrationForm,{marketoScriptUrl:t,marketoFormUrl:i})}getUiElementsConfiguration(){var e;return(null===(e=this._uiCustomizationSettings)||void 0===e?void 0:e.uiElementsConfig)||{}}isFeatureEnabledByFlagName(e){var t;if(!e)throw Error(`Invalid provided featureFlagName = ${e}. Did you forget to pass correct parameter?`);if(null===(t=this._uiCustomizationSettings)||void 0===t?void 0:t[Vt])return"boolean"!=typeof this._uiCustomizationSettings[Vt][e]||this._uiCustomizationSettings[Vt][e]}isUserRegistrationEnabled(){return this.isFeatureEnabledByFlagName("isUserRegistrationEnabled")??!0}isGetPremiumByUrl(){return this.isFeatureEnabledByFlagName("isGetPremiumByUrl")??!1}isMalwareScanEnabled(){return this.isFeatureEnabledByFlagName("isMalwareScanEnabled")??!0}isOnboardingEnabled(){return this.isFeatureEnabledByFlagName("isOnboardingEnabled")??!0}isEmailNotificationsEnabled(){return this.isFeatureEnabledByFlagName("isEmailNotificationsEnabled")??!0}isManualRegistrationOpenEnabled(){return this.isFeatureEnabledByFlagName("isManualRegistrationOpenEnabled")??!0}isDownloadsScanEnabled(){return this.isFeatureEnabledByFlagName("isDownloadsScanEnabled")??!0}getCountryCodesMapping(){var e;return null===(e=this._uiCustomizationSettings)||void 0===e?void 0:e.countryCodes}},jt=class{constructor(e,t,i){this.dumpSender=t.getDumpSender(),this.dumpReportNotificationSubscription=t.getDumpReportNotificationSubscription(),this.trace=i.get("TraceService")}subscribe(e){this.dumpReportNotificationSubscription.subscribe(e)}sendDumpReport(e){return this.dumpSender.sendProductReport(e||_.ZD)}declineProductReport(){return this.dumpSender.declineProductReport()}sendEtlReport(){return this.dumpSender.sendEtlReport()}declineEtlReport(){return this.dumpSender.declineEtlReport()}};function Gt(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function qt(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var Ht=new WeakSet,Kt=new WeakSet;function Zt(){return this.permissionsCheckerService.checkFeatureAllowance(M.zp)}function $t(e){if(this.permissionsCheckerService.checkFeatureAllowance(M.zp))return e;if(this.permissionsCheckerService.checkFeatureAllowance(M.Nb)){const{type:t,dateTime:i,formId:r,formSeqNumber:s,trigger:n}=e;return{type:t,dateTime:i,formId:r,formSeqNumber:s,trigger:n}}return{}}const Jt=class{constructor(e,t,i){Gt(this,Kt),Gt(this,Ht),this.trace=i.get("TraceService"),this.productStorage=i.get("ProductStorageService"),this.productIdentityService=i.get("ProductIdentityService"),this.windowsInteraction=t.getWindowsInteraction(),this.additionalInfoStorage=t.getAdditionalInfoStorage(),this.trustedTimeProvider=t.getTrustedTimeProvider(),this.permissionsCheckerService=i.get("PermissionsCheckerService"),this.productStorageService=i.get("ProductStorageService"),this.ipmService=i.get("IpmService"),this.userRegistrationService=i.get("UserRegistrationService"),this.kesTrialEventsProvider=t.getKesTrialEventsProvider(),this._previousAliveTimestamp=void 0}getSystemUserId(){const e={};return this.windowsInteraction.getCrc32OfSystemUserId(e)===w.MR?e.value:_.ZD}getSystemUserIdIfAllowed(){return this.permissionsCheckerService.checkFeatureAllowance(M.tU)?this.getSystemUserId():_.ZD}setAdditionalInfoEvent(e,t){const i=(0,g.safeJsonStringify)(t),r=this.getSystemUserId();this.additionalInfoStorage.setAdditionalInfoEvent(r,e,i)}getExperimentUsageEvent(){const e={},t=this.getSystemUserId();return this.additionalInfoStorage.getExperimentUsage(t,e)===w.MR?(0,g.safeParseJson)(e.value):void 0}sendPreviousProductStateEvent(e=!0){const t=(0,g.safeParseJson)(this.productStorageService.get(Y))||{},i=Object.keys(t);if(i.includes(ye.ppL)){const e=(0,g.safeParseJson)(this.productStorageService.get(X));this.setRegistrationUsageEvent(e),this.productStorageService.delete(X)}if(i.length){const r=Number(this.productStorageService.get($)),s=new Date(r||Date.now());i.filter((t=>e?t:!b[t])).forEach((e=>{const i={...t[e],closeDateTime:s};this.setAdditionalInfoEvent(Ve,i),this.deleteCachedWindowsUiUsageEventByWinId(e)}))}else this.productStorageService.delete(Y)}deleteCachedWindowsUiUsageEventByWinId(e){const t=(0,g.safeParseJson)(this.productStorageService.get(Y));t&&(delete t[e],this.productStorageService.set(Y,(0,g.safeJsonStringify)(t)))}getLastRegistrationEvent(){const e={},t=this.getSystemUserId();return this.additionalInfoStorage.getLastRegistrationEvent(t,e)===w.MR?(0,g.safeParseJson)(e.value):void 0}getCurrentTrustedDateTime(){const e={};return this.trustedTimeProvider.getCurrentTrustedDateTime(e),new Date(e.value).toISOString()}setAdditionalInfoExperimentEvent({event:e,experimentName:t}){if((0,g.safeJsonStringify)(e).length>_.S_)return w.o1;if(!e.timestamp)return w.o1;const i=t||this.ipmService.getFeatureName(),r=this.getExperimentUsageEvent()||{},s=(0,g.safeJsonStringify)(e).length;try{for(;JSON.stringify(r).length+s>_.S_;){const e=Object.keys(r);e.sort(((e,t)=>new Date(r[e][0].timestamp)-new Date(r[t][0].timestamp))),r[e[0]].length>_.OL?r[e[0]].shift():delete r[e[0]]}r[i]||(r[i]=[]),r[i].push(e),this.setAdditionalInfoEvent("experimentUsage",r)}catch(e){}return w.MR}setRegistrationGHEvent({data:e={},eventName:t=_.ZD,timestamp:i}){const r=qt(this,Ht,Zt).call(this);e.fieldsState&&!r&&(e.fieldsState={});const s=this.userRegistrationService.getRegistrationFormTypeSafe();this.setAdditionalInfoExperimentEvent({event:{data:{formType:s,...e},event:t,timestamp:i||this.getCurrentTrustedDateTime()},experimentName:"registrations"})}getPreviousAliveTimestamp(){return this._previousAliveTimestamp}setPreviousAliveTimestamp(e){this._previousAliveTimestamp=e}addEventForKesMigration(e,t){const i=(0,g.safeJsonStringify)(t);this.kesTrialEventsProvider.addEvent(e,i)}setRegistrationUsageEvent(e){const t=qt(this,Kt,$t).call(this,e);Object.keys(t).length&&this.setAdditionalInfoEvent("registration",t)}},Yt=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.ksnTransport=t.getKsnTransport(),this.productIdentityService=i.get("ProductIdentityService"),this.permissionsCheckerService=i.get("PermissionsCheckerService"),this.environmentVarsService=i.get("EnvironmentVarsService"),this.localizationService=i.get("LocalizationService"),this.ipmService=i.get("IpmService"),this.windowsInteraction=t.getWindowsInteraction(),this._guidsByFeature={}}sendStatistics({source:e,action:t,value:i,sessionGuid:r}){var s;const n=this.productIdentityService.getPpcsId(),o=this.productIdentityService.getAppId(),a=this.environmentVarsService.expandEnvironmentVar(z.k3)||_.ZD,c=![_.ZD,_.kf].includes(a),l=this.localizationService.getLocalization(),d=c?`KART ${l}-${null==a||null===(s=a.toLowerCase)||void 0===s?void 0:s.call(a)}`:"KART GUI statistics",u=this.ipmService.getFeatureName(),[h=e,p]=e.split("_"),v={feature:u||d,eventsJson:(0,g.safeJsonStringify)({Info:{Status:"EVENTS"},Context:[{SessionId:r,Source:h,Action:t,Timestamp:Math.floor(Date.now()/1e3),Data:{item:p,value:i}}]}),ppcsId:parseInt(n,10),appId:o};this.ksnTransport.sendFeatureUsageStatistics(v)}sendStatisticsIfAllowed(e){this.permissionsCheckerService.checkFeatureAllowance(M.cH)&&this.sendStatistics(e)}getSessionGuidByBalloonId(e){const t={28:A,25:A,26:A}[e];return t?this.getGuidRelatedToFeature(t):_.ZD}getGuid(){const e={};return this.windowsInteraction.createGuid(e)===w.MR?e.value:_.ZD}getGuidRelatedToFeature(e){return this._guidsByFeature[e]||(this._guidsByFeature[e]=this.getGuid()),this._guidsByFeature[e]}resetGuidRelatedToFeature(e){this._guidsByFeature[e]=_.ZD}},Xt=class{constructor(e,t,i){this.installNotificationSubscription=t.getInstallNotificationSubscription(),this.trace=i.get("TraceService"),this.guiResourceController=t.getGuiResourcesController()}subscribe(e){this.installNotificationSubscription.subscribe(e)}refreshResourcesSymlink(){try{this.guiResourceController.refreshResourcesSymlink()}catch(e){}}},Qt=class{constructor(e,t,i){this.trace=i.get("TraceService"),this._internalCache={}}setCacheValue(e,t){this._internalCache[e]=t}getCacheValue(e){return this._internalCache[e]}},ei=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.settingsController=t.getSettingsController()}getString(e){const t={};return this.settingsController.getString(e,t)===w.MR?t.value:void 0}getUint32(e){const t={};return this.settingsController.getUint32(e,t)===w.MR?t.value:void 0}getBool(e){const t={};return this.settingsController.getBool(e,t)===w.MR?t.value:void 0}},ti=class{constructor(e,t,i){this.trace=i.get("TraceService"),this.windowService=i.get("WindowService"),this.isEmulator=t.isEmulator}sendDataToSpa(e,t){var i;const r=this.windowService.getMainWindow();null==r||null===(i=r.webContents)||void 0===i||i.send(e,t)}sendDataToBalloon(e,t,i){}createSpaCallback(e){return t=>{var i,r;this.sendDataToSpa(e,t),this.isEmulator&&(null===(i=window)||void 0===i||null===(r=i.mainWindow)||void 0===r||r.webContents.send(e,t))}}};var ii=i(71893);class ri extends ii.default{constructor(e,t,i){super(e,t,i),this.app=e.app,this.trace=i.get("traceService"),this.initializer=t.initializer}shutdownUI(){this.app.exit()}join(){this.initializer.join()}}const si=ri;var ni=i(83916);class oi{constructor(e,t,i){this.trace=i.get("TraceService"),this.kesMigrationManager=t.getKesMigrationManager(),this.windowsInteraction=t.getWindowsInteraction()}startForwardMigration(){return this.kesMigrationManager.startMigrationScenario(ni.Bq)===w.MR?w.MR:w.Pg}getEulaPath(){const e={};return this.kesMigrationManager.getEulaPath(e)===w.MR?e.value:void 0}restartOs(){this.kesMigrationManager.restartOs()}isMigrationEnabled(){const e={};return this.kesMigrationManager.isMigrationAllowed(e)===w.MR&&e.value}checkAdminPrivileges(){return new Promise(((e,t)=>{const i={onAdminPrivilegesCheckDone:t=>{e(t)}},r=this.windowsInteraction.checkAdminPrivileges(i);r===w.MR||t(r)}))}getServiceStatus(){const e={};return this.kesMigrationManager.getStatus(e)===w.MR?e.value:{}}clearMigrationScenario(){this.kesMigrationManager.clear()}}var ai=new WeakMap;class ci extends a.BaseBL{constructor(i,r,s,n){var a,c,l,d;super(i,r,s,e,t),d={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(c=this,l=ai),l.set(c,d),this.subscribeOnRendererEvents(),o(this,ai,this.serviceRegistry.kasapi.isEmulator),this.get("ProductStateStatisticsLogic").sendOldPSEventsAndScheduleAliveTimestamp(),this.globalSubscriberLogic=this.get("GlobalSubscribeLogic"),this.globalSubscriberLogic.subscribeToTracesState(),this.globalSubscriberLogic.subscribeOnProductIconClick(),this.globalSubscriberLogic.subscribeOnScreenModeChange(),this.get("ProductLaunchLogic").setElectronVersion(null===(a=n.versions)||void 0===a?void 0:a.electron),this.get("ThreatsLogic").subscribeOnThreats(),this.get("UiControllerLogic").switchUiCallbacks(n.pid),this.get("TrayLogic").createTray(),this.get("UpgradeLogic").subscribeOnTfuInstallationStatus(),this.get("AgreementsLogic").checkAgreementsAcceptance(),this.get("AgreementsLogic").subscribeOnDiscoveryEvent(),this.get("UserRegistrationLogic").scheduleUserRegistration(),this.get("UserRegistrationLogic").checkAndSubmitMarketoSilent(),this.get("DumpReportsLogic").subscribeOnDumpReportReady(),this.get("ProductLaunchLogic").scheduleTelemetrySending(),this.get("ProductLaunchLogic").sendStatisticsAboutProxy(),this.get("ThreatsLogic").scheduleActivityReport(),this.get("ThreatsLogic").subscribeOnMalwareScan(),this.get("ProductStateStatisticsLogic").resendRegistrationUsageEvent(),this.get("ThreatsLogic").subscribeOnDownloadsScan(),this.get("UserRegistrationLogic").sendIncompletePsRegistrationEvents(),this.get("UserRegistrationLogic").subscribeOnRegistrationSettingsChanges(),this.get("UserRegistrationLogic").subscribeOnRegistrationFormTypeUpdate(),this.get("ThreatsLogic").subscribeOnDownloadScanFeatureFlagChange(),this.get("MainPageLogic").subscribeBlOnEolStatusChange()}subscribeOnRendererEvents(){this.get("CommonLogic").traceInfo("BL: subscribeOnRendererEvents was called"),this.serviceRegistry.get("electron").ipcMain.on(c.Zz,(async(e,t)=>{try{await this._handleRendererRequest(t)}catch(e){this.get("CommonLogic").traceInfo(`BL: subscribeOnRendererEvents: handleRendererRequest: ERROR=${e}`),console.error(e)}}))}async _handleRendererRequest(e){const t=await this.get(e.logicName)[e.methodName](e.data),i=`${e.logicName}:${e.methodName}:${e.requestId}`;var r,s;"mainWindow"===e.rendererName?(this.serviceRegistry.get("IpcService").sendDataToSpa(i,t),n(this,ai)&&(null===(r=window)||void 0===r||null===(s=r.mainWindow)||void 0===s||s.webContents.send(i,t))):this.get("CommonLogic").traceInfo(`BL: _handleRendererRequest: unknown rendererName=${e.rendererName}`)}}})(),r})()));